{"version":3,"sources":["../../../node_modules/es-module-loader/core/common.js","../../../node_modules/es-module-loader/core/resolve.js","../../../node_modules/es-module-loader/core/loader-polyfill.js","../../../node_modules/es-module-loader/core/register-loader.js","../../../src/common.js","../../../src/fetch.js","../../../src/resolve.js","../../../src/config.js","../../../src/evaluate.js","../../../src/format-helpers.js","../../../src/instantiate.js","../../../src/systemjs-loader.js","../../../src/system.js","../../../jspm.browser.js","../../../jspm.config.js","../../js/footer.js"],"names":["createSymbol","name","hasSymbol","Symbol","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","isBrowser","replace","isWindows","err","message","errArgs","fileName","Error","lineNumber","stack","originalErr","isNode","throwResolveError","relUrl","parentUrl","RangeError","resolveIfNotPlain","trim","parentProtocol","substr","indexOf","firstChar","secondChar","length","pathname","parentIsPlain","undefined","segmented","lastIndexOf","output","segmentIndex","i","pop","push","substring","join","match","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","next","value","done","Loader","this","registry","Registry","ensureInstantiated","module","ModuleNamespace","TypeError","ensureResolution","resolvedKey","REGISTRY","baseObject","defineProperty","BASE_OBJECT","forEach","extendNamespace","key","enumerable","get","RegisterLoader","call","registryDelete","delete","deleted","records","hasOwnProperty","linkRecord","REGISTER_INTERNAL","lastRegister","trace","createLoadRecord","state","registration","importerSetters","loadError","evalError","instantiatePromise","dependencies","execute","executingRequire","moduleObj","setters","depsInstantiatePromise","dependencyInstantiations","linked","resolveInstantiate","loader","parentKey","Promise","resolve","load","reject","instantiate","then","link","createProcessAnonRegister","INSTANTIATE","instantiation","traceLoad","default","__useDefault","registerDeclarative","catch","addToError","resolveInstantiateDep","traceDepMap","loads","deps","dynamicDeps","depMap","declare","definedExports","declared","global","changed","p","ContextualLoader","exports","instantiateDeps","seen","depsInstantiatePromises","Array","all","setter","deepDepsInstantiatePromises","depLoad","depLink","id","meta","url","ensureEvaluate","doEvaluate","makeDynamicRequire","declarativeExecute","configurable","set","require","dynamicExecute","moduleDefault","__esModule","nullContext","e","noop","protectedCreateNamespace","bindings","isModule","m","hasStringTag","toStringTag","prototype","toString","warn","msg","force","warnings","console","checkInstantiateWasm","wasmBuffer","processAnonRegister","bytes","Uint8Array","WebAssembly","compile","importObj","Module","imports","register","_export","Instance","loadNodeModule","baseURL","parentModuleContext","_nodeRequire","base","decodeURI","paths","_nodeModulePaths","extend","a","b","prepend","extendMeta","_prepend","val","concat","preloadScript","supportsPreload","supportsPrefetch","document","createElement","rel","as","href","head","appendChild","removeChild","Image","src","workerImport","importScripts","scriptLoad","crossOrigin","integrity","cleanup","error","loadingScripts","splice","script","removeEventListener","isWorker","type","charset","async","addEventListener","readMemberExpression","pParts","split","shift","applyPaths","mapMatch","getMapMatch","target","resolved","baseURI","checkMap","curLen","len","map","bestMatch","fetchFetch","authorization","asBuffer","hasXhr","xhrFetch","opts","headers","Accept","credentials","fetch","res","ok","arrayBuffer","text","status","statusText","xhr","response","responseText","XMLHttpRequest","responseType","onreadystatechange","readyState","open","setRequestHeader","withCredentials","send","nodeFetch","fs","readFile","data","dataString","noFetch","createMetadata","pluginKey","pluginArgument","pluginModule","packageKey","packageConfig","getParentMetadata","config","parentMetadata","parentPluginIndex","pluginFirst","packages","normalize","CONFIG","metadata","booleanIndex","conditionObj","parseCondition","resolveCondition","conditionValue","parsed","parsePlugin","plugin","packageResolve","argument","normalized","combinePluginParts","interpolateConditional","setMeta","METADATA","decanonicalize","coreResolve","normalizeSync","packageResolveSync","doMap","packageName","relativeResolved","has","trailingSlash","skipExtensions","parentMap","parentMapMatch","mapped","doMapSync","pkgConfigMatch","getPackageConfigMatch","packageConfigKeys","createPackage","subPath","applyPackageConfigSync","resolvedPromise","createMeta","format","configured","loadPackageConfigPath","configPath","applyPackageConfig","extension","globals","nonce","sourceMap","encapsulateGlobal","cjsRequireDetection","cjsDeferDepsExecute","esModule","wildcardIndex","bestDepth","depth","getMetaMatches","metaPattern","matchMeta","matchDepth","argumentKey","pluginIndex","addDefaultExtension","pkg","pkgKey","defaultExtension","metaMatch","main","mapPath","validMapping","path","conditionPromises","conditions","c","condition","import","conditionValues","prop","negate","createPkgConfigPathObj","lastWildcard","Math","max","regEx","RegExp","wildcard","exactMatch","packageConfigPaths","packageConfigPath","pkgConfigPath","configLoader","pluginLoader","pkgConfig","setPkgConfig","pkgMeta","matchFn","dotRel","exactMeta","conditionExport","conditionModule","negation","conditionExportIndex","sysConditions","bool","conditionalMatch","interpolationRegEx","envSet","cfg","envCallback","envConfigNames","envConfig","envModule","cloneObj","obj","maxDepth","clone","getConfigItem","cfgItem","getConfig","configName","configNames","configItem","setConfig","isEnvConfig","wasm","setProduction","production","build","defaultJSExtensions","v","pkgName","packageLength","bundles","bundle","depCache","transpiler","prependConfig","inlineSourceMap","sourceMapString","hasBuffer","sourceMapPrefix","Buffer","btoa","unescape","encodeURIComponent","getSource","source","address","wrap","lastLineIndex","JSON","stringify","scriptExec","body","documentElement","onerror","window","_e","apply","arguments","preExec","setAttribute","postExec","callCounter","curSystem","System","SystemJS","evaluate","noWrap","supportsScriptExec","vm","useVm","runInThisContext","filename","eval","stripOrigin","windowOrigin","requireResolve","request","parentId","getPathVars","moduleId","dirname","getCJSDeps","inLocation","locations","index","cjsRequireRegEx","lastIndex","commentRegEx","stringRegEx","stringLocations","commentLocations","exec","dep","globalIterator","globalName","ignoredGlobalProps","getGlobalValue","globalValue","prepareGlobal","moduleName","encapsulate","curDefine","define","oldGlobals","g","globalSnapshot","singleGlobal","multipleExports","amdGetCJSDeps","requireIndex","requireAlias","fnBracketRegEx","wsRegEx","requireRegEx","requireRegExs","cjsRequirePre","cjsRequirePost","wrapEsModuleExecute","clearLastDefine","metaDeps","curMetaDeps","curEsModule","lastNamedDefine","multipleNamedDefines","registerLastDefine","registerDynamic","setMetaEsModule","moduleValue","loadBundlesAndDepCache","supportsScriptLoad","amdDefine","initializePlugin","runFetchPipeline","instantiated","pluginLoad","matched","curModule","parts","locate","fetched","wasmInstantiated","stringSource","TextDecoder","decode","translateAndInstantiate","readMetaSyntax","translate","traceOpts","translated","sanitizeSourceMap","detectRegisterFormat","esmRegEx","transpile","calledInstantiate","result","detectLegacyFormat","registered","emptyModule","parse","newModule","pathVars","__cjsWrapper","args","cjsWrapper","hashBangRegEx","gl","exportName","retrieveGlobal","leadingCommentAndMeta","leadingCommentAndMetaRegEx","amdRegEx","cjsExportsRegEx","originalName","file","sources","depsPrefix","setMetaProperty","curPart","metaRegEx","metaParts","metaPartRegEx","metaString","metaName","metaValue","SystemJSLoader","_loader","loadedBundles","scriptSrc","nodeRequire","formatHelpers","isProduction","isBuilder","browser","node","dev","registryWarn","method","process","versions","platform","envGlobal","self","getElementsByTagName","bases","location","slashIndex","cwd","constructor","parent","RESOLVE_INSTANTIATE","RESOLVE","iteratorSupport","entries","namespace","create","freeze","relList","supports","fetchFunction","fetch$1","chrome","navigator","userAgent","names","callback","errback","referer","dynamicRequires","modules","factory","req","depValues","uri","moduleIndex","exportsIndex","contextualRequire","toUrl","curRequire","bind","amd","amdRequire","protocol","hostname","port","scripts","curScript","currentScript","defer","__filename","resolveSync","hasProxy","Proxy","option","version"],"mappings":";;;yBAcA,SAAgBA,EAAcC,GAC5B,OAAOC,GAAYC,SAAW,KAAOF,EA0DvC,SAASG,EAAmDC,EAAUC,GAE/DC,KACHD,EAAaA,EAAWE,QAAQC,GAAY,eAAiB,aAAc,KAE7E,IAEIC,EAFAC,GAAWN,EAASM,SAAWN,GAAY,OAASC,EAItDI,EADEE,IAAWP,EAASQ,SAChB,IAAIC,MAAMH,EAASN,EAASQ,SAAUR,EAASU,YAE/C,IAAID,MAAMH,GAGlB,IAAIK,EAAQX,EAASY,YAAcZ,EAASY,YAAYD,MAAQX,EAASW,MAUzE,OANEN,EAAIM,MAFFE,GAEUP,EAAU,OAASK,EAEnBA,EAEdN,EAAIO,YAAcZ,EAASY,aAAeZ,EAEnCK,EC5FT,SAASS,EAAmBC,EAAQC,GAClC,MAAM,IAAIC,WAAW,sBAAwBF,EAAS,QAAUC,GAElE,SAAgBE,EAAmBH,EAAQC,GACzCD,EAASA,EAAOI,OAChB,IAAIC,EAAiBJ,GAAaA,EAAUK,OAAO,EAAGL,EAAUM,QAAQ,KAAO,GAE3EC,EAAYR,EAAO,GACnBS,EAAaT,EAAO,GAGxB,GAAkB,MAAdQ,GAAoC,MAAfC,EAGvB,OAFKJ,GACHN,EAAkBC,EAAQC,GACrBI,EAAiBL,EAGrB,GAAkB,MAAdQ,IAAqC,MAAfC,GAAqC,MAAfA,IAAqC,MAAdT,EAAO,IAAgC,IAAlBA,EAAOU,SAAiBV,GAAU,OAC7G,IAAlBA,EAAOU,SAAkBV,GAAU,OACrB,MAAdQ,EAAmB,CACrB,IAIIG,EAJAC,GAAiBP,GAAuD,MAArCJ,EAAUI,EAAeK,QA0BhE,GArBIE,QAEgBC,IAAdZ,GACFF,EAAkBC,EAAQC,GAC5BU,EAAWV,GAMTU,EAJ8C,MAAzCV,EAAUI,EAAeK,OAAS,GAElB,UAAnBL,GACFM,EAAWV,EAAUK,OAAOD,EAAeK,OAAS,IAChCJ,OAAOK,EAASJ,QAAQ,KAAO,GAGxCN,EAAUK,OAAO,GAKnBL,EAAUK,OAAOD,EAAeK,OAAS,GAGpC,MAAdF,EAAmB,CACrB,IAAII,EAGF,OAAOX,EAAUK,OAAO,EAAGL,EAAUS,OAASC,EAASD,OAAS,GAAKV,EAFrED,EAAkBC,EAAQC,GAa9B,IAAK,IALDa,EAAYH,EAASL,OAAO,EAAGK,EAASI,YAAY,KAAO,GAAKf,EAEhEgB,KACAC,GAAgB,EAEXC,EAAI,EAAGA,EAAIJ,EAAUJ,OAAQQ,IAEpC,IAAsB,IAAlBD,EASJ,GAAqB,MAAjBH,EAAUI,GA2BdD,EAAeC,MA3Bf,CAEE,GAAyB,MAArBJ,EAAUI,EAAI,IAAmC,MAArBJ,EAAUI,EAAI,GAC5CF,EAAOG,MACPD,GAAK,MAGF,CAAA,GAAyB,MAArBJ,EAAUI,EAAI,GAGlB,CAEHD,EAAeC,EACf,SALAA,GAAK,EASHN,GAAmC,IAAlBI,EAAON,QAC1BX,EAAkBC,EAAQC,GAGxBiB,IAAMJ,EAAUJ,QAClBM,EAAOI,KAAK,QA9BO,MAAjBN,EAAUI,KACZF,EAAOI,KAAKN,EAAUO,UAAUJ,EAAcC,EAAI,IAClDD,GAAgB,GAuCtB,OAHsB,IAAlBA,GACFD,EAAOI,KAAKN,EAAUR,OAAOW,IAExBhB,EAAUK,OAAO,EAAGL,EAAUS,OAASC,EAASD,QAAUM,EAAOM,KAAK,IAM/E,OAAuB,IADHtB,EAAOO,QAAQ,KAE7BT,IAEgB,MAAdE,EAAO,IAA4B,OAAdA,EAAO,IAAeA,EAAO,GAAGuB,MAAM,UACtD,WAAavB,EAAOZ,QAAQ,MAAO,KAEvCY,OANT,EC3GF,SAASwB,EAAaC,GACpB,GAAIA,EAAIC,OACN,OAAOD,EAAIC,SAEb,GAAsB,oBAAX3C,SAA2BA,OAAO4C,SAC3C,MAAM,IAAIjC,MAAM,iDAElB,IAAIkC,KAmBJ,OAlBAA,EAAS7C,OAAO4C,UAAY,WAC1B,IAAIE,EAAOC,OAAOD,KAAKJ,GACnBM,EAAW,EACf,OACEC,KAAM,WACJ,OAAID,EAAWF,EAAKnB,QAEhBuB,MAAOR,EAAII,EAAKE,MAChBG,MAAM,IAIND,WAAOpB,EACPqB,MAAM,MAKTN,EAST,SAASO,IACPC,KAAKC,SAAW,IAAIC,EAKtB,SAASC,EAAoBC,GAC3B,KAAMA,aAAkBC,GACtB,MAAM,IAAIC,UAAU,iEACtB,OAAOF,EA2CT,SAASG,EAAkBC,GACzB,QAAoB/B,IAAhB+B,EACF,MAAM,IAAI1C,WAAW,wBACvB,OAAO0C,EAqCT,SAASN,IACPF,KAAKS,OAwEP,SAASJ,EAAiBK,GACxBhB,OAAOiB,eAAeX,KAAMY,IAC1Bf,MAAOa,IAYPhB,OAAOD,KAAKiB,GAAYG,QAAQC,EAAiBd,MAWrD,SAASc,EAAiBC,GACxBrB,OAAOiB,eAAeX,KAAMe,GAC1BC,YAAY,EACZC,IAAK,WACH,OAAOjB,KAAKY,IAAaG,MC3N/B,SAASG,IACPnB,EAAOoB,KAAKnB,MAEZ,IAAIoB,EAAiBpB,KAAKC,SAASoB,OACnCrB,KAAKC,SAASoB,OAAS,SAAUN,GAC/B,IAAIO,EAAUF,EAAeD,KAAKnB,KAAMe,GAQxC,OALIQ,EAAQC,eAAeT,KAASQ,EAAQR,GAAKU,oBACxCF,EAAQR,GACfO,GAAU,GAGLA,GAGT,IAAIC,KAEJvB,KAAK0B,KAEHC,kBAAclD,EAEd8C,QAASA,GAIXvB,KAAK4B,OAAQ,EAkBf,SAASC,EAAkBC,EAAOf,EAAKgB,GACrC,OAAOD,EAAMP,QAAQR,IACnBA,IAAKA,EAGLgB,aAAcA,EAGd3B,YAAQ3B,EAKRuD,qBAAiBvD,EAEjBwD,eAAWxD,EACXyD,eAAWzD,EAGXgD,YAEEU,wBAAoB1D,EACpB2D,kBAAc3D,EACd4D,aAAS5D,EACT6D,kBAAkB,EAGlBC,eAAW9D,EAGX+D,aAAS/D,EAGTgE,4BAAwBhE,EAExBiE,8BAA0BjE,EAK1BkE,QAAQ,IA0Cd,SAASC,EAAoBC,EAAQ9B,EAAK+B,EAAW7C,EAAU6B,GAG7D,IAAI1B,EAASH,EAASc,GACtB,GAAIX,EACF,OAAO2C,QAAQC,QAAQ5C,GAEzB,IAAI6C,EAAOnB,EAAMP,QAAQR,GAGzB,OAAIkC,IAASA,EAAK7C,OACZ6C,EAAKhB,UACAc,QAAQG,OAAOD,EAAKhB,WACtBkB,EAAYN,EAAQI,EAAMA,EAAKxB,WAAYxB,EAAU6B,GAGvDe,EAAOG,QAAQjC,EAAK+B,GAC1BM,KAAK,SAAU5C,GAGd,GADAJ,EAASH,EAASO,GAEhB,OAAOJ,EAWT,IATA6C,EAAOnB,EAAMP,QAAQf,MAMRyC,EAAK7C,SAChB6C,EAAOpB,EAAiBC,EAAOtB,EAAayC,GAAQA,EAAKlB,eAEvDkB,EAAKhB,UACP,OAAOc,QAAQG,OAAOD,EAAKhB,WAE7B,IAAIoB,EAAOJ,EAAKxB,WAChB,OAAK4B,EAGEF,EAAYN,EAAQI,EAAMI,EAAMpD,EAAU6B,GAFxCmB,IAMb,SAASK,EAA2BT,EAAQI,EAAMnB,GAChD,OAAO,WACL,IAAIH,EAAeG,EAAMH,aAEzB,OAAKA,GAGLG,EAAMH,kBAAelD,EACrBwE,EAAKlB,aAAeJ,GAEb,KALIsB,EAAKlB,cASpB,SAASoB,EAAaN,EAAQI,EAAMI,EAAMpD,EAAU6B,GAClD,OAAOuB,EAAKlB,qBAAuBkB,EAAKlB,oBAEvCc,EAAKlB,aAAegB,QAAQC,UAAYD,QAAQC,UAAUI,KAAK,WAE9D,OADAtB,EAAMH,kBAAelD,EACdoE,EAAOU,IAAaN,EAAKlC,IAAK8B,EAAOU,IAAajF,OAAS,GAAKgF,EAA0BT,EAAQI,EAAMnB,OAEhHsB,KAAK,SAAUI,GAEd,QAAsB/E,IAAlB+E,EAA6B,CAC/B,KAAMA,aAAyBnD,GAC7B,MAAM,IAAIC,UAAU,qDAKtB,cAHOwB,EAAMP,QAAQ0B,EAAKlC,KACtB8B,EAAOjB,OACT6B,EAAUZ,EAAQI,EAAMI,GACnBpD,EAASgD,EAAKlC,KAAOyC,EAI9B,IAAIzB,EAAekB,EAAKlB,aAGxB,GADAkB,EAAKlB,kBAAetD,GACfsD,EACH,MAAM,IAAIzB,UAAU,sFA2BtB,OAzBA+C,EAAKjB,aAAeL,EAAa,GAEjCkB,EAAKjB,mBAELqB,EAAKd,aAGDR,EAAa,IACfsB,EAAKd,UAAUmB,QAAUL,EAAKd,UAAUoB,gBACxCN,EAAKf,iBAAmBP,EAAa,GACrCsB,EAAKhB,QAAUN,EAAa,IAK5B6B,EAAoBf,EAAQI,EAAMI,EAAMtB,EAAa,IAIlDsB,EAAKjB,aAAa9D,SACrB+E,EAAKV,QAAS,EACVE,EAAOjB,OACT6B,EAAUZ,EAAQI,EAAMI,IAGrBJ,IAERY,MAAM,SAAU3G,GAEf,MADA+F,EAAKxB,gBAAahD,EACZwE,EAAKhB,UAAYgB,EAAKhB,WAAa6B,EAAW5G,EAAK,iBAAmB+F,EAAKlC,QAKrF,SAASgD,EAAuBlB,EAAQ9B,EAAK+B,EAAW7C,EAAU6B,EAAOkC,GAwBvE,OAAOnB,EAAOG,QAAQjC,EAAK+B,GAC1BM,KAAK,SAAU5C,GACVwD,IACFA,EAAYjD,GAAOP,GAGrB,IAAIyC,EAAOnB,EAAMP,QAAQf,GACrBJ,EAASH,EAASO,GAGtB,GAAIJ,KAAY6C,GAAQA,EAAK7C,QAAUA,IAAW6C,EAAK7C,QACrD,OAAOA,EAET,GAAI6C,GAAQA,EAAKhB,UACf,MAAMgB,EAAKhB,YAMRgB,IAAS7C,GAAU6C,EAAK7C,UAC3B6C,EAAOpB,EAAiBC,EAAOtB,EAAayC,GAAQA,EAAKlB,eAE3D,IAAIsB,EAAOJ,EAAKxB,WAChB,OAAK4B,EAGEF,EAAYN,EAAQI,EAAMI,EAAMpD,EAAU6B,GAFxCmB,IAMb,SAASQ,EAAWZ,EAAQI,EAAMI,GAChCR,EAAOoB,MAAQpB,EAAOoB,UACtBpB,EAAOoB,MAAMhB,EAAKlC,MAChBA,IAAKkC,EAAKlC,IACVmD,KAAMb,EAAKjB,aACX+B,eACAC,OAAQf,EAAKe,YAWjB,SAASR,EAAqBf,EAAQI,EAAMI,EAAMgB,GAChD,IAAI9B,EAAYc,EAAKd,UACjBP,EAAkBiB,EAAKjB,gBAEvBsC,GAAiB,EAGjBC,EAAWF,EAAQlD,KAAKqD,GAAQ,SAAU/H,EAAMoD,GAClD,GAAoB,iBAATpD,EAAmB,CAC5B,IAAIgI,GAAU,EACd,IAAK,IAAIC,KAAKjI,EACZoD,EAAQpD,EAAKiI,GACH,iBAANA,GAA2BA,KAAKnC,GAAcA,EAAUmC,KAAO7E,IACjE4E,GAAU,EACVlC,EAAUmC,GAAK7E,GAGnB,IAAgB,IAAZ4E,EACF,OAAO5E,MAEN,CACH,IAAKyE,GAAkB7H,KAAQ8F,IAAcA,EAAU9F,KAAUoD,EAC/D,OAAOA,EACT0C,EAAU9F,GAAQoD,EAGpB,IAAK,IAAIf,EAAI,EAAGA,EAAIkD,EAAgB1D,OAAQQ,IAC1CkD,EAAgBlD,GAAGyD,GAErB,OAAO1C,GACN,IAAI8E,EAAiB9B,EAAQI,EAAKlC,MAErCsC,EAAKb,QAAU+B,EAAS/B,QACxBa,EAAKhB,QAAUkC,EAASlC,QACpBkC,EAASK,UACXvB,EAAKd,UAAYA,EAAYgC,EAASK,QACtCN,GAAiB,GAIrB,SAASO,EAAiBhC,EAAQI,EAAMI,EAAMpD,EAAU6B,EAAOgD,GAC7D,OAAQzB,EAAKZ,yBAA2BY,EAAKZ,uBAAyBM,QAAQC,UAC7EI,KAAK,WAGJ,IAAK,IAFD2B,EAA0BC,MAAM3B,EAAKjB,aAAa9D,QAE7CQ,EAAI,EAAGA,EAAIuE,EAAKjB,aAAa9D,OAAQQ,IAC5CiG,EAAwBjG,GAAKiF,EAAsBlB,EAAQQ,EAAKjB,aAAatD,GAAImE,EAAKlC,IAAKd,EAAU6B,EAAOe,EAAOjB,OAASyB,EAAKe,SAAWf,EAAKe,YAEnJ,OAAOrB,QAAQkC,IAAIF,KAEpB3B,KAAK,SAAUV,GAId,GAHAW,EAAKX,yBAA2BA,EAG5BW,EAAKb,QACP,IAAK,IAAI1D,EAAI,EAAGA,EAAI4D,EAAyBpE,OAAQQ,IAAK,CACxD,IAAIoG,EAAS7B,EAAKb,QAAQ1D,GAC1B,GAAIoG,EAAQ,CACV,IAAI1B,EAAgBd,EAAyB5D,GAE7C,GAAI0E,aAAyBnD,EAC3B6E,EAAO1B,OAEJ,CACH,GAAIA,EAAcvB,UAChB,MAAMuB,EAAcvB,UACtBiD,EAAO1B,EAAcpD,QAAUoD,EAAc/B,WAAWc,WAEpDiB,EAAcxB,iBAChBwB,EAAcxB,gBAAgBhD,KAAKkG,UAM9C9B,KAAK,WAIJ,IAAK,IAFD+B,KAEKrG,EAAI,EAAGA,EAAIuE,EAAKjB,aAAa9D,OAAQQ,IAAK,CACjD,IAAIsG,EAAU/B,EAAKX,yBAAyB5D,GACxCuG,EAAUD,EAAQ3D,WAEjB4D,IAAWA,EAAQ1C,UAGO,IAA3BmC,EAAK3G,QAAQiH,IAIjBN,EAAK9F,KAAKoG,GAEVD,EAA4BnG,KAAK6F,EAAgBhC,EAAQuC,EAASA,EAAQ3D,WAAYxB,EAAU6B,EAAOgD,KALrGK,EAA4BnG,KAAKqG,EAAQ5C,yBAQ7C,OAAOM,QAAQkC,IAAIE,KAEpB/B,KAAK,WAOJ,OAJAC,EAAKV,QAAS,EACVE,EAAOjB,OACT6B,EAAUZ,EAAQI,EAAMI,GAEnBJ,IAERY,MAAM,SAAU3G,GAGf,MADAmG,EAAKZ,4BAAyBhE,EACxBqF,EAAW5G,EAAK,WAAa+F,EAAKlC,OA0C5C,SAAS4D,EAAkB9B,EAAQ9B,GACjCf,KAAK6C,OAASA,EACd7C,KAAKe,IAAMf,KAAKsF,GAAKvE,EACrBf,KAAKuF,MACHC,IAAKzE,GAiBT,SAAS0E,EAAgB5C,EAAQI,EAAMI,EAAMpD,EAAU6B,EAAOgD,GAC5D,GAAI7B,EAAK7C,OACP,OAAO6C,EAAK7C,OAEd,GAAI6C,EAAKf,UACP,MAAMe,EAAKf,UAEb,GAAI4C,IAAgC,IAAxBA,EAAK3G,QAAQ8E,GACvB,OAAOA,EAAKxB,WAAWc,UAIzB,IAAIrF,EAAMwI,EAAW7C,EAAQI,EAAMI,EAAMpD,EAAU6B,EAAOuB,EAAKb,WAAesC,OAC9E,GAAI5H,EACF,MAAMA,EAER,OAAO+F,EAAK7C,OAGd,SAASuF,EAAoB9C,EAAQ9B,EAAKqB,EAAcM,EAA0BzC,EAAU6B,EAAOgD,GAEjG,OAAO,SAAUrI,GACf,IAAK,IAAIqC,EAAI,EAAGA,EAAIsD,EAAa9D,OAAQQ,IACvC,GAAIsD,EAAatD,KAAOrC,EAAM,CAC5B,IACI2D,EADAgF,EAAU1C,EAAyB5D,GAQvC,OAJEsB,EADEgF,aAAmB/E,EACZ+E,EAEAK,EAAe5C,EAAQuC,EAASA,EAAQ3D,WAAYxB,EAAU6B,EAAOgD,IAElEnB,cAAgBvD,EAGlC,MAAM,IAAI9C,MAAM,UAAYb,EAAO,2DAA6DsE,IAMpG,SAAS2E,EAAY7C,EAAQI,EAAMI,EAAMpD,EAAU6B,EAAOgD,GACxDA,EAAK9F,KAAKiE,GAEV,IAAI/F,EAIJ,GAAImG,EAAKb,QAEP,IAAK,IADD4C,EAASC,EACJvG,EAAI,EAAGA,EAAIuE,EAAKjB,aAAa9D,OAAQQ,IAG5C,MAFAsG,EAAU/B,EAAKX,yBAAyB5D,cAEjBuB,MAIvBgF,EAAUD,EAAQ3D,cACwB,IAA3BqD,EAAK3G,QAAQiH,KAExBlI,EADEkI,EAAQlD,UACJkD,EAAQlD,UAIRwD,EAAW7C,EAAQuC,EAASC,EAASpF,EAAU6B,EAAOuD,EAAQ7C,QAAUsC,OAG9E5H,GAGF,OAFA+F,EAAKxB,gBAAahD,EAClBwE,EAAKf,UAAY4B,EAAW5G,EAAK,cAAgB+F,EAAKlC,KAC/CkC,EAAKf,UAMlB,GAAImB,EAAKhB,QAGP,GAAIgB,EAAKb,QACPtF,EAAM0I,EAAmBvC,EAAKhB,aAI3B,CACH,IAAIjC,GAAWkF,GAAIrC,EAAKlC,KACpBwB,EAAYc,EAAKd,UACrB7C,OAAOiB,eAAeP,EAAQ,WAC5ByF,cAAc,EACdC,IAAK,SAAUlB,GACbrC,EAAUmB,QAAUnB,EAAUoB,aAAeiB,GAE/C3D,IAAK,WACH,OAAOsB,EAAUoB,gBAIrB,IAAIoC,EAAUJ,EAAmB9C,EAAQI,EAAKlC,IAAKsC,EAAKjB,aAAciB,EAAKX,yBAA0BzC,EAAU6B,EAAOgD,GAGtH,IAAKzB,EAAKf,iBACR,IAASxD,EAAI,EAAGA,EAAIuE,EAAKjB,aAAa9D,OAAQQ,IAC5CiH,EAAQ1C,EAAKjB,aAAatD,IAE9B5B,EAAM8I,EAAe3C,EAAKhB,QAAS0D,EAASxD,EAAUmB,QAAStD,GAG3DA,EAAOwE,UAAYrC,EAAUmB,UAC/BnB,EAAUmB,QAAUnB,EAAUoB,aAAevD,EAAOwE,SAEtD,IAAIqB,EAAgB1D,EAAUmB,QAG9B,GAAIuC,GAAiBA,EAAcC,WACjC,IAAK,IAAIxB,KAAKuB,EACRvG,OAAO8B,eAAeL,KAAK8E,EAAevB,KAC5CnC,EAAUmC,GAAKuB,EAAcvB,IASvC,GAFAzB,EAAKxB,gBAAahD,EAEdvB,EACF,OAAO+F,EAAKf,UAAY4B,EAAW5G,EAAK,cAAgB+F,EAAKlC,KAO/D,GALAd,EAASgD,EAAKlC,KAAOkC,EAAK7C,OAAS,IAAIC,EAAgBgD,EAAKd,YAKvDc,EAAKb,QAAS,CACjB,GAAIS,EAAKjB,gBACP,IAASlD,EAAI,EAAGA,EAAImE,EAAKjB,gBAAgB1D,OAAQQ,IAC/CmE,EAAKjB,gBAAgBlD,GAAGmE,EAAK7C,QACjC6C,EAAKjB,qBAAkBvD,GAS3B,SAASmH,EAAoBvD,GAC3B,IACEA,EAAQlB,KAAKgF,IAEf,MAAOC,GACL,OAAOA,GAIX,SAASJ,EAAgB3D,EAAS0D,EAASnB,EAASxE,GAClD,IACE,IAAIxB,EAASyD,EAAQlB,KAAKqD,GAAQuB,EAASnB,EAASxE,QACrC3B,IAAXG,IACFwB,EAAOwE,QAAUhG,GAErB,MAAOwH,GACL,OAAOA,GCppBX,SAAgBC,KAIhB,SAAgBC,EAA0BC,GACxC,OAAIA,aAAoBlG,EACfkG,EAGA,IAAIlG,EADTkG,GAAYA,EAASL,WACIK,GAEA7C,QAAS6C,EAAU5C,aAAc4C,IAIhE,SAAgBC,EAAUC,GAGxB,YAFqBhI,IAAjBiI,KACFA,GAAiC,oBAAX/J,UAA4BA,OAAOgK,aACpDF,aAAapG,GAAmBqG,IAAqD,mBAArChH,OAAOkH,UAAUC,SAAS1F,KAAKsF,GAUxF,SAAgBK,EAAMC,EAAKC,IACrBA,GAAShH,KAAKiH,UAA+B,oBAAZC,SAA2BA,QAAQJ,OACtEI,QAAQJ,KAAKC,GAGjB,SAAgBI,EAAsBtE,EAAQuE,EAAYC,GACxD,IAAIC,EAAQ,IAAIC,WAAWH,GAI3B,OAAiB,IAAbE,EAAM,IAAyB,KAAbA,EAAM,IAA0B,MAAbA,EAAM,GACtCE,YAAYC,QAAQL,GAAYhE,KAAK,SAAUqD,GACpD,IAAIvC,KACA1B,KACAkF,KAsBJ,OAnBIF,YAAYG,OAAOC,SACrBJ,YAAYG,OAAOC,QAAQnB,GAAG5F,QAAQ,SAAU/B,GAC9C,IAAIiC,EAAMjC,EAAEsB,OACZoC,EAAQxD,KAAK,SAAUyH,GACrBiB,EAAU3G,GAAO0F,KAEQ,IAAvBvC,EAAK/F,QAAQ4C,IACfmD,EAAKlF,KAAK+B,KAEhB8B,EAAOgF,SAAS3D,EAAM,SAAU4D,GAC9B,OACEtF,QAASA,EACTH,QAAS,WACPyF,EAAQ,IAAIN,YAAYO,SAAStB,EAAGiB,GAAW9C,aAIrDyC,KAEO,IAIJtE,QAAQC,SAAQ,GAIzB,SAAgBgF,EAAgBjH,EAAKkH,GACnC,GAAe,MAAXlH,EAAI,GACN,MAAM,IAAIzD,MAAM,eAAiByD,EAAM,oDAEzC,IAAKmH,GAAqB,CACxB,IAAIP,EAAS3H,KAAKmI,aAAa,UAC3BC,EAAOC,UAAUJ,EAAQ/J,OAAOjB,GAAY,EAAI,KACpDiL,GAAsB,IAAIP,EAAOS,IACbE,MAAQX,EAAOY,iBAAiBH,GAEtD,OAAOF,GAAoBnC,QAAQhF,GAGrC,SAAgByH,EAAQC,EAAGC,GACzB,IAAK,IAAIhE,KAAKgE,EACPhJ,OAAO8B,eAAeL,KAAKuH,EAAGhE,KAEnC+D,EAAE/D,GAAKgE,EAAEhE,IAEX,OAAO+D,EAGT,SAAgBE,EAASF,EAAGC,GAC1B,IAAK,IAAIhE,KAAKgE,EACPhJ,OAAO8B,eAAeL,KAAKuH,EAAGhE,SAEtBjG,IAATgK,EAAE/D,KACJ+D,EAAE/D,GAAKgE,EAAEhE,IAEb,OAAO+D,EAOT,SAAgBG,EAAYH,EAAGC,EAAGG,GAChC,IAAK,IAAInE,KAAKgE,EACZ,GAAKhJ,OAAO8B,eAAeL,KAAKuH,EAAGhE,GAAnC,CAEA,IAAIoE,EAAMJ,EAAEhE,QACCjG,IAATgK,EAAE/D,GACJ+D,EAAE/D,GAAKoE,EACAA,aAAe9D,OAASyD,EAAE/D,aAAcM,MAC/CyD,EAAE/D,MAAQqE,OAAOF,EAAWC,EAAML,EAAE/D,IAAIqE,OAAOF,EAAWJ,EAAE/D,GAAKoE,GAC5C,iBAAPA,GAA2B,OAARA,GAA+B,iBAARL,EAAE/D,GAC1D+D,EAAE/D,IAAMmE,EAAWF,EAAUH,GAAQA,KAAWC,EAAE/D,IAAKoE,GAC/CD,IACRJ,EAAE/D,GAAKoE,IAiBb,SAAgBE,EAAexD,GAE7B,GAAKyD,IAAoBC,GAAzB,CAMA,IAAI7F,EAAO8F,SAASC,cAAc,QAC9BH,IACF5F,EAAKgG,IAAM,UACXhG,EAAKiG,GAAK,UAIVjG,EAAKgG,IAAM,WAEbhG,EAAKkG,KAAO/D,EACZ2D,SAASK,KAAKC,YAAYpG,GAC1B8F,SAASK,KAAKE,YAAYrG,QAhBL,IAAIsG,OACVC,IAAMpE,EAkBvB,SAASqE,EAAcD,EAAK5G,EAASE,GACnC,IACE4G,cAAcF,GAEhB,MAAOxD,GACLlD,EAAOkD,GAETpD,IAkBF,SAAgB+G,EAAYH,EAAKI,EAAaC,EAAWjH,EAASE,GAwBhE,SAASD,IACPD,IACAkH,IAIF,SAASC,EAAOjN,GACdgN,IACAhH,EAAO,IAAI5F,MAAM,YAAcsM,IAGjC,SAASM,IACP,IAAK,IAAIpL,EAAI,EAAGA,EAAIsL,GAAe9L,OAAQQ,IACzC,GAAIsL,GAAetL,GAAG5B,MAAQiN,EAAO,CACnCC,GAAeC,OAAOvL,EAAG,GACzB,MAGJwL,EAAOC,oBAAoB,OAAQtH,GAAM,GACzCqH,EAAOC,oBAAoB,QAASJ,GAAO,GAC3ChB,SAASK,KAAKE,YAAYY,GAvC5B,GAHAV,EAAMA,EAAI5M,QAAQ,KAAM,OAGpBwN,GACF,OAAOX,EAAaD,EAAK5G,EAASE,GAEpC,IAAIoH,EAASnB,SAASC,cAAc,UACpCkB,EAAOG,KAAO,kBACdH,EAAOI,QAAU,QACjBJ,EAAOK,OAAQ,EAEXX,IACFM,EAAON,YAAcA,GACnBC,IACFK,EAAOL,UAAYA,GAErBK,EAAOM,iBAAiB,OAAQ3H,GAAM,GACtCqH,EAAOM,iBAAiB,QAAST,GAAO,GAExCG,EAAOV,IAAMA,EACbT,SAASK,KAAKC,YAAYa,GA0B5B,SAAgBO,EAAsBnG,EAAG7E,GAEvC,IADA,IAAIiL,EAASpG,EAAEqG,MAAM,KACdD,EAAOxM,QACZuB,EAAQA,EAAMiL,EAAOE,SACvB,OAAOnL,EAIT,SAAgBoL,EAAYhD,EAASK,EAAOvH,GAC1C,IAAImK,EAAWC,EAAY7C,EAAOvH,GAClC,GAAImK,EAAU,CACZ,IAAIE,EAAS9C,EAAM4C,GAAYnK,EAAI7C,OAAOgN,EAAS5M,QAE/C+M,EAAWtN,EAAkBqN,EAAQE,IACzC,YAAiB7M,IAAb4M,EACKA,EAEFpD,EAAUmD,EAEd,OAA0B,IAAtBrK,EAAI5C,QAAQ,KACZ4C,EAGAkH,EAAUlH,EAIrB,SAASwK,EAAU7G,GACjB,IAAIjI,EAAOuD,KAAKvD,KAEhB,GAAIA,EAAKyB,OAAO,EAAGwG,EAAEpG,UAAYoG,IAAMjI,EAAK6B,SAAWoG,EAAEpG,QAA6B,MAAnB7B,EAAKiI,EAAEpG,SAAuC,MAApBoG,EAAEA,EAAEpG,OAAS,IAAkC,MAApBoG,EAAEA,EAAEpG,OAAS,IAAa,CAChJ,IAAIkN,EAAS9G,EAAEqG,MAAM,KAAKzM,OACtBkN,EAASxL,KAAKyL,MAChBzL,KAAKb,MAAQuF,EACb1E,KAAKyL,IAAMD,IAKjB,SAAgBL,EAAaO,EAAKjP,GAChC,GAAIiD,OAAO8B,eAAeL,KAAKuK,EAAKjP,GAClC,OAAOA,EAET,IAAIkP,GACFlP,KAAMA,EACN0C,WAAOV,EACPgN,IAAK,GAKP,OAFA/L,OAAOD,KAAKiM,GAAK7K,QAAQ0K,EAAUI,GAE5BA,EAAUxM,MC9RnB,SAASyM,EAAYpG,EAAKqG,EAAe5B,EAAW6B,GAElD,GAAyB,aAArBtG,EAAItH,OAAO,EAAG,GAAmB,CACnC,GAAI6N,GACF,OAAOC,EAASxG,EAAKqG,EAAe5B,EAAW6B,GAE/C,MAAM,IAAIxO,MAAM,kDAIpBkI,EAAMA,EAAIxI,QAAQ,KAAM,OAExB,IAAIiP,GAEFC,SAAWC,OAAQ,iCAYrB,OATIlC,IACFgC,EAAKhC,UAAYA,GAEf4B,IAC0B,iBAAjBA,IACTI,EAAKC,QAAuB,cAAIL,GAClCI,EAAKG,YAAc,WAGdC,MAAM7G,EAAKyG,GACjB7I,KAAK,SAASkJ,GACb,GAAIA,EAAIC,GACN,OAAOT,EAAWQ,EAAIE,cAAgBF,EAAIG,OAE1C,MAAM,IAAInP,MAAM,gBAAkBgP,EAAII,OAAS,IAAMJ,EAAIK,cAI/D,SAASX,EAAUxG,EAAKqG,EAAe5B,EAAW6B,GAChD,OAAO,IAAI/I,QAAQ,SAAUC,EAASE,GAOpC,SAASD,IACPD,EAAQ8I,EAAWc,EAAIC,SAAWD,EAAIE,cAExC,SAAS3C,IACPjH,EAAO,IAAI5F,MAAM,eAAiBsP,EAAIF,OAAS,KAAOE,EAAIF,QAAUE,EAAID,WAAa,IAAMC,EAAID,WAAc,IAAM,IAAM,IAAM,YAAcnH,IAT/IA,EAAMA,EAAIxI,QAAQ,KAAM,OAExB,IAAI4P,EAAM,IAAIG,eACVjB,IACFc,EAAII,aAAe,eAQrBJ,EAAIK,mBAAqB,WACA,IAAnBL,EAAIM,aAEY,GAAdN,EAAIF,OACFE,EAAIC,SACN5J,KAKA2J,EAAIhC,iBAAiB,QAAST,GAC9ByC,EAAIhC,iBAAiB,OAAQ3H,IAGT,MAAf2J,EAAIF,OACXzJ,IAGAkH,MAINyC,EAAIO,KAAK,MAAO3H,GAAK,GAEjBoH,EAAIQ,mBACNR,EAAIQ,iBAAiB,SAAU,gCAE3BvB,IAC0B,iBAAjBA,GACTe,EAAIQ,iBAAiB,gBAAiBvB,GACxCe,EAAIS,iBAAkB,IAI1BT,EAAIU,KAAK,QAKb,SAASC,EAAW/H,EAAKqG,EAAe5B,EAAW6B,GACjD,MAAwB,YAApBtG,EAAItH,OAAO,EAAG,GACT6E,QAAQG,OAAO,IAAI5F,MAAM,oBAAsBkI,EAAM,uEAE9DgI,GAAKA,IAAMzH,QAAQ,MAEjBP,EADEvI,GACIuI,EAAIxI,QAAQ,MAAO,MAAMkB,OAAO,GAEhCsH,EAAItH,OAAO,GAEZ,IAAI6E,QAAQ,SAAUC,EAASE,GACpCsK,GAAGC,SAASjI,EAAK,SAAStI,EAAKwQ,GAC7B,GAAIxQ,EACF,OAAOgG,EAAOhG,GAGd,GAAI4O,EACF9I,EAAQ0K,OAEL,CAEH,IAAIC,EAAaD,EAAO,GACF,WAAlBC,EAAW,KACbA,EAAaA,EAAWzP,OAAO,IAEjC8E,EAAQ2K,SAOlB,SAASC,IACP,MAAM,IAAItQ,MAAM,oDCzHX,SAASuQ,IACd,OACEC,eAAWrP,EACXsP,oBAAgBtP,EAChBuP,kBAAcvP,EACdwP,gBAAYxP,EACZyP,mBAAezP,EACfwE,UAAMxE,GAIV,SAqBS0P,EAAmBtL,EAAQuL,EAAQtL,GAC1C,IAAIuL,EAAiBR,IAErB,GAAI/K,EAAW,CAIb,IAAIwL,EACAF,EAAOG,aACiD,KAArDD,EAAoBxL,EAAUnE,YAAY,QAC7C0P,EAAeN,eAAiBM,EAAeP,UAAYhL,EAAU5E,OAAO,EAAGoQ,KAG3B,KAAjDA,EAAoBxL,EAAU3E,QAAQ,QACzCkQ,EAAeN,eAAiBM,EAAeP,UAAYhL,EAAU5E,OAAOoQ,EAAoB,IAIpGD,EAAeJ,WAAa9C,EAAYiD,EAAOI,SAAU1L,GACrDuL,EAAeJ,aACjBI,EAAeH,cAAgBE,EAAOI,SAASH,EAAeJ,aAGlE,OAAOI,EAGT,SAAgBI,EAAW1N,EAAK+B,GAC9B,IAAIsL,EAASpO,KAAK0O,IAEdC,EAAWd,IACXQ,EAAiBF,EAAkBnO,KAAMoO,EAAQtL,GAEjDD,EAAS7C,KAEb,OAAO+C,QAAQC,UAGdI,KAAK,WAEJ,IAAIwL,EAAe7N,EAAIpC,YAAY,MAEnC,IAAsB,IAAlBiQ,EACF,OAAO7L,QAAQC,QAAQjC,GAEzB,IAAI8N,EAAeC,GAAe3N,KAAK0B,EAAQ9B,EAAI7C,OAAO0Q,EAAe,IAUzE,OAAOG,GAAiB5N,KAAK0B,EAAQgM,EAAc/L,GAAW,GAC7DM,KAAK,SAAU4L,GACd,OAAOA,EAAiBjO,EAAI7C,OAAO,EAAG0Q,GAAgB,aAKzDxL,KAAK,SAAUrC,GACd,IAAIkO,EAASC,GAAYd,EAAOG,YAAaxN,GAE7C,OAAKkO,GAGLN,EAASb,UAAYmB,EAAOE,OAErBpM,QAAQkC,KACbmK,EAAejO,KAAK0B,EAAQuL,EAAQa,EAAOI,SAAUhB,GAAkBA,EAAeN,gBAAkBjL,EAAW6L,EAAUN,GAAgB,GAC7IxL,EAAOG,QAAQiM,EAAOE,OAAQrM,KAE/BM,KAAK,SAAUkM,GAKd,GAJAX,EAASZ,eAAiBuB,EAAW,GACrCX,EAASb,UAAYwB,EAAW,GAG5BX,EAASZ,iBAAmBY,EAASb,UACvC,MAAM,IAAIxQ,MAAM,UAAYqR,EAASZ,eAAiB,uHAExD,OAAOwB,GAAmBnB,EAAOG,YAAae,EAAW,GAAIA,EAAW,OAhBjEF,EAAejO,KAAK0B,EAAQuL,EAAQrN,EAAKsN,GAAkBA,EAAeN,gBAAkBjL,EAAW6L,EAAUN,GAAgB,KAmB3IjL,KAAK,SAAUkM,GACd,OAAOE,GAAuBrO,KAAK0B,EAAQyM,EAAYxM,EAAWuL,KAEnEjL,KAAK,SAAUkM,GAGd,OAFAG,GAAQtO,KAAK0B,EAAQuL,EAAQkB,EAAYX,GAErCA,EAASb,YAAca,EAAS1L,KAAKJ,OAChCyM,EAIFzM,EAAOG,QAAQ2L,EAAS1L,KAAKJ,OAAQyM,GAC3ClM,KAAK,SAAU0K,GAGd,OAFAa,EAASb,UAAYA,EACrBa,EAASZ,eAAiBuB,EACnBA,MAGVlM,KAAK,SAAUkM,GAEd,OADAzM,EAAO6M,IAAUJ,GAAcX,EACxBW,IAMX,SAAgBK,EAAgBvB,EAAQrN,GACtC,IAAIkO,EAASC,GAAYd,EAAOG,YAAaxN,GAG7C,GAAIkO,EAAQ,CACV,IAAInB,EAAY6B,EAAexO,KAAKnB,KAAMoO,EAAQa,EAAOE,QACzD,OAAOI,GAAmBnB,EAAOG,YAAaqB,EAAYzO,KAAKnB,KAAMoO,EAAQa,EAAOI,cAAU5Q,GAAW,GAAO,GAAQqP,GAG1H,OAAO8B,EAAYzO,KAAKnB,KAAMoO,EAAQrN,OAAKtC,GAAW,GAAO,GAG/D,SAAgBoR,EAAe9O,EAAK+B,GAClC,IAAIsL,EAASpO,KAAK0O,IAGdC,EAAWd,IACXQ,EAAiBA,GAAkBF,EAAkBnO,KAAMoO,EAAQtL,GAEnEmM,EAASC,GAAYd,EAAOG,YAAaxN,GAG7C,OAAIkO,GACFN,EAASb,UAAY+B,EAAc1O,KAAKnB,KAAMiP,EAAOE,OAAQrM,GACtDyM,GAAmBnB,EAAOG,YAC7BuB,EAAmB3O,KAAKnB,KAAMoO,EAAQa,EAAOI,SAAUhB,EAAeN,gBAAkBjL,EAAW6L,EAAUN,IAAkBM,EAASb,WACxIa,EAASb,YAGRgC,EAAmB3O,KAAKnB,KAAMoO,EAAQrN,EAAKsN,EAAeN,gBAAkBjL,EAAW6L,EAAUN,IAAkBM,EAASb,WAGrI,SAAgB8B,EAAaxB,EAAQrN,EAAK+B,EAAWiN,EAAOC,GAC1D,IAAIC,EAAmBlS,EAAkBgD,EAAK+B,GAAawI,IAG3D,GAAI2E,EACF,OAAOhF,EAAWmD,EAAOnG,QAASmG,EAAO9F,MAAO2H,GAGlD,GAAIF,EAAO,CACT,IAAI7E,EAAWC,EAAYiD,EAAO1C,IAAK3K,GAEvC,GAAImK,IACFnK,EAAMqN,EAAO1C,IAAIR,GAAYnK,EAAI7C,OAAOgN,EAAS5M,QAEjD2R,EAAmBlS,EAAkBgD,EAAKuK,KAExC,OAAOL,EAAWmD,EAAOnG,QAASmG,EAAO9F,MAAO2H,GAItD,GAAIjQ,KAAKC,SAASiQ,IAAInP,GACpB,OAAOA,EAET,GAAyB,WAArBA,EAAI7C,OAAO,EAAG,GAChB,OAAO6C,EAET,IAAIoP,EAAgBH,GAAuC,MAAxBjP,EAAIA,EAAIzC,OAAS,GAChD+M,EAAWJ,EAAWmD,EAAOnG,QAASmG,EAAO9F,MAAO6H,EAAgBpP,EAAM,IAAMA,GACpF,OAAIoP,EACK9E,EAASnN,OAAO,EAAGmN,EAAS/M,OAAS,GACvC+M,EAGT,SAASyE,EAAoB1B,EAAQrN,EAAK+B,EAAW6L,EAAUN,EAAgB+B,GAE7E,GAAI/B,GAAkBA,EAAeH,eAA4B,MAAXnN,EAAI,GAAY,CACpE,IAAIsP,EAAYhC,EAAeH,cAAcxC,IACzC4E,EAAiBD,GAAalF,EAAYkF,EAAWtP,GAEzD,GAAIuP,GAAuD,iBAA9BD,EAAUC,GAA8B,CACnE,IAAIC,EAASC,GAAUxQ,KAAMoO,EAAQC,EAAeH,cAAeG,EAAeJ,WAAYqC,EAAgBvP,EAAK4N,EAAUyB,GAC7H,GAAIG,EACF,OAAOA,GAIb,IAAIjB,EAAaM,EAAYzO,KAAKnB,KAAMoO,EAAQrN,EAAK+B,GAAW,GAAM,GAElE2N,EAAiBC,GAAsBtC,EAAQkB,GAGnD,GAFAX,EAASV,WAAawC,GAAkBA,EAAexC,YAAc9C,EAAYiD,EAAOI,SAAUc,IAE7FX,EAASV,WACZ,OAAOqB,EAET,IAAsD,IAAlDlB,EAAOuC,kBAAkBxS,QAAQmR,GAEnC,OADAX,EAASV,gBAAaxP,EACf6Q,EAGTX,EAAST,cAAgBE,EAAOI,SAASG,EAASV,cAAgBG,EAAOI,SAASG,EAASV,YAAc2C,MAEzG,IAAIC,EAAUvB,EAAWpR,OAAOyQ,EAASV,WAAW3P,OAAS,GAE7D,OAAOwS,GAAuB9Q,KAAMoO,EAAQO,EAAST,cAAeS,EAASV,WAAY4C,EAASlC,EAAUyB,GAG9G,SAAShB,EAAgBhB,EAAQrN,EAAK+B,EAAW6L,EAAUN,EAAgB+B,GACzE,IAAIvN,EAAS7C,KAEb,OAAO+Q,GACN3N,KAAK,WAEJ,GAAIiL,GAAkBA,EAAeH,eAAsC,OAArBnN,EAAI7C,OAAO,EAAG,GAAa,CAC/E,IAAImS,EAAYhC,EAAeH,cAAcxC,IACzC4E,EAAiBD,GAAalF,EAAYkF,EAAWtP,GAEzD,GAAIuP,EACF,OAAOP,GAAMlN,EAAQuL,EAAQC,EAAeH,cAAeG,EAAeJ,WAAYqC,EAAgBvP,EAAK4N,EAAUyB,GAGzH,OAAOW,KAER3N,KAAK,SAAUmN,GACd,GAAIA,EACF,OAAOA,EAGT,IAAIjB,EAAaM,EAAYzO,KAAK0B,EAAQuL,EAAQrN,EAAK+B,GAAW,GAAM,GAEpE2N,EAAiBC,GAAsBtC,EAAQkB,GAGnD,OAFAX,EAASV,WAAawC,GAAkBA,EAAexC,YAAc9C,EAAYiD,EAAOI,SAAUc,GAE7FX,EAASV,YAGwC,IAAlDG,EAAOuC,kBAAkBxS,QAAQmR,IACnCX,EAASV,gBAAaxP,EACtBkQ,EAAS1L,KAAO+N,KAChBrC,EAAS1L,KAAKgO,OAAS,OAEvBtC,EAAS1L,KAAKJ,OAAS,GAChBE,QAAQC,QAAQsM,KAGzBX,EAAST,cAAgBE,EAAOI,SAASG,EAASV,cAAgBG,EAAOI,SAASG,EAASV,YAAc2C,OAGxFH,IAAmB9B,EAAST,cAAcgD,WAEtCC,GAAsBtO,EAAQuL,EAAQqC,EAAeW,WAAYzC,GAAYoC,IACjG3N,KAAK,WACJ,IAAIyN,EAAUvB,EAAWpR,OAAOyQ,EAASV,WAAW3P,OAAS,GAE7D,OAAO+S,GAAmBxO,EAAQuL,EAAQO,EAAST,cAAeS,EAASV,WAAY4C,EAASlC,EAAUyB,MApBnGrN,QAAQC,QAAQsM,KAyB7B,SAAS0B,KACP,OACEM,UAAW,GACXpN,UAAMzF,EACNwS,YAAQxS,EACRoE,YAAQpE,EACRsL,gBAAYtL,EACZ8S,aAAS9S,EACT+S,WAAO/S,EACPwL,eAAWxL,EACXgT,eAAWhT,EACXmG,aAASnG,EACTiT,mBAAmB,EACnB1H,iBAAavL,EACbkT,qBAAqB,EACrBC,qBAAqB,EACrBC,UAAU,GAId,SAASpC,GAASrB,EAAQrN,EAAK4N,GAC7BA,EAAS1L,KAAO0L,EAAS1L,MAAQ+N,KAGjC,IACIc,EADAC,EAAY,EAEhB,IAAK,IAAI3R,KAAUgO,EAAO7I,KAExB,IAAuB,KADvBuM,EAAgB1R,EAAOjC,QAAQ,OAG3BiC,EAAOlC,OAAO,EAAG4T,KAAmB/Q,EAAI7C,OAAO,EAAG4T,IAC/C1R,EAAOlC,OAAO4T,EAAgB,KAAO/Q,EAAI7C,OAAO6C,EAAIzC,OAAS8B,EAAO9B,OAASwT,EAAgB,GAAI,CACtG,IAAIE,EAAQ5R,EAAO2K,MAAM,KAAKzM,OAC1B0T,EAAQD,IACVA,EAAYC,GACdpJ,EAAW+F,EAAS1L,KAAMmL,EAAO7I,KAAKnF,GAAS2R,IAAcC,GASjE,GAJI5D,EAAO7I,KAAKxE,IACd6H,EAAW+F,EAAS1L,KAAMmL,EAAO7I,KAAKxE,IAAM,GAG1C4N,EAASV,WAAY,CACvB,IAAI4C,EAAU9P,EAAI7C,OAAOyQ,EAASV,WAAW3P,OAAS,GAElDiH,KACJ,GAAIoJ,EAAST,cAAc3I,KAAM,CAC3BwM,EAAY,EAChBE,GAAetD,EAAST,cAAc3I,KAAMsL,EAAS,SAAUqB,EAAaC,EAAWC,GACjFA,EAAaL,IACfA,EAAYK,GACdxJ,EAAWrD,EAAM4M,EAAWC,GAAcL,EAAYK,KAGxDxJ,EAAW+F,EAAS1L,KAAMsC,GAAM,IAI9BoJ,EAAST,cAAc+C,QAAWtC,EAASb,WAAca,EAAS1L,KAAKJ,SACzE8L,EAAS1L,KAAKgO,OAAStC,EAAS1L,KAAKgO,QAAUtC,EAAST,cAAc+C,SAI5E,SAAS/B,GAAaX,EAAaxN,GACjC,IAAIsR,EACAvE,EAEAwE,EAAc/D,EAAcxN,EAAI5C,QAAQ,KAAO4C,EAAIpC,YAAY,KAEnE,IAAqB,IAAjB2T,EAYJ,OATI/D,GACF8D,EAActR,EAAI7C,OAAOoU,EAAc,GACvCxE,EAAY/M,EAAI7C,OAAO,EAAGoU,KAG1BD,EAActR,EAAI7C,OAAO,EAAGoU,GAC5BxE,EAAY/M,EAAI7C,OAAOoU,EAAc,IAAMD,EAAYnU,OAAOmU,EAAY1T,YAAY,KAAO,KAI7F0Q,SAAUgD,EACVlD,OAAQrB,GAKZ,SAASyB,GAAoBhB,EAAa8D,EAAavE,GACrD,OAAIS,EACKT,EAAY,IAAMuE,EAElBA,EAAc,IAAMvE,EA8F/B,SAASyE,GAAqBnE,EAAQoE,EAAKC,EAAQ5B,EAAST,GAE1D,IAAKS,IAAY2B,EAAIE,kBAAoD,MAAhC7B,EAAQA,EAAQvS,OAAS,IAAc8R,EAC9E,OAAOS,EAET,IAAI8B,GAAY,EAgBhB,GAbIH,EAAIjN,MACN0M,GAAeO,EAAIjN,KAAMsL,EAAS,SAAUqB,EAAaC,EAAWC,GAClE,GAAmB,IAAfA,GAAoBF,EAAYvT,YAAY,OAASuT,EAAY5T,OAAS,EAC5E,OAAOqU,GAAY,KAIpBA,GAAavE,EAAO7I,MACvB0M,GAAe7D,EAAO7I,KAAMkN,EAAS,IAAM5B,EAAS,SAAUqB,EAAaC,EAAWC,GACpF,GAAmB,IAAfA,GAAoBF,EAAYvT,YAAY,OAASuT,EAAY5T,OAAS,EAC5E,OAAOqU,GAAY,IAGrBA,EACF,OAAO9B,EAGT,IAAI6B,EAAmB,IAAMF,EAAIE,iBACjC,OAAI7B,EAAQ3S,OAAO2S,EAAQvS,OAASoU,EAAiBpU,UAAYoU,EACxD7B,EAAU6B,EAEV7B,EAGX,SAASC,GAAwBjO,EAAQuL,EAAQoE,EAAKC,EAAQ5B,EAASlC,EAAUyB,GAE/E,IAAKS,EAAS,CACZ,IAAI2B,EAAII,KAMN,OAAOH,EALP5B,EAAoC,OAA1B2B,EAAII,KAAK1U,OAAO,EAAG,GAAcsU,EAAII,KAAK1U,OAAO,GAAKsU,EAAII,KASxE,GAAIJ,EAAI9G,IAAK,CACX,IAAImH,EAAU,KAAOhC,EAEjB3F,EAAWC,EAAYqH,EAAI9G,IAAKmH,GAQpC,GALK3H,IACH2H,EAAU,KAAON,GAAoB1P,EAAQ2P,EAAKC,EAAQ5B,EAAST,MACnD,KAAOS,IACrB3F,EAAWC,EAAYqH,EAAI9G,IAAKmH,IAEhC3H,EAAU,CACZ,IAAIqF,EAASC,GAAU3N,EAAQuL,EAAQoE,EAAKC,EAAQvH,EAAU2H,EAASlE,EAAUyB,GACjF,GAAIG,EACF,OAAOA,GAKb,OAAOkC,EAAS,IAAMF,GAAoB1P,EAAQ2P,EAAKC,EAAQ5B,EAAST,GAG1E,SAAS0C,GAAc5H,EAAUqF,EAAQwC,GAGvC,QAAIxC,EAAOrS,OAAO,EAAGgN,EAAS5M,UAAY4M,GAAY6H,EAAKzU,OAAS4M,EAAS5M,QAM/E,SAASkS,GAAW3N,EAAQuL,EAAQoE,EAAKC,EAAQvH,EAAU6H,EAAMpE,EAAUyB,GAC3C,MAA1B2C,EAAKA,EAAKzU,OAAS,KACrByU,EAAOA,EAAK7U,OAAO,EAAG6U,EAAKzU,OAAS,IACtC,IAAIiS,EAASiC,EAAI9G,IAAIR,GAErB,GAAsB,iBAAXqF,EACT,MAAM,IAAIjT,MAAM,wEAA0E4N,EAAW,OAASuH,GAEhH,GAAKK,GAAa5H,EAAUqF,EAAQwC,IAA2B,iBAAXxC,EAGpD,OAAOT,EAAmB3O,KAAKnB,KAAMoO,EAAQmC,EAASwC,EAAK7U,OAAOgN,EAAS5M,QAASmU,EAAS,IAAK9D,EAAUA,EAAUyB,GAGxH,SAASiB,GAAoBxO,EAAQuL,EAAQoE,EAAKC,EAAQ5B,EAASlC,EAAUyB,GAE3E,IAAKS,EAAS,CACZ,IAAI2B,EAAII,KAMN,OAAO7P,QAAQC,QAAQyP,GALvB5B,EAAoC,OAA1B2B,EAAII,KAAK1U,OAAO,EAAG,GAAcsU,EAAII,KAAK1U,OAAO,GAAKsU,EAAII,KASxE,IAAIC,EAAS3H,EAcb,OAZIsH,EAAI9G,MACNmH,EAAU,KAAOhC,GACjB3F,EAAWC,EAAYqH,EAAI9G,IAAKmH,MAI9BA,EAAU,KAAON,GAAoB1P,EAAQ2P,EAAKC,EAAQ5B,EAAST,MACnD,KAAOS,IACrB3F,EAAWC,EAAYqH,EAAI9G,IAAKmH,MAI9B3H,EAAW6E,GAAMlN,EAAQuL,EAAQoE,EAAKC,EAAQvH,EAAU2H,EAASlE,EAAUyB,GAAkBW,IACpG3N,KAAK,SAAUmN,GACd,OAAIA,EACKxN,QAAQC,QAAQuN,GAGlBxN,QAAQC,QAAQyP,EAAS,IAAMF,GAAoB1P,EAAQ2P,EAAKC,EAAQ5B,EAAST,MAI5F,SAASL,GAAOlN,EAAQuL,EAAQoE,EAAKC,EAAQvH,EAAU6H,EAAMpE,EAAUyB,GACvC,MAA1B2C,EAAKA,EAAKzU,OAAS,KACrByU,EAAOA,EAAK7U,OAAO,EAAG6U,EAAKzU,OAAS,IAEtC,IAAIiS,EAASiC,EAAI9G,IAAIR,GAErB,GAAsB,iBAAXqF,EACT,OAAKuC,GAAa5H,EAAUqF,EAAQwC,GAE7B3D,EAAejO,KAAK0B,EAAQuL,EAAQmC,EAASwC,EAAK7U,OAAOgN,EAAS5M,QAASmU,EAAS,IAAK9D,EAAUA,EAAUyB,GACnHhN,KAAK,SAAUkM,GACd,OAAOE,GAAuBrO,KAAK0B,EAAQyM,EAAYmD,EAAS,IAAK9D,KAH9DoC,GAYX,IAAIiC,KACAC,KACJ,IAAK,IAAI7M,KAAKmK,EAAQ,CACpB,IAAI2C,EAAIpE,GAAe1I,GACvB6M,EAAWjU,MACTmU,UAAWD,EACXxH,IAAK6E,EAAOnK,KAEd4M,EAAkBhU,KAAKkC,EAAe0F,UAAUwM,OAAOjS,KAAK0B,EAAQqQ,EAAE9S,OAAQqS,IAIhF,OAAO1P,QAAQkC,IAAI+N,GAClB5P,KAAK,SAAUiQ,GAEd,IAAK,IAAIvU,EAAI,EAAGA,EAAImU,EAAW3U,OAAQQ,IAAK,CAC1C,IAAIoU,EAAID,EAAWnU,GAAGqU,UAClBtT,EAAQgL,EAAqBqI,EAAEI,KAAM,iBAAkBD,EAAgBvU,GAAKuU,EAAgBvU,GAAG6E,aAAe0P,EAAgBvU,IAClI,IAAKoU,EAAEK,QAAU1T,GAASqT,EAAEK,SAAW1T,EACrC,OAAOoT,EAAWnU,GAAG4M,OAG1BtI,KAAK,SAAUmN,GACd,GAAIA,EACF,OAAKuC,GAAa5H,EAAUqF,EAAQwC,GAE7B3D,EAAejO,KAAK0B,EAAQuL,EAAQmC,EAASwC,EAAK7U,OAAOgN,EAAS5M,QAASmU,EAAS,IAAK9D,EAAUA,EAAUyB,GACnHhN,KAAK,SAAUkM,GACd,OAAOE,GAAuBrO,KAAK0B,EAAQyM,EAAYmD,EAAS,IAAK9D,KAH9DoC,KAgBf,SAASyC,GAAwBT,GAC/B,IAAIU,EAAeV,EAAKpU,YAAY,KAChCL,EAASoV,KAAKC,IAAIF,EAAe,EAAGV,EAAKpU,YAAY,MACzD,OACEL,OAAQA,EACRsV,MAAO,IAAIC,OAAO,KAAOd,EAAK7U,OAAO,EAAGI,GAAQtB,QAAQ,qBAAsB,QAAQA,QAAQ,MAAO,WAAa,YAClH8W,UAA4B,IAAlBL,GAKd,SAAS/C,GAAuBtC,EAAQkB,GAEtC,IAAK,IADDmD,EAA4BrB,EAApB2C,GAAa,EAChBjV,EAAI,EAAGA,EAAIsP,EAAO4F,mBAAmB1V,OAAQQ,IAAK,CACzD,IAAImV,EAAoB7F,EAAO4F,mBAAmBlV,GAC9C4F,EAAIsP,GAAmBC,KAAuBD,GAAmBC,GAAqBT,GAAuBS,IACjH,KAAI3E,EAAWhR,OAASoG,EAAEpG,QAA1B,CAEA,IAAIa,EAAQmQ,EAAWnQ,MAAMuF,EAAEkP,QAC3BzU,GAAWsT,IAAasB,GAAcrP,EAAEoP,YAAarB,EAAOnU,OAASa,EAAM,GAAGb,WAChFmU,EAAStT,EAAM,GACf4U,GAAcrP,EAAEoP,SAChB1C,EAAaqB,EAASwB,EAAkB/V,OAAOwG,EAAEpG,UAIrD,GAAKmU,EAGL,OACExE,WAAYwE,EACZrB,WAAYA,GAIhB,SAASD,GAAuBtO,EAAQuL,EAAQ8F,EAAevF,EAAUW,GACvE,IAAI6E,EAAetR,EAAOuR,cAAgBvR,EAO1C,OAHyD,IAArDuL,EAAOuC,kBAAkBxS,QAAQ+V,IACnC9F,EAAOuC,kBAAkB3R,KAAKkV,GAEzBC,EAAaf,OAAOc,GAC1B9Q,KAAK,SAAUiR,GACdC,GAAa3F,EAAST,cAAemG,EAAW1F,EAASV,YAAY,EAAMG,GAC3EO,EAAST,cAAcgD,YAAa,IAErCrN,MAAM,SAAU3G,GACf,MAAM4G,EAAW5G,EAAK,8CAAgDgX,KAI1E,SAASjC,GAAgBsC,EAAS1D,EAAS2D,GAEzC,IAAI1C,EACJ,IAAK,IAAI1R,KAAUmU,EAAS,CAE1B,IAAIE,EAAiC,OAAxBrU,EAAOlC,OAAO,EAAG,GAAc,KAAO,GAKnD,GAJIuW,IACFrU,EAASA,EAAOlC,OAAO,KAGF,KADvB4T,EAAgB1R,EAAOjC,QAAQ,OAI3BiC,EAAOlC,OAAO,EAAG4T,KAAmBjB,EAAQ3S,OAAO,EAAG4T,IACnD1R,EAAOlC,OAAO4T,EAAgB,KAAOjB,EAAQ3S,OAAO2S,EAAQvS,OAAS8B,EAAO9B,OAASwT,EAAgB,IAEtG0C,EAAQpU,EAAQmU,EAAQE,EAASrU,GAASA,EAAO2K,MAAM,KAAKzM,QAC9D,OAIN,IAAIoW,EAAYH,EAAQ1D,IAAYnR,OAAO8B,eAAeL,KAAKoT,EAAS1D,GAAW0D,EAAQ1D,GAAW0D,EAAQ,KAAO1D,GACjH6D,GACFF,EAAQE,EAAWA,EAAW,GA8ClC,SAAS5F,GAAgBqE,GACvB,IAAIwB,EAAiBC,EAEjBC,EACAC,EAAuB3B,EAAUxU,YAAY,KAoBjD,OAnB8B,IAA1BmW,GACFH,EAAkBxB,EAAUjV,OAAO4W,EAAuB,GAC1DF,EAAkBzB,EAAUjV,OAAO,EAAG4W,GAEX,MAAvBH,EAAgB,KAClBE,GAAW,EACXF,EAAkBA,EAAgBzW,OAAO,MAI3C2W,EAA4B,MAAjB1B,EAAU,GACrBwB,EAAkB,UAClBC,EAAkBzB,EAAUjV,OAAO2W,IACa,IAA5CE,GAAc5W,QAAQyW,KACxBD,EAAkBC,EAClBA,EAAkB,QAKpBxU,OAAQwU,GAAmB,cAC3BtB,KAAMqB,EACNpB,OAAQsB,GAIZ,SAAS9F,GAAkBF,EAAc/L,EAAWkS,GAElD,OAAO9T,EAAe0F,UAAUwM,OAAOjS,KAAKnB,KAAM6O,EAAazO,OAAQ0C,GACtEM,KAAK,SAAU+P,GACd,IAAI1M,EAAIoE,EAAqBgE,EAAayE,KAAMH,GAEhD,GAAI6B,GAAqB,kBAANvO,EACjB,MAAM,IAAInG,UAAU,2CAEtB,OAAOuO,EAAa0E,QAAU9M,EAAIA,IAKtC,SAAS+I,GAAwBzO,EAAK+B,EAAWuL,GAE/C,IAAI4G,EAAmBlU,EAAI5B,MAAM+V,IAEjC,IAAKD,EACH,OAAOlS,QAAQC,QAAQjC,GAEzB,IAAI8N,EAAeC,GAAe3N,KAAKnB,KAAMiV,EAAiB,GAAG/W,OAAO,EAAG+W,EAAiB,GAAG3W,OAAS,IAUxG,OAAOyQ,GAAiB5N,KAAKnB,KAAM6O,EAAc/L,GAAW,GAC3DM,KAAK,SAAU4L,GACd,GAA8B,iBAAnBA,EACT,MAAM,IAAI1O,UAAU,2BAA6BS,EAAM,iCAEzD,IAAqC,IAAjCiO,EAAe7Q,QAAQ,KACzB,MAAM,IAAImC,UAAU,sCAAwCS,GAAO+B,EAAY,OAASA,EAAY,IAAM,2BAA6BkM,EAAiB,oCAE1J,OAAOjO,EAAI/D,QAAQkY,GAAoBlG,KC3zB3C,SAASmG,GAAOtS,EAAQuS,EAAKC,GAC3B,IAAK,IAAIvW,EAAI,EAAGA,EAAIwW,GAAehX,OAAQQ,IAAK,CAC9C,IAAIyW,EAAYD,GAAexW,GAC3BsW,EAAIG,IAAcC,GAAUD,EAAUrX,OAAO,EAAGqX,EAAUjX,OAAS,KACrE+W,EAAYD,EAAIG,KAItB,SAASE,GAAUC,EAAKC,GACtB,IAAIC,KACJ,IAAK,IAAIlR,KAAKgR,EAAK,CACjB,IAAIpC,EAAOoC,EAAIhR,GACXiR,EAAW,EACTrC,aAAgBtO,MAClB4Q,EAAMlR,MAAQqE,OAAOuK,GACE,iBAATA,EACdsC,EAAMlR,GAAK+Q,GAASnC,EAAMqC,EAAW,GACxB,kBAANjR,IACPkR,EAAMlR,GAAK4O,GAGbsC,EAAMlR,GAAK4O,EAGf,OAAOsC,EAGT,SAAgBC,GAAezH,EAAQ1J,GACrC,IAAIoR,EAAU1H,EAAO1J,GAGrB,OAAIoR,aAAmB9Q,MACdoJ,EAAO1J,GAAGqE,WACS,iBAAZ+M,EACPL,GAASK,EAAS,GAElB1H,EAAO1J,GAGlB,SAAgBqR,GAAWC,GACzB,GAAIA,EAAY,CACd,IAAyC,IAArCC,GAAY9X,QAAQ6X,GACtB,OAAOH,GAAc7V,KAAK0O,IAASsH,GACrC,MAAM,IAAI1Y,MAAM,IAAM0Y,EAAa,uDAAyDC,GAAY/W,KAAK,MAAQ,KAIvH,IAAK,IADDkW,KACKtW,EAAI,EAAGA,EAAImX,GAAY3X,OAAQQ,IAAK,CAC3C,IAAI4F,EAAIuR,GAAYnX,GAChBoX,EAAaL,GAAc7V,KAAK0O,IAAShK,QAC1BjG,IAAfyX,IACFd,EAAI1Q,GAAKwR,GAEb,OAAOd,EAGT,SAAgBe,GAAWf,EAAKgB,GAC9B,IAAIvT,EAAS7C,KACToO,EAASpO,KAAK0O,IAWlB,GATI,aAAc0G,IAChBhH,EAAOnH,SAAWmO,EAAInO,UAEpB,SAAUmO,IACZhH,EAAOiI,KAA8B,oBAAhB7O,aAA+B4N,EAAIiB,OAEtD,eAAgBjB,GAAO,UAAWA,IACpCkB,GAAcnV,KAAK0B,IAAUuS,EAAImB,cAAenB,EAAIoB,OAAShB,IAAaA,GAAUgB,SAEjFJ,EAAa,CAGhB,IAAInO,EACJkN,GAAOtS,EAAQuS,EAAK,SAASA,GAC3BnN,EAAUA,GAAWmN,EAAInN,WAE3BA,EAAUA,GAAWmN,EAAInN,WAIvBmG,EAAOnG,QAAUlK,EAAkBkK,EAASqD,KAAYvN,EAAkB,KAAOkK,EAASqD,IACxC,MAA9C8C,EAAOnG,QAAQmG,EAAOnG,QAAQ3J,OAAS,KACzC8P,EAAOnG,SAAW,MAGlBmN,EAAI9M,OACNE,EAAO4F,EAAO9F,MAAO8M,EAAI9M,OAE3B6M,GAAOtS,EAAQuS,EAAK,SAASA,GACvBA,EAAI9M,OACNE,EAAO4F,EAAO9F,MAAO8M,EAAI9M,SAG7B,IAAK,IAAI5D,KAAK0J,EAAO9F,OACmB,IAAlC8F,EAAO9F,MAAM5D,GAAGvG,QAAQ,OAE5B2I,EAAK3F,KAAKiN,EAAQ,eAAiB1J,EAAI,OAAS0J,EAAO9F,MAAM5D,GAAK,+DAC3D0J,EAAO9F,MAAM5D,IAUxB,GANI0Q,EAAIqB,qBACN3P,EAAK3F,KAAKiN,EAAQ,yGAAyG,GAE9F,kBAApBgH,EAAI7G,cACbH,EAAOG,YAAc6G,EAAI7G,aAEvB6G,EAAI1J,IACN,IAAK,IAAIhH,KAAK0Q,EAAI1J,IAAK,CACrB,IAAIgL,EAAItB,EAAI1J,IAAIhH,GAEhB,GAAiB,iBAANgS,EAAgB,CACzB,IAAInG,EAASX,EAAYzO,KAAK0B,EAAQuL,EAAQsI,OAAGjY,GAAW,GAAO,GAClC,MAA7B8R,EAAOA,EAAOjS,OAAQ,IAAkC,MAApBoG,EAAEA,EAAEpG,OAAS,IAAkC,MAApBoG,EAAEA,EAAEpG,OAAS,KAC9EiS,EAASA,EAAOrS,OAAO,EAAGqS,EAAOjS,OAAS,IAC5C8P,EAAO1C,IAAIhH,GAAK6L,MAIb,CAEHoG,GADIA,EAAU/G,EAAYzO,KAAK0B,EAAQuL,EAA4B,MAApB1J,EAAEA,EAAEpG,OAAS,GAAaoG,EAAI,IAAMA,OAAGjG,GAAW,GAAM,IACrFP,OAAO,EAAGyY,EAAQrY,OAAS,GAE7C,IAAIkU,EAAMpE,EAAOI,SAASmI,GACrBnE,KACHA,EAAMpE,EAAOI,SAASmI,GAAW/F,MAE7B8B,iBAAmB,IAEzB4B,GAAa9B,GAAO9G,IAAKgL,GAAKC,GAAS,EAAOvI,IAKpD,GAAIgH,EAAIpB,mBAAoB,CAE1B,IAAK,IADDA,KACKlV,EAAI,EAAGA,EAAIsW,EAAIpB,mBAAmB1V,OAAQQ,IAAK,CACtD,IAAIiU,EAAOqC,EAAIpB,mBAAmBlV,GAC9B8X,EAAgBlD,KAAKC,IAAIZ,EAAKpU,YAAY,KAAO,EAAGoU,EAAKpU,YAAY,MACrE2Q,EAAaM,EAAYzO,KAAK0B,EAAQuL,EAAQ2E,EAAK7U,OAAO,EAAG0Y,QAAgBnY,GAAW,GAAO,GACnGuV,EAAmBlV,GAAKwQ,EAAayD,EAAK7U,OAAO0Y,GAEnDxI,EAAO4F,mBAAqBA,EAG9B,GAAIoB,EAAIyB,QACN,IAAK,IAAInS,KAAK0Q,EAAIyB,QAAS,CAEzB,IAAK,IADDC,KACKhY,EAAI,EAAGA,EAAIsW,EAAIyB,QAAQnS,GAAGpG,OAAQQ,IACzCgY,EAAO9X,KAAK6D,EAAOgN,cAAcuF,EAAIyB,QAAQnS,GAAG5F,KAClDsP,EAAOyI,QAAQnS,GAAKoS,EAIxB,GAAI1B,EAAI5G,SACN,IAAK,IAAI9J,KAAK0Q,EAAI5G,SAAU,CAC1B,GAAI9J,EAAEvF,MAAM,oBACV,MAAM,IAAImB,UAAU,IAAMoE,EAAI,kCAEhC,IAAIiS,EAAU/G,EAAYzO,KAAK0B,EAAQuL,EAA4B,MAApB1J,EAAEA,EAAEpG,OAAS,GAAaoG,EAAI,IAAMA,OAAGjG,GAAW,GAAM,GACvGkY,EAAUA,EAAQzY,OAAO,EAAGyY,EAAQrY,OAAS,GAE7CgW,GAAalG,EAAOI,SAASmI,GAAWvI,EAAOI,SAASmI,IAAY/F,KAAiBwE,EAAI5G,SAAS9J,GAAIiS,GAAS,EAAOvI,GAI1H,GAAIgH,EAAI2B,SACN,IAAK,IAAIrS,KAAK0Q,EAAI2B,SAChB3I,EAAO2I,SAASlU,EAAOgN,cAAcnL,OAASqE,OAAOqM,EAAI2B,SAASrS,IAGtE,GAAI0Q,EAAI7P,KACN,IAAK,IAAIb,KAAK0Q,EAAI7P,KAEhB,GAAa,MAATb,EAAE,GACJ8D,EAAO4F,EAAO7I,KAAKb,GAAK0J,EAAO7I,KAAKb,OAAU0Q,EAAI7P,KAAKb,QAEpD,CACH,IAAI2G,EAAWuE,EAAYzO,KAAK0B,EAAQuL,EAAQ1J,OAAGjG,GAAW,GAAM,GACpE+J,EAAO4F,EAAO7I,KAAK8F,GAAY+C,EAAO7I,KAAK8F,OAAiB+J,EAAI7P,KAAKb,IAKvE,eAAgB0Q,IAClBhH,EAAO4I,WAAa5B,EAAI4B,YAI1B,IAAK,IAAI9D,KAAKkC,GACoB,IAA5Ba,GAAY9X,QAAQ+U,KAEW,IAA/BoC,GAAenX,QAAQ+U,KAI3BrQ,EAAOqQ,GAAKkC,EAAIlC,IAGlBiC,GAAOtS,EAAQuS,EAAK,SAASA,GAC3BvS,EAAOuL,OAAOgH,GAAK,KAIvB,SAAgBxE,KACd,OACE8B,sBAAkBjU,EAClBmU,UAAMnU,EACNwS,YAAQxS,EACR8G,UAAM9G,EACNiN,SAAKjN,EACLyP,mBAAezP,EACfyS,YAAY,GAKhB,SAAgBoD,GAAc9B,EAAK4C,EAAKuB,EAASM,EAAe7I,GAC9D,IAAK,IAAIkF,KAAQ8B,EACF,SAAT9B,GAA4B,WAATA,GAA8B,qBAATA,GAAwC,eAATA,EACpE2D,QAA+BxY,IAAd+T,EAAIc,KACxBd,EAAIc,GAAQ8B,EAAI9B,IAEF,QAATA,GACN2D,EAAgBtO,EAAUH,GAAQgK,EAAI9G,IAAM8G,EAAI9G,QAAW0J,EAAI1J,KAEhD,SAAT4H,GACN2D,EAAgBtO,EAAUH,GAAQgK,EAAIjN,KAAOiN,EAAIjN,SAAY6P,EAAI7P,MAE3D7F,OAAO8B,eAAeL,KAAKiU,EAAK9B,IACvCxM,EAAK3F,KAAKiN,EAAQ,IAAMkF,EAAO,4DAA8DqD,GAoBjG,YAf6BlY,IAAzB+T,EAAIE,mBACNF,EAAIE,iBAAmB,WAERjU,IAAb+T,EAAII,MAAsBJ,EAAI9G,KAAO8G,EAAI9G,IAAI,MAC/C8G,EAAII,KAAOJ,EAAI9G,IAAI,YACZ8G,EAAI9G,IAAI,MAGY,iBAAb8G,EAAII,OAClBJ,EAAI9G,IAAM8G,EAAI9G,QACd8G,EAAI9G,IAAI,WAAa8G,EAAII,KACzBJ,EAAII,KAAc,QAAIJ,EAAII,KAAc,SAAK,KAC7CJ,EAAII,KAAO,SAGNJ,ECrRT,SAAS0E,GAAiBC,GACxB,OAAIC,GACKC,GAAkB,IAAIC,OAAOH,GAAiBtQ,SAAS,UACvC,oBAAT0Q,KACPF,GAAkBE,KAAKC,SAASC,mBAAmBN,KAEnD,GAGX,SAASO,GAAUC,EAAQlG,EAAWmG,EAASC,GAC7C,IAAIC,EAAgBH,EAAOhZ,YAAY,MAEvC,GAAI8S,EAAW,CACb,GAAwB,iBAAbA,EACT,MAAM,IAAInR,UAAU,qDAEtBmR,EAAYsG,KAAKC,UAAUvG,GAG7B,OAAQoG,EAAO,gCAAkC,IAAMF,GAAUE,EAAO,wBAA0B,KAEvD,oBAApCF,EAAOzZ,OAAO4Z,EAAe,IAC5B,mBAAqBF,GAAWnG,EAAY,cAAgB,IAAM,KAEnEA,GAAayF,GAAgBzF,IAAc,IAMpD,SAASwG,GAAWpV,EAAQ8U,EAAQlG,EAAWmG,EAASpG,GACjDhI,KACHA,GAAOL,SAASK,MAAQL,SAAS+O,MAAQ/O,SAASgP,iBAEpD,IAAI7N,EAASnB,SAASC,cAAc,UACpCkB,EAAOmC,KAAOiL,GAAUC,EAAQlG,EAAWmG,GAAS,GACpD,IACIxR,EADAgS,EAAUC,OAAOD,QAgBrB,GAdAC,OAAOD,QAAU,SAASE,GACxBlS,EAAItC,WAAWwU,EAAI,cAAgBV,GAC/BQ,GACFA,EAAQG,MAAMvY,KAAMwY,YAExBC,GAAQ5V,GAEJ2O,GACFlH,EAAOoO,aAAa,QAASlH,GAE/BhI,GAAKC,YAAYa,GACjBd,GAAKE,YAAYY,GACjBqO,KACAN,OAAOD,QAAUA,EACbhS,EACF,OAAOA,EASX,SAASqS,GAAS5V,GACK,GAAjB+V,OACFC,GAAYrU,GAAOsU,QACrBtU,GAAOsU,OAAStU,GAAOuU,SAAWlW,EAEpC,SAAS8V,KACc,KAAfC,KACJpU,GAAOsU,OAAStU,GAAOuU,SAAWF,IAStC,SAAgBG,GAAUnW,EAAQ8U,EAAQlG,EAAWmG,EAAS3N,EAAWuH,EAAOyH,GAC9E,GAAKtB,EAAL,CAEA,GAAInG,GAAS0H,GACX,OAAOjB,GAAWpV,EAAQ8U,EAAQlG,EAAWmG,EAASpG,GACxD,IACEiH,GAAQ5V,IAEHsW,IAAMtW,EAAOsF,eAChBgR,GAAKtW,EAAOsF,aAAa,MACzBiR,GAAQD,GAAGE,iBAAiB,6CAA+CxW,GAEzEuW,GACFD,GAAGE,iBAAiB3B,GAAUC,EAAQlG,EAAWmG,GAAUqB,IAAWK,SAAU1B,GAAWnG,EAAY,cAAgB,OAEvH,EAAI8H,MAAM7B,GAAUC,EAAQlG,EAAWmG,GAAUqB,IACnDN,KAEF,MAAOvS,GAEL,OADAuS,KACOvS,ICuDX,SAASoT,GAAYzG,GACnB,MAA0B,aAAtBA,EAAK7U,OAAO,EAAG,GACV6U,EAAK7U,OAAO,IAAMjB,IAEvBwc,IAAgB1G,EAAK7U,OAAO,EAAGub,GAAanb,UAAYmb,GACnD1G,EAAK7U,OAAOub,GAAanb,QAE3ByU,EAGT,SAAgB2G,GAAgBC,EAASC,GACvC,OAAOJ,GAAYxZ,KAAK6P,cAAc8J,EAASC,IAGjD,SAAgBC,GAAaC,GAE3B,IACIR,EADAhH,EAAcwH,EAASnb,YAAY,KAOnCob,GAJFT,GADmB,IAAjBhH,EACSwH,EAAS5b,OAAO,EAAGoU,GAEnBwH,GAEU/O,MAAM,KAI7B,OAHAgP,EAAQhb,MACRgb,EAAUA,EAAQ7a,KAAK,MAGrBoa,SAAUE,GAAYF,GACtBS,QAASP,GAAYO,IAYzB,SAAgBC,GAAYrC,GAU1B,SAASsC,EAAYC,EAAW/a,GAC9B,IAAK,IAAIL,EAAI,EAAGA,EAAIob,EAAU5b,OAAQQ,IACpC,GAAIob,EAAUpb,GAAG,GAAKK,EAAMgb,OAASD,EAAUpb,GAAG,GAAKK,EAAMgb,MAC3D,OAAO,EACX,OAAO,EAbTC,GAAgBC,UAAYC,GAAaD,UAAYE,GAAYF,UAAY,EAE7E,IAEIlb,EAFA+E,KAKAsW,KAAsBC,KAS1B,GAAI9C,EAAOrZ,OAASqZ,EAAO5M,MAAM,MAAMzM,OAAS,IAAK,CACnD,KAAOa,EAAQob,GAAYG,KAAK/C,IAC9B6C,EAAgBxb,MAAMG,EAAMgb,MAAOhb,EAAMgb,MAAQhb,EAAM,GAAGb,SAI5D,KAAOa,EAAQmb,GAAaI,KAAK/C,IAE1BsC,EAAWO,EAAiBrb,IAC/Bsb,EAAiBzb,MAAMG,EAAMgb,MAAQhb,EAAM,GAAGb,OAAQa,EAAMgb,MAAQhb,EAAM,GAAGb,OAAS,IAI5F,KAAOa,EAAQib,GAAgBM,KAAK/C,IAElC,IAAKsC,EAAWO,EAAiBrb,KAAW8a,EAAWQ,EAAkBtb,GAAQ,CAC/E,IAAIwb,EAAMxb,EAAM,GAAGjB,OAAO,EAAGiB,EAAM,GAAGb,OAAS,GAE/C,GAAIqc,EAAIxb,MAAM,OACZ,SACF+E,EAAKlF,KAAK2b,GAId,OAAOzW,EAST,SAAS0W,GAAgBC,GACvB,IAAgD,IAA5CC,GAAmB3c,QAAQ0c,GAA/B,CAEA,IACE,IAAIhb,EAAQ2E,GAAOqW,GAErB,MAAOzU,GACL0U,GAAmB9b,KAAK6b,GAE1B7a,KAAK6a,EAAYhb,IAGnB,SAAgBkb,GAAgBnW,GAC9B,GAAuB,iBAAZA,EACT,OAAOiG,EAAqBjG,EAASJ,IAEvC,KAAMI,aAAmBI,OACvB,MAAM,IAAI1H,MAAM,6CAGlB,IAAK,IADD0d,KACKlc,EAAI,EAAGA,EAAI8F,EAAQtG,OAAQQ,IAClCkc,EAAYpW,EAAQ9F,GAAGiM,MAAM,KAAKhM,OAAS8L,EAAqBjG,EAAQ9F,GAAI0F,IAC9E,OAAOwW,EAGT,SAAgBC,GAAeC,EAAYtW,EAAS2M,EAAS4J,GAE3D,IAAIC,EAAY5W,GAAO6W,OAEvB7W,GAAO6W,YAAS5c,EAGhB,IAAI6c,EACJ,GAAI/J,EAAS,CACX+J,KACA,IAAK,IAAIC,KAAKhK,EACZ+J,EAAWC,GAAK/W,GAAO+W,GACvB/W,GAAO+W,GAAKhK,EAAQgK,GAcxB,OATK3W,IACH4W,MAEA9b,OAAOD,KAAK+E,IAAQ3D,QAAQ+Z,GAAgB,SAAUne,EAAMoD,GAC1D2b,GAAe/e,GAAQoD,KAKpB,WACL,IAEI4b,EAFAT,EAAcpW,EAAUmW,GAAenW,MAGvC8W,IAAoB9W,EA6BxB,GA3BKA,IAAWuW,GACdzb,OAAOD,KAAK+E,IAAQ3D,QAAQ+Z,GAAgB,SAAUne,EAAMoD,GACtD2b,GAAe/e,KAAUoD,QAEfpB,IAAVoB,IAIAsb,IACF3W,GAAO/H,QAAQgC,GAEZmG,IACHoW,EAAYve,GAAQoD,OAECpB,IAAjBgd,EACGC,GAAmBD,IAAiB5b,IACvC6b,GAAkB,GAGpBD,EAAe5b,MAKvBmb,EAAcU,EAAkBV,EAAcS,EAG1CH,EACF,IAAK,IAAIC,KAAKD,EACZ9W,GAAO+W,GAAKD,EAAWC,GAI3B,OAFA/W,GAAO6W,OAASD,EAETJ,GAYX,SAASW,GAAchE,EAAQiE,GAM7B,IACIC,IAJJlE,EAASA,EAAO3a,QAAQsd,GAAc,KAGlBnb,MAAM2c,IACC,GAAG/Q,MAAM,KAAK6Q,IAAiB,WAAW5e,QAAQ+e,GAAS,IAGlFC,EAAeC,GAAcJ,KAAkBI,GAAcJ,GAAgB,IAAIhI,OAAOqI,GAAgBL,EAAeM,GAAgB,MAE3IH,EAAa3B,UAAY,EAKzB,IAHA,IAEIlb,EAFA+E,KAGG/E,EAAQ6c,EAAatB,KAAK/C,IAC/BzT,EAAKlF,KAAKG,EAAM,IAAMA,EAAM,IAE9B,OAAO+E,EAGT,SAASkY,GAAqB/Z,GAC5B,OAAO,SAAU0D,EAASnB,EAASxE,GACjCiC,EAAQ0D,EAASnB,EAASxE,GAEF,iBADxBwE,EAAUxE,EAAOwE,UACsC,mBAAZA,GAA6B,eAAgBA,GACtFlF,OAAOiB,eAAeP,EAAOwE,QAAS,cACpC/E,OAAO,KAUf,SAAgBwc,GAAiBC,EAAUzK,GACzC0K,GAAcD,EACdE,GAAc3K,EACd4K,QAAkBhe,EAClBie,IAAuB,EAEzB,SAAgBC,GAAoB9Z,GAC9B4Z,GACF5Z,EAAO+Z,gBAAgBL,GAAcE,GAAgB,GAAG1T,OAAOwT,IAAeE,GAAgB,IAC1F,EAAOD,GAAcJ,GAAoBK,GAAgB,IAAMA,GAAgB,IAG5EC,IACP7Z,EAAO+Z,oBAAoB,EAAOvW,GC7YtC,SAASwW,GAAiBlO,EAAUmO,IAC9BnO,EAAS1L,KAAK4O,UAAoC,iBAAhBiL,GAAmD,mBAAhBA,GACnE,eAAgBA,GACpBpd,OAAOiB,eAAemc,EAAa,cACjCjd,OAAO,IAIb,SAAgBsD,GAAapC,EAAKsG,GAChC,IAAIxE,EAAS7C,KACToO,EAASpO,KAAK0O,IAElB,OAAQqO,GAAuB3O,EAAQpO,KAAMe,IAAQgQ,IACpD3N,KAAK,WACJ,IAAIiE,IAAJ,CAGA,IAAIsH,EAAW9L,EAAO6M,IAAU3O,GAGhC,GAAyB,WAArBA,EAAI7C,OAAO,EAAG,GAAiB,CACjC,IAAK2E,EAAOsF,aACV,MAAM,IAAI7H,UAAU,iBAAmBS,EAAM,8CAK/C,OAJA8B,EAAO+Z,oBAAoB,EAAO,WAChC,OAAO5U,EAAe7G,KAAK0B,EAAQ9B,EAAI7C,OAAO,GAAI2E,EAAOoF,gBAE3DZ,IAkBF,OAdIsH,EAAS1L,KAAK8G,YACZ4E,EAAS1L,KAAK6K,WAAckP,KAC9BrO,EAAS1L,KAAK8G,YAAa,EAC3BjD,EAAK3F,KAAKiN,EAAQ,iCAAmCrN,EAAM,OAGzB,IAA7B4N,EAAS1L,KAAK8G,aAAyB4E,EAAS1L,KAAK6K,WAAakP,KAEpErO,EAAS1L,KAAKiB,MAASyK,EAAS1L,KAAKsO,WACZ,WAAzB5C,EAAS1L,KAAKgO,QAAgD,aAAzBtC,EAAS1L,KAAKgO,QAAkD,WAAzBtC,EAAS1L,KAAKgO,QAAuBtC,EAAS1L,KAAK2B,WAClI+J,EAAS1L,KAAK8G,YAAa,IAI1B4E,EAAS1L,KAAK8G,WAOZ,IAAIhH,QAAQ,SAAUC,EAASE,GACpC,GAA6B,QAAzByL,EAAS1L,KAAKgO,QAAoBzM,GAAO6W,SAAWxY,EAAOoa,UAC7D,MAAM,IAAI3f,MAAM,4DAA8Dud,GAAa,iCAE7F9Q,EAAWhJ,EAAK4N,EAAS1L,KAAK+G,YAAa2E,EAAS1L,KAAKgH,UAAW,WAClE,IAAK5C,IAAuB,CAC1BsH,EAAS1L,KAAKgO,OAAS,SACvB,IAAI+J,EAAcrM,EAAS1L,KAAK2B,SAAWmW,GAAepM,EAAS1L,KAAK2B,SACxE/B,EAAO+Z,oBAAoB,EAAO,WAEhC,OADAC,GAAgBlO,EAAUqM,GACnBA,IAET3T,IAGFrE,KACCE,KAtBIga,GAAiBra,EAAQ9B,EAAK4N,GACpCvL,KAAK,WACJ,OAAO+Z,GAAiBta,EAAQ9B,EAAK4N,EAAUtH,EAAqB+G,EAAOiI,WAuBhFjT,KAAK,SAAUga,GAEd,cADOva,EAAO6M,IAAU3O,GACjBqc,IAIX,SAASF,GAAkBra,EAAQ9B,EAAK4N,GACtC,OAAKA,EAASb,UAGPjL,EAAOuQ,OAAOzE,EAASb,WAAW1K,KAAK,SAAU+L,GACtDR,EAASX,aAAemB,EACxBR,EAAS0O,YACP5gB,KAAMsE,EACN6W,QAASjJ,EAASZ,eAClB4J,YAAQlZ,EACRkQ,SAAUA,EAAS1L,MAErB0L,EAAS1L,KAAKiB,KAAOyK,EAAS1L,KAAKiB,WAV5B6M,GAcX,SAASgM,GAAwB3O,EAAQvL,EAAQ9B,GAE/C,IAAImD,EAAOkK,EAAO2I,SAAShW,GAC3B,GAAImD,EACF,IAASpF,EAAI,EAAGA,EAAIoF,EAAK5F,OAAQQ,IAC/B+D,EAAO4L,UAAUvK,EAAKpF,GAAIiC,GAAKqC,KAAK4F,OAEnC,CACH,IAAIsU,GAAU,EACd,IAAK,IAAI5U,KAAK0F,EAAOyI,QAAS,CAC5B,IAAK,IAAI/X,EAAI,EAAGA,EAAIsP,EAAOyI,QAAQnO,GAAGpK,OAAQQ,IAAK,CACjD,IAAIye,EAAYnP,EAAOyI,QAAQnO,GAAG5J,GAElC,GAAIye,IAAcxc,EAAK,CACrBuc,GAAU,EACV,MAIF,IAAgC,IAA5BC,EAAUpf,QAAQ,KAAa,CACjC,IAAIqf,EAAQD,EAAUxS,MAAM,KAC5B,GAAqB,IAAjByS,EAAMlf,OAAc,CACtB8P,EAAOyI,QAAQnO,GAAG2B,OAAOvL,IAAK,GAC9B,SAGF,GAAIiC,EAAI7C,OAAO,EAAGsf,EAAM,GAAGlf,UAAYkf,EAAM,IACzCzc,EAAI7C,OAAO6C,EAAIzC,OAASkf,EAAM,GAAGlf,OAAQkf,EAAM,GAAGlf,UAAYkf,EAAM,GAAI,CAC1EF,GAAU,EACV,QAKN,GAAIA,EACF,OAAOza,EAAOuQ,OAAO1K,KAK7B,SAASyU,GAAkBta,EAAQ9B,EAAK4N,EAAUtH,EAAqBgP,GAIrE,OAHI1H,EAAS1L,KAAK2B,UAAY+J,EAAS1L,KAAKgO,SAC1CtC,EAAS1L,KAAKgO,OAAS,UAElBF,GAGN3N,KAAK,WACJ,GAAKuL,EAASX,cAAiBW,EAASX,aAAayP,OAGrD,OAAO1a,QAAQC,QAAQ2L,EAASX,aAAayP,OAAOtc,KAAK0B,EAAQ8L,EAAS0O,aACzEja,KAAK,SAAUwU,GACVA,IACFjJ,EAAS0O,WAAWzF,QAAUA,OAKnCxU,KAAK,WACJ,OAAKuL,EAASX,cAGdqI,GAAO,EAEF1H,EAASX,aAAa3B,MAGpBsC,EAASX,aAAa3B,MAAMlL,KAAK0B,EAAQ8L,EAAS0O,WAAY,SAAUpa,GAC7E,OAAOoJ,GAAMpJ,EAAK2U,QAASjJ,EAAS1L,KAAK4I,cAAe8C,EAAS1L,KAAKgH,WAAW,KAH1EoC,GAAMsC,EAAS0O,WAAWzF,QAASjJ,EAAS1L,KAAK4I,cAAe8C,EAAS1L,KAAKgH,WAAW,IALzFoC,GAAMtL,EAAK4N,EAAS1L,KAAK4I,cAAe8C,EAAS1L,KAAKgH,UAAWoM,KAY3EjT,KAAK,SAAUsa,GAEd,OAAKrH,GAA2B,iBAAZqH,EAGbvW,EAAqBtE,EAAQ6a,EAASrW,GAC5CjE,KAAK,SAAUua,GACd,IAAIA,EAAJ,CAMA,IAAIC,EAAe7gB,GAAY,IAAI8gB,YAAY,SAASC,OAAO,IAAIvW,WAAWmW,IAAYA,EAAQ7W,WAClG,OAAOkX,GAAwBlb,EAAQ9B,EAAK6c,EAAcjP,EAAUtH,MAX7D0W,GAAwBlb,EAAQ9B,EAAK2c,EAAS/O,EAAUtH,KAgBrE,SAAS0W,GAAyBlb,EAAQ9B,EAAK4W,EAAQhJ,EAAUtH,GAC/D,OAAOtE,QAAQC,QAAQ2U,GAEtBvU,KAAK,SAAUuU,GAMd,MAL6B,WAAzBhJ,EAAS1L,KAAKgO,SAChBtC,EAAS1L,KAAKgO,YAASxS,GAEzBuf,GAAerG,EAAQhJ,GAElBA,EAASX,cAAiBW,EAASX,aAAaiQ,WAGrDtP,EAAS0O,WAAW1F,OAASA,EACtB5U,QAAQC,QAAQ2L,EAASX,aAAaiQ,UAAU9c,KAAK0B,EAAQ8L,EAAS0O,WAAY1O,EAASuP,YACjG9a,KAAK,SAAU+a,GACd,GAAIxP,EAAS1L,KAAKwO,UAAW,CAC3B,GAAuC,iBAA5B9C,EAAS1L,KAAKwO,UACvB,MAAM,IAAInU,MAAM,qDAClB8gB,GAAkBzP,EAAS0O,WAAWzF,QAASjJ,EAAS1L,KAAKwO,WAG/D,MAA0B,iBAAf0M,EACFA,EAEAxP,EAAS0O,WAAW1F,UAdtBA,IAiBVvU,KAAK,SAAUuU,GACd,OAAKhJ,EAAS1L,KAAKgO,QAAqC,aAA3B0G,EAAO1Y,UAAU,EAAG,GAKpB,aAAzB0P,EAAS1L,KAAKgO,SAA0BtC,EAAS1L,KAAKgO,QAAUoN,GAAqB1G,IACvFhJ,EAAS1L,KAAKgO,OAAS,WAChB0G,GAGoB,QAAzBhJ,EAAS1L,KAAKgO,SAAqBtC,EAAS1L,KAAKgO,QAAW0G,EAAOxY,MAAMmf,KAI7E3P,EAAS1L,KAAKgO,OAAS,MAChBsN,GAAU1b,EAAQ8U,EAAQ5W,EAAK4N,EAAUtH,IAJvCsQ,GAVPhJ,EAAS1L,KAAKgO,OAAS,SAChB0G,KAiBVvU,KAAK,SAAU+a,GACd,GAA0B,iBAAfA,IAA4BxP,EAASX,eAAiBW,EAASX,aAAa7K,YACrF,OAAOgb,EAET,IAAIK,GAAoB,EAExB,OADA7P,EAAS0O,WAAW1F,OAASwG,EACtBpb,QAAQC,QAAQ2L,EAASX,aAAa7K,YAAYhC,KAAK0B,EAAQ8L,EAAS0O,WAAY,SAAUpa,GAGnG,GAFAkb,EAAalb,EAAK0U,OAClBhJ,EAAS1L,KAAOA,EAAK0L,SACjB6P,EACF,MAAM,IAAIlhB,MAAM,yCAClBkhB,GAAoB,KAErBpb,KAAK,SAAUqb,GACd,OAAID,EACKL,EACF7X,EAAyBmY,OAGnCrb,KAAK,SAAUuU,GAEd,GAAsB,iBAAXA,EACT,OAAOA,EAEJhJ,EAAS1L,KAAKgO,SACjBtC,EAAS1L,KAAKgO,OAASyN,GAAmB/G,IAE5C,IAAIgH,GAAa,EAEjB,OAAQhQ,EAAS1L,KAAKgO,QACpB,IAAK,MACL,IAAK,WACL,IAAK,SAEH,GADI/T,EAAM8b,GAASnW,EAAQ8U,EAAQhJ,EAAS1L,KAAKwO,UAAW1Q,EAAK4N,EAAS1L,KAAKgH,UAAW0E,EAAS1L,KAAKuO,OAAO,GAE7G,MAAMtU,EACR,IAAKmK,IACH,OAAOuX,GACT,OAGF,IAAK,OAEH,IAAI3P,EAAS8I,KAAK8G,MAAMlH,GACxB,OAAO9U,EAAOic,WAAYpb,QAASuL,EAAQtL,aAAcsL,IAE3D,IAAK,MACH,IAAImM,EAAY5W,GAAO6W,OACvB7W,GAAO6W,OAASxY,EAAOoa,UAEvBZ,GAAgB1N,EAAS1L,KAAKiB,KAAMyK,EAAS1L,KAAK4O,UAElD,IAAI3U,EAAM8b,GAASnW,EAAQ8U,EAAQhJ,EAAS1L,KAAKwO,UAAW1Q,EAAK4N,EAAS1L,KAAKgH,UAAW0E,EAAS1L,KAAKuO,OAAO,GAW/G,IARAmN,EAAatX,OAEXsV,GAAmB9Z,GACnB8b,EAAatX,KAGf7C,GAAO6W,OAASD,EAEZle,EACF,MAAMA,EACV,MAEA,IAAK,MACH,IAAIof,EAAW3N,EAAS1L,KAAKiB,KACzBA,GAAQyK,EAAS1L,KAAKiB,UAAY6E,OAAO4F,EAAS1L,KAAK0O,oBAAsBqI,GAAWrC,OAE5F,IAAK,IAAI4D,KAAK5M,EAAS1L,KAAKsO,QACtB5C,EAAS1L,KAAKsO,QAAQgK,IACxBrX,EAAKlF,KAAK2P,EAAS1L,KAAKsO,QAAQgK,IAEpC1Y,EAAO+Z,gBAAgB1Y,GAAM,EAAM,SAAU6B,EAASnB,EAASxE,GAS7D,GARA2F,EAAQ/C,QAAU,SAAUjC,GAC1B,OAAO2Y,GAAevY,KAAK0B,EAAQ9B,EAAKX,EAAOkF,KAGjDlF,EAAOkI,SACPlI,EAAO2F,QAAUA,GAGZ4I,EAAS1L,KAAK2O,qBAAuB0K,EACxC,IAAK,IAAIxd,EAAI,EAAGA,EAAIwd,EAAShe,OAAQQ,IACnCiH,EAAQuW,EAASxd,IAErB,IAAIigB,EAAWlF,GAAYzZ,EAAOkF,IAC9B0Z,GACFpa,QAASA,EACTqa,MAAOlZ,EAASnB,EAASxE,EAAQ2e,EAASzF,SAAUyF,EAAShF,QAASvV,GAAQA,KAG5E0a,EAAa,6EAGjB,GAAIvQ,EAAS1L,KAAKsO,QAChB,IAAK,IAAIgK,KAAK5M,EAAS1L,KAAKsO,QAC1ByN,EAAaC,KAAKjgB,KAAK+G,EAAQ4I,EAAS1L,KAAKsO,QAAQgK,KACrD2D,GAAc,KAAO3D,EAIzB,IAAIF,EAAS7W,GAAO6W,OACpB7W,GAAO6W,YAAS5c,EAChB+F,GAAOwa,aAAeA,EAEtBrH,EAASuH,EAAa,MAAQvH,EAAO3a,QAAQmiB,GAAe,IAAM,uDAElE,IAAIjiB,EAAM8b,GAASnW,EAAQ8U,EAAQhJ,EAAS1L,KAAKwO,UAAW1Q,EAAK4N,EAAS1L,KAAKgH,UAAW0E,EAAS1L,KAAKuO,OAAO,GAC/G,GAAItU,EACF,MAAMA,EAER2f,GAAgBlO,EAAU/J,GAE1BJ,GAAOwa,kBAAevgB,EACtB+F,GAAO6W,OAASA,IAElBsD,EAAatX,IACf,MAEA,IAAK,SACCnD,EAAOyK,EAAS1L,KAAKiB,SACzB,IAAK,IAAIqX,KAAK5M,EAAS1L,KAAKsO,QAAS,CACnC,IAAI6N,EAAKzQ,EAAS1L,KAAKsO,QAAQgK,GAC3B6D,GACFlb,EAAKlF,KAAKogB,GAGdvc,EAAO+Z,gBAAgB1Y,GAAM,EAAO,SAAU6B,EAASnB,EAASxE,GAC9D,IAAImR,EACJ,GAAI5C,EAAS1L,KAAKsO,QAAS,CACzBA,KACA,IAAK,IAAIgK,KAAK5M,EAAS1L,KAAKsO,QACtB5C,EAAS1L,KAAKsO,QAAQgK,KACxBhK,EAAQgK,GAAKxV,EAAQ4I,EAAS1L,KAAKsO,QAAQgK,KAGjD,IAAI8D,EAAa1Q,EAAS1L,KAAK2B,QAE3Bya,IACF1H,GAAU,KAAOkD,GAAa,KAAOwE,EAAa,QAAUA,EAAa,KAE3E,IAAIC,EAAiBrE,GAAc7a,EAAOkF,GAAI+Z,EAAY9N,EAAS5C,EAAS1L,KAAKyO,mBAC7ExU,EAAM8b,GAASnW,EAAQ8U,EAAQhJ,EAAS1L,KAAKwO,UAAW1Q,EAAK4N,EAAS1L,KAAKgH,UAAW0E,EAAS1L,KAAKuO,OAAO,GAE/G,GAAItU,EACF,MAAMA,EAER,IAAI0B,EAAS0gB,IAEb,OADAzC,GAAgBlO,EAAU/P,GACnBA,IAET+f,EAAatX,IACf,MAEA,QACE,MAAM,IAAI/G,UAAU,0BAA4BqO,EAAS1L,KAAKgO,OAAS,UAAYlQ,EAAM,MAAiC,QAAzB4N,EAAS1L,KAAKgO,OAAmB,2BAA6B,KAGnK,IAAK0N,EACH,MAAM,IAAIrhB,MAAM,UAAYyD,EAAM,gBAAkB4N,EAAS1L,KAAKgO,OAAS,oCAUjF,SAAgBoN,GAAqB1G,GACnC,IAAI4H,EAAwB5H,EAAOxY,MAAMqgB,IACzC,OAAOD,GAAgF,oBAAvD5H,EAAOzZ,OAAOqhB,EAAsB,GAAGjhB,OAAQ,IAiBjF,SAAgBogB,GAAoB/G,GAClC,OAAIA,EAAOxY,MAAMsgB,IACR,OAETC,GAAgBrF,UAAY,EAC5BD,GAAgBC,UAAY,EACxBD,GAAgBM,KAAK/C,IAAW+H,GAAgBhF,KAAK/C,GAChD,MAGF,UAGT,SAASyG,GAAmBxG,EAASnG,GACnC,IAAIkO,EAAe/H,EAAQ7M,MAAM,KAAK,GAGjC0G,EAAUmO,MAAQnO,EAAUmO,MAAQhI,IACvCnG,EAAUmO,KAAOD,EAAe,iBAG7BlO,EAAUoO,SAAWpO,EAAUoO,QAAQvhB,QAAU,KAAOmT,EAAUoO,QAAQ,IAAMpO,EAAUoO,QAAQ,KAAOjI,MAC5GnG,EAAUoO,SAAWF,IAGzB,SAASpB,GAAW1b,EAAQ8U,EAAQ5W,EAAK4N,EAAUtH,GACjD,IAAKxE,EAAOmU,WACV,MAAM,IAAI1W,UAAU,oJAGtB,GAAIqO,EAAS1L,KAAKiB,KAAM,CAEtB,IAAK,IADD4b,EAAa,GACRhhB,EAAI,EAAGA,EAAI6P,EAAS1L,KAAKiB,KAAK5F,OAAQQ,IAC7CghB,GAAc,WAAanR,EAAS1L,KAAKiB,KAAKpF,GAAK,MACrD6Y,EAASmI,EAAanI,EAIxB,OAAO9U,EAAOuQ,OAAOjS,KAAK0B,EAAQA,EAAOmU,YACxC5T,KAAK,SAAU4T,GAId,KAHAA,EAAaA,EAAWrT,cAAgBqT,GAGxBiH,UACd,MAAM,IAAI3gB,MAAMuF,EAAOmU,WAAa,sCAGtC,OAAIA,IAAerI,EAASX,aACnB2J,GAG8B,iBAA5BhJ,EAAS1L,KAAKwO,YACvB9C,EAAS1L,KAAKwO,UAAYsG,KAAK8G,MAAMlQ,EAAS1L,KAAKwO,YAErD9C,EAAS0O,WAAa1O,EAAS0O,aAC7B5gB,KAAMsE,EACN6W,QAAS7W,EACT4W,OAAQA,EACRhJ,SAAUA,EAAS1L,MAErB0L,EAAS1L,KAAKiB,KAAOyK,EAAS1L,KAAKiB,SAE5BnB,QAAQC,QAAQgU,EAAWiH,UAAU9c,KAAK0B,EAAQ8L,EAAS0O,WAAY1O,EAASuP,YACtF9a,KAAK,SAAUuU,GAEd,IAAIlG,EAAY9C,EAAS1L,KAAKwO,UAO9B,OANIA,GAAkC,iBAAdA,GACtB2M,GAAkBrd,EAAK0Q,GAEI,QAAzB9C,EAAS1L,KAAKgO,QAAoBoN,GAAqB1G,KACzDhJ,EAAS1L,KAAKgO,OAAS,YAElB0G,MAER,SAAUza,GACX,MAAM4G,EAAW5G,EAAK,0CAA4C6D,KAStE,SAASgf,GAAgB3U,EAAQ1G,EAAG7E,GAGlC,IAFA,IACImgB,EADAlV,EAASpG,EAAEqG,MAAM,KAEdD,EAAOxM,OAAS,GAErB8M,EAASA,EADT4U,EAAUlV,EAAOE,SACUI,EAAO4U,YAGZvhB,IAApB2M,EADJ4U,EAAUlV,EAAOE,WAEfI,EAAO4U,GAAWngB,GAGtB,SAASme,GAAgBrG,EAAQhJ,GAC/B,IAAIpJ,EAAOoS,EAAOxY,MAAM8gB,IACxB,GAAK1a,EAKL,IAAK,IAFD2a,EAAY3a,EAAK,GAAGpG,MAAMghB,IAErBrhB,EAAI,EAAGA,EAAIohB,EAAU5hB,OAAQQ,IAAK,CACzC,IAAIkhB,EAAUE,EAAUphB,GACpB2M,EAAMuU,EAAQ1hB,OAEdF,EAAY4hB,EAAQ9hB,OAAO,EAAG,GAIlC,GAHkC,KAA9B8hB,EAAQ9hB,OAAOuN,EAAM,EAAG,IAC1BA,IAEe,KAAbrN,GAAiC,KAAbA,EAAxB,CAGA,IAAIgiB,EAAaJ,EAAQ9hB,OAAO,EAAG8hB,EAAQ1hB,OAAS,GAChD+hB,EAAWD,EAAWliB,OAAO,EAAGkiB,EAAWjiB,QAAQ,MAEvD,GAAIkiB,EAAU,CACZ,IAAIC,EAAYF,EAAWliB,OAAOmiB,EAAS/hB,OAAS,EAAG8hB,EAAW9hB,OAAS+hB,EAAS/hB,OAAS,GAE5E,SAAb+hB,IACFA,EAAW,UAEmC,OAA5CA,EAASniB,OAAOmiB,EAAS/hB,OAAS,EAAG,IACvC+hB,EAAWA,EAASniB,OAAO,EAAGmiB,EAAS/hB,OAAS,GAChDqQ,EAAS1L,KAAKod,GAAY1R,EAAS1L,KAAKod,OACxC1R,EAAS1L,KAAKod,GAAUrhB,KAAKshB,IAGT,QAAbD,GACPN,GAAgBpR,EAAS1L,KAAMod,EAAUC,QAI3C3R,EAAS1L,KAAKmd,IAAc,ICjhBlC,SAASG,KACPrf,EAAeC,KAAKnB,MAGpBA,KAAKwgB,WAGLxgB,KAAK0P,OAGL1P,KAAK0O,KACHzG,QAASqD,GACThD,SAEA0L,sBACArD,qBACAjF,OACA8C,YACAuI,YACAxR,QACAsR,WAEAN,YAAY,EAEZS,gBAAYvY,EACZgiB,iBAGAxZ,UAAU,EACVsH,aAAa,EAGb8H,MAAM,GAIRrW,KAAK0gB,UAAYA,GAEjB1gB,KAAKmI,aAAewY,GAGpB3gB,KAAKC,SAAS6F,IAAI,SAAU8Y,IAE5BtI,GAAcnV,KAAKnB,MAAM,GAAO,GAGhC4gB,GAAc5gB,MAIhB,SAAgBsW,GAAeuK,EAAcC,GAC3C9gB,KAAK0O,IAAQ6H,WAAasK,EAC1B7gB,KAAKC,SAAS6F,IAAI,cAAe0P,GAAYxV,KAAK8e,WAChDiC,QAAShkB,GACTikB,OAAQhhB,KAAKmI,aACboO,YAAauK,GAAaD,EAC1BI,IAAKH,IAAcD,EACnBrK,MAAOsK,EACPpd,SAAW,KA6Df,SAASwd,GAAare,EAAQse,GAC5Bra,EAAK3F,KAAK0B,EAAO6L,IAAS,YAAcyS,EAAS,wCAA0CA,GX7J7F,IA+BW7V,GA/BAvO,GAA8B,oBAAXsb,QAA8C,oBAAblP,SACpDzL,GAA4B,oBAAZ0jB,SAA2BA,QAAQC,UAAYD,QAAQC,SAASL,KAChF/jB,GAA+B,oBAAZmkB,SAAuD,iBAArBA,QAAQE,UAAyBF,QAAQE,SAASniB,MAAM,QAEpHoiB,GAA4B,oBAATC,KAAuBA,KAAOhd,OAMjD9H,GAA8B,oBAAXC,OAwBvB,GAAuB,oBAAZwM,UAA2BA,SAASsY,sBAG7C,KAFAnW,GAAUnC,SAASmC,SAEL,CACZ,IAAIoW,GAAQvY,SAASsY,qBAAqB,QAC1CnW,GAAUoW,GAAM,IAAMA,GAAM,GAAGnY,MAAQ8O,OAAOsJ,SAASpY,UAG/B,oBAAZoY,WACdrW,GAAUqW,SAASpY,MAIrB,GAAI+B,GAAS,CAEX,IAAIsW,IADJtW,GAAUA,GAAQP,MAAM,KAAK,GAAGA,MAAM,KAAK,IAClBpM,YAAY,MACjB,IAAhBijB,KACFtW,GAAUA,GAAQpN,OAAO,EAAG0jB,GAAa,QAExC,CAAA,GAAuB,oBAAZR,UAA2BA,QAAQS,IAMjD,MAAM,IAAIvhB,UAAU,0BALpBgL,GAAU,WAAarO,GAAY,IAAM,IAAMmkB,QAAQS,MACnD5kB,KACFqO,GAAUA,GAAQtO,QAAQ,MAAO,MAOD,MAAhCsO,GAAQA,GAAQhN,OAAS,KAC3BgN,IAAW,KAKb,IAAIlO,GAAwC,KAA9B,IAAIE,MAAM,EAAG,KAAKD,SEpE5B0T,GAAkBhO,QAAQC,UA4C9BjD,EAAO6G,UAAUkb,YAAc/hB,EAS/BA,EAAO6G,UAAUwM,OAAS,SAAUrS,EAAKghB,GACvC,GAAmB,iBAARhhB,EACT,MAAM,IAAIT,UAAU,2DAEtB,IAAIuC,EAAS7C,KACb,OAAO+Q,GACN3N,KAAK,WACJ,OAAOP,EAAOmf,IAAqBjhB,EAAKghB,KAEzC3e,KAAKjD,GAEL0D,MAAM,SAAU3G,GACf,MAAM4G,EAAW5G,EAAK,WAAa6D,GAAOghB,EAAS,SAAWA,EAAS,QAI3E,IAAIE,GAAUliB,EAAOiD,QAAUxG,EAAa,WAWxCwlB,GAAsBjiB,EAAO6C,mBAAqBpG,EAAa,sBAInEuD,EAAO6G,UAAUob,IAAuB,SAAUjhB,EAAKghB,GACrD,IAAIlf,EAAS7C,KACb,OAAO6C,EAAOG,QAAQjC,EAAKghB,GAC1B3e,KAAK,SAAUiI,GACd,OAAOxI,EAAO5C,SAASgB,IAAIoK,MAU/BtL,EAAO6G,UAAU5D,QAAU,SAAUjC,EAAKghB,GACxC,IAAIlf,EAAS7C,KACb,OAAO+Q,GACN3N,KAAK,WACJ,OAAOP,EAAOof,IAASlhB,EAAKghB,KAE7B3e,KAAK7C,GACLsD,MAAM,SAAU3G,GACf,MAAM4G,EAAW5G,EAAK,aAAe6D,GAAOghB,EAAS,OAASA,EAAS,QAwB3E,IAAIG,GAAoC,oBAAXvlB,QAA0BA,OAAO4C,SAC1DkB,GAAWjE,EAAa,YAKxB0lB,KAEFhiB,EAAS0G,UAAUjK,OAAO4C,UAAY,WACpC,OAAOS,KAAKmiB,UAAUxlB,OAAO4C,aAI/BW,EAAS0G,UAAUub,QAAU,WAC3B,IAAIliB,EAAWD,KAAKS,IACpB,OAAOrB,EAAYM,OAAOD,KAAKQ,GAAUyL,IAAI,SAAU3K,GACrD,OAAQA,EAAKd,EAASc,SAM5Bb,EAAS0G,UAAUnH,KAAO,WACxB,OAAOL,EAAYM,OAAOD,KAAKO,KAAKS,OAGtCP,EAAS0G,UAAUtH,OAAS,WAC1B,IAAIW,EAAWD,KAAKS,IACpB,OAAOrB,EAAYM,OAAOD,KAAKQ,GAAUyL,IAAI,SAAU3K,GACrD,OAAOd,EAASc,OAIpBb,EAAS0G,UAAU3F,IAAM,SAAUF,GACjC,OAAOf,KAAKS,IAAUM,IAGxBb,EAAS0G,UAAUd,IAAM,SAAU/E,EAAKqhB,GACtC,KAAMA,aAAqB/hB,GACzB,MAAM,IAAI/C,MAAM,6DAElB,OADA0C,KAAKS,IAAUM,GAAOqhB,EACfpiB,MAGTE,EAAS0G,UAAUsJ,IAAM,SAAUnP,GACjC,OAAOrB,OAAO8B,eAAeL,KAAKnB,KAAKS,IAAWM,IAGpDb,EAAS0G,UAAUvF,OAAS,SAAUN,GACpC,QAAIrB,OAAO8B,eAAeL,KAAKnB,KAAKS,IAAWM,YACtCf,KAAKS,IAAUM,IACf,IAUX,IAAIH,GAAcpE,EAAa,cAgC/B6D,EAAgBuG,UAAYlH,OAAO2iB,OAAO,MAEpB,oBAAX1lB,QAA0BA,OAAOgK,aAC1CjH,OAAOiB,eAAeN,EAAgBuG,UAAWjK,OAAOgK,aACtD9G,MAAO,WCtNX,IAAI6B,GAAoBlF,EAAa,qBA+BrC0E,EAAe0F,UAAYlH,OAAO2iB,OAAOtiB,EAAO6G,WAChD1F,EAAe0F,UAAUkb,YAAc5gB,EAEvC,IAAIqC,GAAcrC,EAAeiC,YAAc3G,EAAa,eAG5D0E,EAAe0F,UAAU1F,EAAe8B,QAAUjD,EAAOiD,SAAW,SAAUjC,EAAK+B,GACjF,OAAO/E,EAAkBgD,EAAK+B,GAAawI,KAG7CpK,EAAe0F,UAAUrD,IAAe,SAAUxC,EAAKsG,KAyDvDnG,EAAe0F,UAAU7G,EAAO6C,oBAAsB,SAAU7B,EAAK+B,GACnE,IAAID,EAAS7C,KACT8B,EAAQ9B,KAAK0B,IACbzB,EAAWD,KAAKC,SAASQ,IAE7B,OAAOmC,EAAmBC,EAAQ9B,EAAK+B,EAAW7C,EAAU6B,GAC3DsB,KAAK,SAAUga,GACd,GAAIA,aAAwB/c,EAC1B,OAAO+c,EAMT,IAHWA,EAAa3b,WAGb,CACT,GAAI2b,EAAahd,OACf,OAAOgd,EAAahd,OACtB,MAAMgd,EAAalb,UAGrB,OAAIkb,EAAa3b,WAAWkB,OACnB8C,EAAe5C,EAAQua,EAAcA,EAAa3b,WAAYxB,EAAU6B,OAAOrD,GAEjFoG,EAAgBhC,EAAQua,EAAcA,EAAa3b,WAAYxB,EAAU6B,GAAQsb,IACvFha,KAAK,WACJ,OAAOqC,EAAe5C,EAAQua,EAAcA,EAAa3b,WAAYxB,EAAU6B,OAAOrD,QAsT5FyC,EAAe0F,UAAUiB,SAAW,SAAU9G,EAAKmD,EAAMG,GACvD,IAAIvC,EAAQ9B,KAAK0B,SAGDjD,IAAZ4F,EACFvC,EAAMH,cAAgBZ,EAAKmD,OAAMzF,IAKtBqD,EAAMP,QAAQR,IAAQc,EAAiBC,EAAOf,OAAKtC,IACzDsD,cAAgBmC,EAAMG,OAAS5F,IAOxCyC,EAAe0F,UAAUgW,gBAAkB,SAAU7b,EAAKmD,EAAM5B,EAAkBD,GAChF,IAAIP,EAAQ9B,KAAK0B,IAGE,iBAARX,EACTe,EAAMH,cAAgBZ,EAAKmD,EAAM5B,IAKtBR,EAAMP,QAAQR,IAAQc,EAAiBC,EAAOf,OAAKtC,IACzDsD,cAAgBmC,EAAM5B,EAAkBD,IAiBjDsC,EAAiBiC,UAAUwM,OAAS,SAAUrS,GAG5C,OAFIf,KAAK6C,OAAOjB,OACd5B,KAAK6C,OAAOoB,MAAMjE,KAAKe,KAAKoD,YAAYnF,KAAK+B,GACxCf,KAAK6C,OAAOuQ,OAAOrS,EAAKf,KAAKe,MAqJtC,IAAIoF,MACAzG,OAAO4iB,QACT5iB,OAAO4iB,OAAOnc,ICnoBT,IAeHO,GAyDAwB,GAxEO6I,GAAkBhO,QAAQC,UAG1B4b,GAAc,IAAIve,MAmBlBqO,GAASlS,EAAa,iBACtBkT,GAAWlT,EAAa,YAIxBgO,GAA6B,oBAAX6N,QAA0C,oBAATmJ,MAAiD,oBAAlB1X,cAkGzFb,IAAkB,EAAOC,IAAmB,EA6ChD,GA5CInM,IACF,WACE,IAAIwlB,EAAUpZ,SAASC,cAAc,QAAQmZ,QAC7C,GAAIA,GAAWA,EAAQC,SAAU,CAC/BtZ,IAAmB,EACnB,IACED,GAAkBsZ,EAAQC,SAAS,WAErC,MAAOpc,SAoCTrJ,GAAW,CACb,IAAIqN,MACAgO,GAAUC,OAAOD,QACrBC,OAAOD,QAAU,SAAwBrR,EAAK6C,GAC5C,IAAK,IAAI9K,EAAI,EAAGA,EAAIsL,GAAe9L,OAAQQ,IACzC,GAAIsL,GAAetL,GAAG8K,MAAQA,EAG9B,YADAQ,GAAetL,GAAG5B,IAAI6J,GAGpBqR,IACFA,GAAQG,MAAMvY,KAAMwY,YA2G1B,IC1MIhL,GAqCAiV,GDqKOrI,GAAkB,iHCnKzBrO,GAAmC,oBAAnBgB,eAWpB2V,GARCD,GADmB,oBAATjB,WAA8C,IAAfA,KAAKnV,MAC9BT,EACRG,GACSC,EACU,oBAAZjG,SAA8C,oBAAZqb,QAChC7T,EAEAK,ECkhBdoG,MA2HAe,IAAiB,UAAW,OAAQ,MAAO,QAAS,aAAc,WA8ClEG,GAAqB,cClyBrBI,IAAkB,gBAAiB,aAAc,YAAa,cAAe,oBCpC7E8B,GAA8B,oBAAXE,OACvB,IACMF,IAAoD,SAAvC,IAAIE,OAAO,KAAKzQ,SAAS,YACxCuQ,IAAY,GAEhB,MAAOhR,GACLgR,IAAY,EAGd,IA8BI5N,GA2BA2P,GACAC,GAEAP,GA5DAxB,GAAkB,uDA8DlBuB,GAAc,EAWdM,IAAqB,EACrBnc,IAAgC,oBAAZoM,UAA2BA,SAASsY,uBACpDpJ,OAAOsK,QAAUtK,OAAOsK,OAAOrR,WAAasR,UAAUC,UAAU1jB,MAAM,eAC1E+Z,IAAqB,ICpFzB,IA8JIO,GA9JJmH,GAAe,SAAU/d,GAcvB,SAASkD,EAAS+c,EAAOC,EAAUC,EAASC,GAE1C,GAAqB,iBAAVH,KAAwBA,aAAiB9d,OAClD,OAAOe,EAAQwS,MAAM,KAAMvT,MAAM4B,UAAUyD,OAAOlJ,KAAKqX,UAAW,EAAGA,UAAUla,OAAS,IAK1F,GAFqB,iBAAVwkB,GAA0C,mBAAbC,IACtCD,GAASA,MACPA,aAAiB9d,OAWhB,CAAA,GAAqB,iBAAV8d,EAAoB,CAClC,IAAIxT,EAAazM,EAAO8M,eAAemT,EAAOG,GAC1C7iB,EAASyC,EAAO5B,IAAIqO,GACxB,IAAKlP,EACH,MAAM,IAAI9C,MAAM,sCAAwCwlB,EAAQ,QAAUxT,GAAc2T,EAAU,UAAYA,EAAU,KAAO,MACjI,MAAO,iBAAkB7iB,EAASA,EAAOuD,aAAevD,EAIxD,MAAM,IAAIE,UAAU,mBAlBpB,IAAK,IADD4iB,KACKpkB,EAAI,EAAGA,EAAIgkB,EAAMxkB,OAAQQ,IAChCokB,EAAgBlkB,KAAK6D,EAAOuQ,OAAO0P,EAAMhkB,GAAImkB,IAC/ClgB,QAAQkC,IAAIie,GAAiB9f,KAAK,SAAU+f,GACtCJ,GACFA,EAASxK,MAAM,KAAM4K,IACtBH,GAgBP,SAAS3H,EAAQ5e,EAAMyH,EAAMkf,GA2C3B,SAAS/gB,EAASghB,EAAKze,EAASxE,GAE9B,IAAK,IADDkjB,KACKxkB,EAAI,EAAGA,EAAIoF,EAAK5F,OAAQQ,IAC/BwkB,EAAUtkB,KAAKqkB,EAAInf,EAAKpF,KAa1B,GAXAsB,EAAOmjB,IAAMnjB,EAAOkF,GAEpBlF,EAAOgO,OAAS/H,GAGK,IAAjBmd,GACFF,EAAUjZ,OAAOmZ,EAAa,EAAGpjB,IAEb,IAAlBqjB,GACFH,EAAUjZ,OAAOoZ,EAAc,EAAG7e,IAEd,IAAlBgX,EAAqB,CACvB,IAAI8H,EAAoB,SAAUZ,EAAOC,EAAUC,GACjD,MAAqB,iBAAVF,GAA0C,mBAAbC,EAC/BM,EAAIP,GACN/c,EAAQ5E,KAAK0B,EAAQigB,EAAOC,EAAUC,EAAS5iB,EAAOkF,KAE/Doe,EAAkBC,MAAQ,SAAUlnB,GAClC,OAAOoG,EAAOgN,cAAcpT,EAAM2D,EAAOkF,KAE3Cge,EAAUjZ,OAAOuR,EAAc,EAAG8H,GAIpC,IAAIE,EAAapf,GAAOuB,QACxBvB,GAAOuB,QAAUA,EAEjB,IAAInH,EAASwkB,EAAQ7K,OAAwB,IAAlBkL,EAAsBjf,GAASI,EAAS0e,GAEnE9e,GAAOuB,QAAU6d,OAEK,IAAXhlB,IACTwB,EAAOwE,QAAUhG,GA/ED,iBAATnC,IACT2mB,EAAUlf,EACVA,EAAOzH,EACPA,EAAO,MAGHyH,aAAgBc,QACpBoe,EAAUlf,EACVA,GAAQ,UAAW,UAAW,UAAUmG,OAAO,EAAG+Y,EAAQ9kB,SAGrC,mBAAZ8kB,IACTA,EAAU,SAAWA,GACnB,OAAO,WAAa,OAAOA,IAC1BA,IAEA3mB,GACC8f,KACFrY,EAAOA,EAAK6E,OAAOwT,IACnBA,QAAc9d,GAKlB,IAAImd,EAAc6H,EAAcD,GAEkB,KAA7C5H,EAAe1X,EAAK/F,QAAQ,cAE/B+F,EAAKmG,OAAOuR,EAAc,GAIrBnf,IACHyH,EAAOA,EAAK6E,OAAO4S,GAAcyH,EAAQvc,WAAY+U,OAGP,KAA7C6H,EAAevf,EAAK/F,QAAQ,aAC/B+F,EAAKmG,OAAOoZ,EAAc,IAEoB,KAA3CD,EAActf,EAAK/F,QAAQ,YAC9B+F,EAAKmG,OAAOmZ,EAAa,GA2CtB/mB,GAIHoG,EAAO+Z,gBAAgBngB,EAAMyH,GAAM,EAAO7B,GAStCoa,IACFA,QAAkBhe,EAClBie,IAAuB,GAEfA,KACRD,IAAmBvY,EAAM7B,KAjB3BQ,EAAO+Z,gBAAgB1Y,GAAM,EAAOsY,GAAcJ,GAAoB/Z,GAAWA,GAjIrFQ,EAAOiD,IAAI,gBAAiBjD,EAAOic,WACjCpF,eAAgBA,GAAemK,KAAKhhB,GACpCgX,YAAaA,MAGfhX,EAAOiD,IAAI,mBAAoBjD,EAAOic,WACpC7D,cAAeA,MAgJjBI,EAAOyI,OAEPjhB,EAAOoa,UAAY5B,EACnBxY,EAAOkhB,WAAahe,GAKA,oBAAXsS,QAA8C,oBAAblP,UAA4BkP,OAAOsJ,WAC7ElI,GAAekI,SAASqC,SAAW,KAAOrC,SAASsC,UAAYtC,SAASuC,KAAO,IAAMvC,SAASuC,KAAO,KAmCvG,IAyDI1I,GA2IAiB,GACAF,GClYOoE,GD6LPrG,GAAe,oDACfC,GAAc,mEAqDdO,IAAsB,KAAM,iBAAkB,eAAgB,gBAAiB,SAAU,eAAgB,WAC3G,wBAAyB,oBAAqB,kBAAmB,kBAAmB,mBAkGlFoB,GAAgB,kCAChBC,GAAiB,6CACjBL,GAAiB,eACjBC,GAAU,aAEVE,MAqCAS,IAAuB,EAGvBF,IAAc,ECtYdQ,IAAsBjgB,IAAayN,KAAkC,oBAAdoY,WAA6BA,UAAUC,YAAcD,UAAUC,UAAU1jB,MAAM,iBAInH,oBAAZ4G,SAA8C,oBAAZqb,SAA4BA,QAAQL,UAC/EJ,GAAc5a,SA+YhB,IChZI2a,GDgZA7F,GAA4B,oBAAR2G,KAAsB,OAAS,SAG5ClD,GAAW,gLAElBkB,GAA6B,0FAS7BC,GAAW,0RAGXC,GAAkB,8HAMlBP,GAAgB,UAmFhBc,GAAY,uFACZE,GAAgB,wECxfpB,GAAuB,oBAAZpd,QACT,MAAM,IAAIzF,MAAM,sCAElB,GAAwB,oBAAb6L,SAA0B,CACnC,IAAIgb,GAAUhb,SAASsY,qBAAqB,UACxC2C,GAAYD,GAAQA,GAAQ7lB,OAAS,GACrC6K,SAASkb,gBAAkBD,GAAUE,OAASF,GAAUzZ,SAC1DyZ,GAAYjb,SAASkb,eAEvB3D,GAAY0D,IAAaA,GAAUxa,SAGhC,GAA6B,oBAAlBE,cACd,IACE,MAAM,IAAIxM,MAAM,KAElB,MAAO8I,GACLA,EAAE5I,MAAMR,QAAQ,iCAAkC,SAASyJ,EAAGjB,GAC5Dkb,GAAYlb,QAKa,oBAAf+e,aACd7D,GAAY6D,YAoDd,IAAW/O,GAaX+K,GAAe3Z,UAAYlH,OAAO2iB,OAAOnhB,EAAe0F,WAExD2Z,GAAe3Z,UAAUkb,YAAcvB,GAGvCA,GAAe3Z,UAAU2Z,GAAevd,QAAU9B,EAAe8B,SAAWud,GAAe3Z,UAAU6H,UAAYA,EAEjH8R,GAAe3Z,UAAU3D,KAAO,SAAUlC,EAAK+B,GAE7C,OADAgE,EAAK3F,KAAKnB,KAAK0O,IAAS,8BACjB1O,KAAKoT,OAAOrS,EAAK+B,IAI1Byd,GAAe3Z,UAAU+I,eAAiB4Q,GAAe3Z,UAAUiJ,cAAgB0Q,GAAe3Z,UAAU4d,YAAc3U,EAE1H0Q,GAAe3Z,UAAU2Z,GAAepd,YAAcjC,EAAeiC,aAAeA,GAEpFod,GAAe3Z,UAAUwH,OAAS+H,GAClCoK,GAAe3Z,UAAUmP,UAAYA,GAErCwK,GAAe3Z,UAAUpC,OAASA,GAElC+b,GAAe3Z,UAAUwM,OAAS,WAChC,OAAOlS,EAAe0F,UAAUwM,OAAOmF,MAAMvY,KAAMwY,WAClDpV,KAAK,SAAUqD,GACd,MAAO,iBAAkBA,EAAIA,EAAE9C,aAAe8C,KAOlD,IAAK,IAHMwP,IAAe,UAAW,MAAO,QAAS,WAAY,qBAAsB,WAAY,OAAQ,UAAW,aAAc,WAAY,cAAe,aAAc,QAEzKwO,GAA4B,oBAAVC,MACb5lB,GAAI,EAAGA,GAAImX,GAAY3X,OAAQQ,MAAK,SAAWkX,GACtDtW,OAAOiB,eAAe4f,GAAe3Z,UAAWoP,GAC9C/U,IAAK,WACH,IAAImU,EAAMS,GAAc7V,KAAK0O,IAASsH,GAWtC,OATIyO,IAA2B,iBAARrP,IACrBA,EAAM,IAAIsP,MAAMtP,GACdtP,IAAK,SAAUsF,EAAQuZ,GACrB,MAAM,IAAIrnB,MAAM,uBAAyB0Y,EAAa,KAAO2O,EAAS,sCAAwC3O,EAAa,QAAU2O,EAAS,2BAM7IvP,GAETtP,IAAK,SAAUrJ,GACb,MAAM,IAAIa,MAAM,qBAAuB0Y,EAAa,6DAA+DA,EAAa,kBAGnIC,GAAYnX,KAQfyhB,GAAe3Z,UAAUvF,OAAS,SAAUN,GAE1C,OADAmgB,GAAalhB,KAAM,UACZA,KAAKC,SAASoB,OAAON,IAE9Bwf,GAAe3Z,UAAU3F,IAAM,SAAUF,GAEvC,OADAmgB,GAAalhB,KAAM,OACZA,KAAKC,SAASgB,IAAIF,IAE3Bwf,GAAe3Z,UAAUsJ,IAAM,SAAUnP,GAEvC,OADAmgB,GAAalhB,KAAM,OACZA,KAAKC,SAASiQ,IAAInP,IAE3Bwf,GAAe3Z,UAAUd,IAAM,SAAU/E,EAAKX,GAE5C,OADA8gB,GAAalhB,KAAM,OACZA,KAAKC,SAAS6F,IAAI/E,EAAKX,IAEhCmgB,GAAe3Z,UAAUkY,UAAY,SAAUvY,GAC7C,OAAO,IAAIlG,EAAgBkG,IAE7Bga,GAAe3Z,UAAUJ,SAAWA,EAGpC+Z,GAAe3Z,UAAUiB,SAAW,SAAU9G,EAAKmD,EAAMG,GAGvD,MAFmB,iBAARtD,IACTA,EAAM4O,EAAexO,KAAKnB,KAAMA,KAAK0O,IAAS3N,IACzCG,EAAe0F,UAAUiB,SAAS1G,KAAKnB,KAAMe,EAAKmD,EAAMG,IAGjEkc,GAAe3Z,UAAUgW,gBAAkB,SAAU7b,EAAKmD,EAAM5B,EAAkBD,GAGhF,MAFmB,iBAARtB,IACTA,EAAM4O,EAAexO,KAAKnB,KAAMA,KAAK0O,IAAS3N,IACzCG,EAAe0F,UAAUgW,gBAAgBzb,KAAKnB,KAAMe,EAAKmD,EAAM5B,EAAkBD,IC9L1Fke,GAAe3Z,UAAUge,QAAU,cAEnC,IAAI9L,GAAS,IAAIyH,IAGbxjB,IAAayN,MACfhG,GAAOuU,SAAWvU,GAAOsU,OAASA,IAEd,oBAAX1Y,QAA0BA,OAAOwE,UAC1CxE,OAAOwE,QAAUkU;ACZnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../../js/footer-7b94bdc4c5.js","sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  var slashIndex = baseURI.lastIndexOf('/');\n  if (slashIndex !== -1)\n    baseURI = baseURI.substr(0, slashIndex + 1);\n}\nelse if (typeof process !== 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError (relUrl, parentUrl) {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  relUrl = relUrl.trim();\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\n      relUrl.length === 1  && (relUrl += '/')) ||\n      firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = -1;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== -1) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substring(segmentIndex, i + 1));\n          segmentIndex = -1;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && segmented[i + 2] === '/') {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/') {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        // trailing . or .. segment\n        if (i === segmented.length)\n          output.push('');\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== -1)\n      output.push(segmented.substr(segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace, REGISTRY }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { Loader, ModuleNamespace, REGISTRY } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, caching load and eval errors separately\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  var registryDelete = this.registry.delete;\n  this.registry.delete = function (key) {\n    var deleted = registryDelete.call(this, key);\n\n    // also delete from register registry if linked\n    if (records.hasOwnProperty(key) && !records[key].linkRecord) {\n      delete records[key];\n      deleted = true;\n    }\n\n    return deleted;\n  };\n\n  var records = {};\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: records\n  };\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    loadError: undefined,\n    evalError: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // indicates if the load and all its dependencies are instantiated and linked\n      // but not yet executed\n      // mostly just a performance shortpath to avoid rechecking the promises above\n      linked: false\n\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = this.registry[REGISTRY];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    var link = instantiated.linkRecord;\n\n    // if already beaten to done, return\n    if (!link) {\n      if (instantiated.module)\n        return instantiated.module;\n      throw instantiated.evalError;\n    }\n\n    if (instantiated.linkRecord.linked)\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n\n    return instantiateDeps(loader, instantiated, instantiated.linkRecord, registry, state, [instantiated])\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  }\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    if (load.loadError)\n      return Promise.reject(load.loadError);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = link.moduleObj.__useDefault = {};\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    // shortpath to instantiateDeps\n    if (!link.dependencies.length) {\n      link.linked = true;\n      if (loader.trace)\n        traceLoad(loader, load, link);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    load.linkRecord = undefined;\n    throw load.loadError = load.loadError || addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = resolvedKey;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    if (load && load.loadError)\n      throw load.loadError;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    dynamicDeps: [],\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var definedExports = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    if (typeof name === 'object') {\n      var changed = false;\n      for (var p in name) {\n        value = name[p];\n        if (p !== '__useDefault' && (!(p in moduleObj) || moduleObj[p] !== value)) {\n          changed = true;\n          moduleObj[p] = value;\n        }\n      }\n      if (changed === false)\n        return value;\n    }\n    else {\n      if ((definedExports || name in moduleObj) && moduleObj[name] === value)\n        return value;\n      moduleObj[name] = value;\n    }\n\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports) {\n    link.moduleObj = moduleObj = declared.exports;\n    definedExports = true;\n  }\n}\n\nfunction instantiateDeps (loader, load, link, registry, state, seen) {\n  return (link.depsInstantiatePromise || (link.depsInstantiatePromise = Promise.resolve()\n  .then(function () {\n    var depsInstantiatePromises = Array(link.dependencies.length);\n\n    for (var i = 0; i < link.dependencies.length; i++)\n      depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && link.depMap || (link.depMap = {}));\n\n    return Promise.all(depsInstantiatePromises);\n  })\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            if (instantiation.loadError)\n              throw instantiation.loadError;\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n  })))\n  .then(function () {\n    // now deeply instantiateDeps on each dependencyInstantiation that is a load record\n    var deepDepsInstantiatePromises = [];\n\n    for (var i = 0; i < link.dependencies.length; i++) {\n      var depLoad = link.dependencyInstantiations[i];\n      var depLink = depLoad.linkRecord;\n\n      if (!depLink || depLink.linked)\n        continue;\n\n      if (seen.indexOf(depLoad) !== -1) {\n        deepDepsInstantiatePromises.push(depLink.depsInstantiatePromise);\n        continue;\n      }\n      seen.push(depLoad);\n\n      deepDepsInstantiatePromises.push(instantiateDeps(loader, depLoad, depLoad.linkRecord, registry, state, seen));\n    }\n\n    return Promise.all(deepDepsInstantiatePromises);\n  })\n  .then(function () {\n    // as soon as all dependencies instantiated, we are ready for evaluation so can add to the registry\n    // this can run multiple times, but so what\n    link.linked = true;\n    if (loader.trace)\n      traceLoad(loader, load, link);\n\n    return load;\n  })\n  .catch(function (err) {\n    // throw up the instantiateDeps stack\n    link.depsInstantiatePromise = undefined;\n    throw addToError(err, 'Loading ' + load.key);\n  });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id, .key\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n  this.meta = {\n    url: key\n    // scriptElement: null\n  };\n}\n/*ContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};*/\nContextualLoader.prototype.import = function (key) {\n  if (this.loader.trace)\n    this.loader.loads[this.key].dynamicDeps.push(key);\n  return this.loader.import(key, this.key);\n};\n/*ContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};*/\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (load.evalError)\n    throw load.evalError;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err)\n    throw err;\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return module.__useDefault || module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLoad.evalError)\n          err = depLoad.evalError;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err) {\n        load.linkRecord = undefined;\n        load.evalError = addToError(err, 'Evaluating ' + load.key);\n        return load.evalError;\n      }\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = moduleObj.__useDefault = exports;\n        },\n        get: function () {\n          return moduleObj.__useDefault;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.default)\n        moduleObj.default = moduleObj.__useDefault = module.exports;\n\n      var moduleDefault = moduleObj.default;\n\n      // __esModule flag extension support via lifting\n      if (moduleDefault && moduleDefault.__esModule) {\n        for (var p in moduleDefault) {\n          if (Object.hasOwnProperty.call(moduleDefault, p))\n            moduleObj[p] = moduleDefault[p];\n        }\n      }\n    }\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n\n  if (err)\n    return load.evalError = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","import { resolveIfNotPlain } from 'es-module-loader/core/resolve.js';\nimport { baseURI, isBrowser, isWindows, addToError, global, createSymbol } from 'es-module-loader/core/common.js';\nimport RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { ModuleNamespace } from 'es-module-loader/core/loader-polyfill.js';\n\nexport { baseURI, isBrowser, isWindows, addToError, global, resolveIfNotPlain, ModuleNamespace }\n\nexport var resolvedPromise = Promise.resolve();\nexport function noop () {};\n\nexport var emptyModule = new ModuleNamespace({});\n\nexport function protectedCreateNamespace (bindings) {\n  if (bindings instanceof ModuleNamespace)\n    return bindings;\n\n  if (bindings && bindings.__esModule)\n    return new ModuleNamespace(bindings);\n\n  return new ModuleNamespace({ default: bindings, __useDefault: bindings });\n}\n\nvar hasStringTag;\nexport function isModule (m) {\n  if (hasStringTag === undefined)\n    hasStringTag = typeof Symbol !== 'undefined' && !!Symbol.toStringTag;\n  return m instanceof ModuleNamespace || hasStringTag && Object.prototype.toString.call(m) == '[object Module]';\n}\n\nexport var CONFIG = createSymbol('loader-config');\nexport var METADATA = createSymbol('metadata');\nexport var PLAIN_RESOLVE = createSymbol('plain-resolve');\nexport var PLAIN_RESOLVE_SYNC = createSymbol('plain-resolve-sync');\n\nexport var isWorker = typeof window === 'undefined' && typeof self !== 'undefined' && typeof importScripts !== 'undefined';\n\nexport function warn (msg, force) {\n  if (force || this.warnings && typeof console !== 'undefined' && console.warn)\n    console.warn(msg);\n}\n\nexport function checkInstantiateWasm (loader, wasmBuffer, processAnonRegister) {\n  var bytes = new Uint8Array(wasmBuffer);\n\n  // detect by leading bytes\n  // Can be (new Uint32Array(fetched))[0] === 0x6D736100 when working in Node\n  if (bytes[0] === 0 && bytes[1] === 97 && bytes[2] === 115) {\n    return WebAssembly.compile(wasmBuffer).then(function (m) {\n      var deps = [];\n      var setters = [];\n      var importObj = {};\n\n      // we can only set imports if supported (eg Safari doesnt support)\n      if (WebAssembly.Module.imports)\n        WebAssembly.Module.imports(m).forEach(function (i) {\n          var key = i.module;\n          setters.push(function (m) {\n            importObj[key] = m;\n          });\n          if (deps.indexOf(key) === -1)\n            deps.push(key);\n        });\n      loader.register(deps, function (_export) {\n        return {\n          setters: setters,\n          execute: function () {\n            _export(new WebAssembly.Instance(m, importObj).exports);\n          }\n        };\n      });\n      processAnonRegister();\n\n      return true;\n    });\n  }\n\n  return Promise.resolve(false);\n}\n\nvar parentModuleContext;\nexport function loadNodeModule (key, baseURL) {\n  if (key[0] === '.')\n    throw new Error('Node module ' + key + ' can\\'t be loaded as it is not a package require.');\n\n  if (!parentModuleContext) {\n    var Module = this._nodeRequire('module');\n    var base = decodeURI(baseURL.substr(isWindows ? 8 : 7));\n    parentModuleContext = new Module(base);\n    parentModuleContext.paths = Module._nodeModulePaths(base);\n  }\n  return parentModuleContext.require(key);\n}\n\nexport function extend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    a[p] = b[p];\n  }\n  return a;\n}\n\nexport function prepend (a, b) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    if (a[p] === undefined)\n      a[p] = b[p];\n  }\n  return a;\n}\n\n// meta first-level extends where:\n// array + array appends\n// object + object extends\n// other properties replace\nexport function extendMeta (a, b, _prepend) {\n  for (var p in b) {\n    if (!Object.hasOwnProperty.call(b, p))\n      continue;\n    var val = b[p];\n    if (a[p] === undefined)\n      a[p] = val;\n    else if (val instanceof Array && a[p] instanceof Array)\n      a[p] = [].concat(_prepend ? val : a[p]).concat(_prepend ? a[p] : val);\n    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')\n      a[p] = (_prepend ? prepend : extend)(extend({}, a[p]), val);\n    else if (!_prepend)\n      a[p] = val;\n  }\n}\n\nvar supportsPreload = false, supportsPrefetch = false;\nif (isBrowser)\n  (function () {\n    var relList = document.createElement('link').relList;\n    if (relList && relList.supports) {\n      supportsPrefetch = true;\n      try {\n        supportsPreload = relList.supports('preload');\n      }\n      catch (e) {}\n    }\n  })();\n\nexport function preloadScript (url) {\n  // fallback to old fashioned image technique which still works in safari\n  if (!supportsPreload && !supportsPrefetch) {\n    var preloadImage = new Image();\n    preloadImage.src = url;\n    return;\n  }\n\n  var link = document.createElement('link');\n  if (supportsPreload) {\n    link.rel = 'preload';\n    link.as = 'script';\n  }\n  else {\n    // this works for all except Safari (detected by relList.supports lacking)\n    link.rel = 'prefetch';\n  }\n  link.href = url;\n  document.head.appendChild(link);\n  document.head.removeChild(link);\n}\n\nfunction workerImport (src, resolve, reject) {\n  try {\n    importScripts(src);\n  }\n  catch (e) {\n    reject(e);\n  }\n  resolve();\n}\n\nif (isBrowser) {\n  var loadingScripts = [];\n  var onerror = window.onerror;\n  window.onerror = function globalOnerror (msg, src) {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].src !== src)\n        continue;\n      loadingScripts[i].err(msg);\n      return;\n    }\n    if (onerror)\n      onerror.apply(this, arguments);\n  };\n}\n\nexport function scriptLoad (src, crossOrigin, integrity, resolve, reject) {\n  // percent encode just \"#\" for HTTP requests\n  src = src.replace(/#/g, '%23');\n\n  // subresource integrity is not supported in web workers\n  if (isWorker)\n    return workerImport(src, resolve, reject);\n\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.charset = 'utf-8';\n  script.async = true;\n\n  if (crossOrigin)\n    script.crossOrigin = crossOrigin;\n  if (integrity)\n    script.integrity = integrity;\n\n  script.addEventListener('load', load, false);\n  script.addEventListener('error', error, false);\n\n  script.src = src;\n  document.head.appendChild(script);\n\n  function load () {\n    resolve();\n    cleanup();\n  }\n\n  // note this does not catch execution errors\n  function error (err) {\n    cleanup();\n    reject(new Error('Fetching ' + src));\n  }\n\n  function cleanup () {\n    for (var i = 0; i < loadingScripts.length; i++) {\n      if (loadingScripts[i].err === error) {\n        loadingScripts.splice(i, 1);\n        break;\n      }\n    }\n    script.removeEventListener('load', load, false);\n    script.removeEventListener('error', error, false);\n    document.head.removeChild(script);\n  }\n}\n\nexport function readMemberExpression (p, value) {\n  var pParts = p.split('.');\n  while (pParts.length)\n    value = value[pParts.shift()];\n  return value;\n}\n\n// separate out paths cache as a baseURL lock process\nexport function applyPaths (baseURL, paths, key) {\n  var mapMatch = getMapMatch(paths, key);\n  if (mapMatch) {\n    var target = paths[mapMatch] + key.substr(mapMatch.length);\n\n    var resolved = resolveIfNotPlain(target, baseURI);\n    if (resolved !== undefined)\n      return resolved;\n\n    return baseURL + target;\n  }\n  else if (key.indexOf(':') !== -1) {\n    return key;\n  }\n  else {\n    return baseURL + key;\n  }\n}\n\nfunction checkMap (p) {\n  var name = this.name;\n  // can add ':' here if we want paths to match the behaviour of map\n  if (name.substr(0, p.length) === p && (name.length === p.length || name[p.length] === '/' || p[p.length - 1] === '/' || p[p.length - 1] === ':')) {\n    var curLen = p.split('/').length;\n    if (curLen > this.len) {\n      this.match = p;\n      this.len = curLen;\n    }\n  }\n}\n\nexport function getMapMatch (map, name) {\n  if (Object.hasOwnProperty.call(map, name))\n    return name;\n\n  var bestMatch = {\n    name: name,\n    match: undefined,\n    len: 0\n  };\n\n  Object.keys(map).forEach(checkMap, bestMatch);\n\n  return bestMatch.match;\n}\n\n// RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339\nexport var cjsRequireRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.\"'])require\\s*\\(\\s*(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*')\\s*\\)/g;\n","import { isWindows } from './common.js';\n\n/*\n * Source loading\n */\nfunction fetchFetch (url, authorization, integrity, asBuffer) {\n  // fetch doesn't support file:/// urls\n  if (url.substr(0, 8) === 'file:///') {\n    if (hasXhr)\n      return xhrFetch(url, authorization, integrity, asBuffer);\n    else\n      throw new Error('Unable to fetch file URLs in this environment.');\n  }\n\n  // percent encode just \"#\" for HTTP requests\n  url = url.replace(/#/g, '%23');\n\n  var opts = {\n    // NB deprecate\n    headers: { Accept: 'application/x-es-module, */*' }\n  };\n\n  if (integrity)\n    opts.integrity = integrity;\n\n  if (authorization) {\n    if (typeof authorization == 'string')\n      opts.headers['Authorization'] = authorization;\n    opts.credentials = 'include';\n  }\n\n  return fetch(url, opts)\n  .then(function(res) {\n    if (res.ok)\n      return asBuffer ? res.arrayBuffer() : res.text();\n    else\n      throw new Error('Fetch error: ' + res.status + ' ' + res.statusText);\n  });\n}\n\nfunction xhrFetch (url, authorization, integrity, asBuffer) {\n  return new Promise(function (resolve, reject) {\n    // percent encode just \"#\" for HTTP requests\n    url = url.replace(/#/g, '%23');\n\n    var xhr = new XMLHttpRequest();\n    if (asBuffer)\n      xhr.responseType = 'arraybuffer';\n    function load() {\n      resolve(asBuffer ? xhr.response : xhr.responseText);\n    }\n    function error() {\n      reject(new Error('XHR error: ' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        // in Chrome on file:/// URLs, status is 0\n        if (xhr.status == 0) {\n          if (xhr.response) {\n            load();\n          }\n          else {\n            // when responseText is empty, wait for load or error event\n            // to inform if it is a 404 or empty file\n            xhr.addEventListener('error', error);\n            xhr.addEventListener('load', load);\n          }\n        }\n        else if (xhr.status === 200) {\n          load();\n        }\n        else {\n          error();\n        }\n      }\n    };\n    xhr.open(\"GET\", url, true);\n\n    if (xhr.setRequestHeader) {\n      xhr.setRequestHeader('Accept', 'application/x-es-module, */*');\n      // can set \"authorization: true\" to enable withCredentials only\n      if (authorization) {\n        if (typeof authorization == 'string')\n          xhr.setRequestHeader('Authorization', authorization);\n        xhr.withCredentials = true;\n      }\n    }\n\n    xhr.send(null);\n  });\n}\n\nvar fs;\nfunction nodeFetch (url, authorization, integrity, asBuffer) {\n  if (url.substr(0, 8) != 'file:///')\n    return Promise.reject(new Error('Unable to fetch \"' + url + '\". Only file URLs of the form file:/// supported running in Node.'));\n\n  fs = fs || require('fs');\n  if (isWindows)\n    url = url.replace(/\\//g, '\\\\').substr(8);\n  else\n    url = url.substr(7);\n\n  return new Promise(function (resolve, reject) {\n    fs.readFile(url, function(err, data) {\n      if (err) {\n        return reject(err);\n      }\n      else {\n        if (asBuffer) {\n          resolve(data);\n        }\n        else {\n          // Strip Byte Order Mark out if it's the leading char\n          var dataString = data + '';\n          if (dataString[0] === '\\ufeff')\n            dataString = dataString.substr(1);\n\n          resolve(dataString);\n        }\n      }\n    });\n  });\n}\n\nfunction noFetch () {\n  throw new Error('No fetch method is defined for this environment.');\n}\n\nvar fetchFunction;\n\nvar hasXhr = typeof XMLHttpRequest !== 'undefined';\n\nif (typeof self !== 'undefined' && typeof self.fetch !== 'undefined')\n fetchFunction = fetchFetch;\nelse if (hasXhr)\n  fetchFunction = xhrFetch;\nelse if (typeof require !== 'undefined' && typeof process !== 'undefined')\n  fetchFunction = nodeFetch;\nelse\n  fetchFunction = noFetch;\n\nexport default fetchFunction;\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { getMapMatch, readMemberExpression, extendMeta, addToError, resolveIfNotPlain,\n    baseURI, CONFIG, METADATA, applyPaths, resolvedPromise, getPackage } from './common.js';\nimport { setPkgConfig, createPackage } from './config.js';\nimport fetch from './fetch.js';\n\nexport function createMetadata () {\n  return {\n    pluginKey: undefined,\n    pluginArgument: undefined,\n    pluginModule: undefined,\n    packageKey: undefined,\n    packageConfig: undefined,\n    load: undefined\n  };\n}\n\nfunction getCoreParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n  }\n\n  return parentMetadata;\n}\n\nfunction getParentMetadata (loader, config, parentKey) {\n  var parentMetadata = createMetadata();\n\n  if (parentKey) {\n    // detect parent plugin\n    // we just need pluginKey to be truthy for package configurations\n    // so we duplicate it as pluginArgument - although not correct its not used\n    var parentPluginIndex;\n    if (config.pluginFirst) {\n      if ((parentPluginIndex = parentKey.lastIndexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(0, parentPluginIndex);\n    }\n    else {\n      if ((parentPluginIndex = parentKey.indexOf('!')) !== -1)\n        parentMetadata.pluginArgument = parentMetadata.pluginKey = parentKey.substr(parentPluginIndex + 1);\n    }\n\n    // detect parent package\n    parentMetadata.packageKey = getMapMatch(config.packages, parentKey);\n    if (parentMetadata.packageKey)\n      parentMetadata.packageConfig = config.packages[parentMetadata.packageKey];\n  }\n\n  return parentMetadata;\n}\n\nexport function normalize (key, parentKey) {\n  var config = this[CONFIG];\n\n  var metadata = createMetadata();\n  var parentMetadata = getParentMetadata(this, config, parentKey);\n\n  var loader = this;\n\n  return Promise.resolve()\n\n  // boolean conditional\n  .then(function () {\n    // first we normalize the conditional\n    var booleanIndex = key.lastIndexOf('#?');\n\n    if (booleanIndex === -1)\n      return Promise.resolve(key);\n\n    var conditionObj = parseCondition.call(loader, key.substr(booleanIndex + 2));\n\n    // in builds, return normalized conditional\n    /*if (this.builder)\n      return this.resolve(conditionObj.module, parentKey)\n      .then(function (conditionModule) {\n        conditionObj.module = conditionModule;\n        return key.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);\n      });*/\n\n    return resolveCondition.call(loader, conditionObj, parentKey, true)\n    .then(function (conditionValue) {\n      return conditionValue ? key.substr(0, booleanIndex) : '@empty';\n    });\n  })\n\n  // plugin\n  .then(function (key) {\n    var parsed = parsePlugin(config.pluginFirst, key);\n\n    if (!parsed)\n      return packageResolve.call(loader, config, key, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, false);\n\n    metadata.pluginKey = parsed.plugin;\n\n    return Promise.all([\n      packageResolve.call(loader, config, parsed.argument, parentMetadata && parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, true),\n      loader.resolve(parsed.plugin, parentKey)\n    ])\n    .then(function (normalized) {\n      metadata.pluginArgument = normalized[0];\n      metadata.pluginKey = normalized[1];\n\n      // don't allow a plugin to load itself\n      if (metadata.pluginArgument === metadata.pluginKey)\n        throw new Error('Plugin ' + metadata.pluginArgument + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');\n\n      return combinePluginParts(config.pluginFirst, normalized[0], normalized[1]);\n    });\n  })\n  .then(function (normalized) {\n    return interpolateConditional.call(loader, normalized, parentKey, parentMetadata);\n  })\n  .then(function (normalized) {\n    setMeta.call(loader, config, normalized, metadata);\n\n    if (metadata.pluginKey || !metadata.load.loader)\n      return normalized;\n\n    // loader by configuration\n    // normalizes to parent to support package loaders\n    return loader.resolve(metadata.load.loader, normalized)\n    .then(function (pluginKey) {\n      metadata.pluginKey = pluginKey;\n      metadata.pluginArgument = normalized;\n      return normalized;\n    });\n  })\n  .then(function (normalized) {\n    loader[METADATA][normalized] = metadata;\n    return normalized;\n  });\n}\n\n// normalization function used for registry keys\n// just does coreResolve without map\nexport function decanonicalize (config, key) {\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    var pluginKey = decanonicalize.call(this, config, parsed.plugin);\n    return combinePluginParts(config.pluginFirst, coreResolve.call(this, config, parsed.argument, undefined, false, false), pluginKey);\n  }\n\n  return coreResolve.call(this, config, key, undefined, false, false);\n}\n\nexport function normalizeSync (key, parentKey) {\n  var config = this[CONFIG];\n\n  // normalizeSync is metadataless, so create metadata\n  var metadata = createMetadata();\n  var parentMetadata = parentMetadata || getParentMetadata(this, config, parentKey);\n\n  var parsed = parsePlugin(config.pluginFirst, key);\n\n  // plugin\n  if (parsed) {\n    metadata.pluginKey = normalizeSync.call(this, parsed.plugin, parentKey);\n    return combinePluginParts(config.pluginFirst,\n        packageResolveSync.call(this, config, parsed.argument, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey),\n        metadata.pluginKey);\n  }\n\n  return packageResolveSync.call(this, config, key, parentMetadata.pluginArgument || parentKey, metadata, parentMetadata, !!metadata.pluginKey);\n}\n\nexport function coreResolve (config, key, parentKey, doMap, packageName) {\n  var relativeResolved = resolveIfNotPlain(key, parentKey || baseURI);\n\n  // standard URL resolution\n  if (relativeResolved)\n    return applyPaths(config.baseURL, config.paths, relativeResolved);\n\n  // plain keys not starting with './', 'x://' and '/' go through custom resolution\n  if (doMap) {\n    var mapMatch = getMapMatch(config.map, key);\n\n    if (mapMatch) {\n      key = config.map[mapMatch] + key.substr(mapMatch.length);\n\n      relativeResolved = resolveIfNotPlain(key, baseURI);\n      if (relativeResolved)\n        return applyPaths(config.baseURL, config.paths, relativeResolved);\n    }\n  }\n\n  if (this.registry.has(key))\n    return key;\n\n  if (key.substr(0, 6) === '@node/')\n    return key;\n\n  var trailingSlash = packageName && key[key.length - 1] !== '/';\n  var resolved = applyPaths(config.baseURL, config.paths, trailingSlash ? key + '/' : key);\n  if (trailingSlash)\n    return resolved.substr(0, resolved.length - 1);\n  return resolved;\n}\n\nfunction packageResolveSync (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  // ignore . since internal maps handled by standard package resolution\n  if (parentMetadata && parentMetadata.packageConfig && key[0] !== '.') {\n    var parentMap = parentMetadata.packageConfig.map;\n    var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n    if (parentMapMatch && typeof parentMap[parentMapMatch] === 'string') {\n      var mapped = doMapSync(this, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  var normalized = coreResolve.call(this, config, key, parentKey, true, true);\n\n  var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n  metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n  if (!metadata.packageKey)\n    return normalized;\n\n  if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n    metadata.packageKey = undefined;\n    return normalized;\n  }\n\n  metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n  var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n  return applyPackageConfigSync(this, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n}\n\nfunction packageResolve (config, key, parentKey, metadata, parentMetadata, skipExtensions) {\n  var loader = this;\n\n  return resolvedPromise\n  .then(function () {\n    // ignore . since internal maps handled by standard package resolution\n    if (parentMetadata && parentMetadata.packageConfig && key.substr(0, 2) !== './') {\n      var parentMap = parentMetadata.packageConfig.map;\n      var parentMapMatch = parentMap && getMapMatch(parentMap, key);\n\n      if (parentMapMatch)\n        return doMap(loader, config, parentMetadata.packageConfig, parentMetadata.packageKey, parentMapMatch, key, metadata, skipExtensions);\n    }\n\n    return resolvedPromise;\n  })\n  .then(function (mapped) {\n    if (mapped)\n      return mapped;\n\n    // apply map, core, paths, contextual package map\n    var normalized = coreResolve.call(loader, config, key, parentKey, true, true);\n\n    var pkgConfigMatch = getPackageConfigMatch(config, normalized);\n    metadata.packageKey = pkgConfigMatch && pkgConfigMatch.packageKey || getMapMatch(config.packages, normalized);\n\n    if (!metadata.packageKey)\n      return Promise.resolve(normalized);\n\n    if (config.packageConfigKeys.indexOf(normalized) !== -1) {\n      metadata.packageKey = undefined;\n      metadata.load = createMeta();\n      metadata.load.format = 'json';\n      // ensure no loader\n      metadata.load.loader = '';\n      return Promise.resolve(normalized);\n    }\n\n    metadata.packageConfig = config.packages[metadata.packageKey] || (config.packages[metadata.packageKey] = createPackage());\n\n    // load configuration when it matches packageConfigPaths, not already configured, and not the config itself\n    var loadConfig = pkgConfigMatch && !metadata.packageConfig.configured;\n\n    return (loadConfig ? loadPackageConfigPath(loader, config, pkgConfigMatch.configPath, metadata) : resolvedPromise)\n    .then(function () {\n      var subPath = normalized.substr(metadata.packageKey.length + 1);\n\n      return applyPackageConfig(loader, config, metadata.packageConfig, metadata.packageKey, subPath, metadata, skipExtensions);\n    });\n  });\n}\n\nfunction createMeta () {\n  return {\n    extension: '',\n    deps: undefined,\n    format: undefined,\n    loader: undefined,\n    scriptLoad: undefined,\n    globals: undefined,\n    nonce: undefined,\n    integrity: undefined,\n    sourceMap: undefined,\n    exports: undefined,\n    encapsulateGlobal: false,\n    crossOrigin: undefined,\n    cjsRequireDetection: true,\n    cjsDeferDepsExecute: false,\n    esModule: false\n  };\n}\n\nfunction setMeta (config, key, metadata) {\n  metadata.load = metadata.load || createMeta();\n\n  // apply wildcard metas\n  var bestDepth = 0;\n  var wildcardIndex;\n  for (var module in config.meta) {\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n    if (module.substr(0, wildcardIndex) === key.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === key.substr(key.length - module.length + wildcardIndex + 1)) {\n      var depth = module.split('/').length;\n      if (depth > bestDepth)\n        bestDepth = depth;\n      extendMeta(metadata.load, config.meta[module], bestDepth !== depth);\n    }\n  }\n\n  // apply exact meta\n  if (config.meta[key])\n    extendMeta(metadata.load, config.meta[key], false);\n\n  // apply package meta\n  if (metadata.packageKey) {\n    var subPath = key.substr(metadata.packageKey.length + 1);\n\n    var meta = {};\n    if (metadata.packageConfig.meta) {\n      var bestDepth = 0;\n      getMetaMatches(metadata.packageConfig.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n        if (matchDepth > bestDepth)\n          bestDepth = matchDepth;\n        extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);\n      });\n\n      extendMeta(metadata.load, meta, false);\n    }\n\n    // format\n    if (metadata.packageConfig.format && !metadata.pluginKey && !metadata.load.loader)\n      metadata.load.format = metadata.load.format || metadata.packageConfig.format;\n  }\n}\n\nfunction parsePlugin (pluginFirst, key) {\n  var argumentKey;\n  var pluginKey;\n\n  var pluginIndex = pluginFirst ? key.indexOf('!') : key.lastIndexOf('!');\n\n  if (pluginIndex === -1)\n    return;\n\n  if (pluginFirst) {\n    argumentKey = key.substr(pluginIndex + 1);\n    pluginKey = key.substr(0, pluginIndex);\n  }\n  else {\n    argumentKey = key.substr(0, pluginIndex);\n    pluginKey = key.substr(pluginIndex + 1) || argumentKey.substr(argumentKey.lastIndexOf('.') + 1);\n  }\n\n  return {\n    argument: argumentKey,\n    plugin: pluginKey\n  };\n}\n\n// put key back together after parts have been normalized\nfunction combinePluginParts (pluginFirst, argumentKey, pluginKey) {\n  if (pluginFirst)\n    return pluginKey + '!' + argumentKey;\n  else\n    return argumentKey + '!' + pluginKey;\n}\n\n/*\n * Package Configuration Extension\n *\n * Example:\n *\n * SystemJS.packages = {\n *   jquery: {\n *     main: 'index.js', // when not set, package key is requested directly\n *     format: 'amd',\n *     defaultExtension: 'ts', // defaults to 'js', can be set to false\n *     modules: {\n *       '*.ts': {\n *         loader: 'typescript'\n *       },\n *       'vendor/sizzle.js': {\n *         format: 'global'\n *       }\n *     },\n *     map: {\n *        // map internal require('sizzle') to local require('./vendor/sizzle')\n *        sizzle: './vendor/sizzle.js',\n *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'\n *        './vendor/another.js': './another/index.js',\n *        // test.js / test -> lib/test.js\n *        './test.js': './lib/test.js',\n *\n *        // environment-specific map configurations\n *        './index.js': {\n *          '~browser': './index-node.js',\n *          './custom-condition.js|~export': './index-custom.js'\n *        }\n *     },\n *     // allows for setting package-prefixed depCache\n *     // keys are normalized module keys relative to the package itself\n *     depCache: {\n *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js\n *       './index.js': ['./test'],\n *       './test.js': ['external-dep'],\n *       'external-dep/path.js': ['./another.js']\n *     }\n *   }\n * };\n *\n * Then:\n *   import 'jquery'                       -> jquery/index.js\n *   import 'jquery/submodule'             -> jquery/submodule.js\n *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript\n *   import 'jquery/vendor/another'        -> another/index.js\n *\n * Detailed Behaviours\n * - main can have a leading \"./\" can be added optionally\n * - map and defaultExtension are applied to the main\n * - defaultExtension adds the extension only if the exact extension is not present\n\n * - if a meta value is available for a module, map and defaultExtension are skipped\n * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)\n * - condition module map is '@env' module in package or '@system-env' globally\n * - map targets support conditional interpolation ('./x': './x.#{|env}.js')\n * - internal package map targets cannot use boolean conditionals\n *\n * Package Configuration Loading\n *\n * Not all packages may already have their configuration present in the System config\n * For these cases, a list of packageConfigPaths can be provided, which when matched against\n * a request, will first request a \".json\" file by the package key to derive the package\n * configuration from. This allows dynamic loading of non-predetermined code, a key use\n * case in SystemJS.\n *\n * Example:\n *\n *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];\n *\n *   // will first request 'packages/new-package/package.json' for the package config\n *   // before completing the package request to 'packages/new-package/path'\n *   SystemJS.import('packages/new-package/path');\n *\n *   // will first request 'packages/test/package.json' before the main\n *   SystemJS.import('packages/test');\n *\n * When a package matches packageConfigPaths, it will always send a config request for\n * the package configuration.\n * The package key itself is taken to be the match up to and including the last wildcard\n * or trailing slash.\n * The most specific package config path will be used.\n * Any existing package configurations for the package will deeply merge with the\n * package config, with the existing package configurations taking preference.\n * To opt-out of the package configuration request for a package that matches\n * packageConfigPaths, use the { configured: true } package config option.\n *\n */\n\nfunction addDefaultExtension (config, pkg, pkgKey, subPath, skipExtensions) {\n  // don't apply extensions to folders or if defaultExtension = false\n  if (!subPath || !pkg.defaultExtension || subPath[subPath.length - 1] === '/' || skipExtensions)\n    return subPath;\n\n  var metaMatch = false;\n\n  // exact meta or meta with any content after the last wildcard skips extension\n  if (pkg.meta)\n    getMetaMatches(pkg.meta, subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  // exact global meta or meta with any content after the last wildcard skips extension\n  if (!metaMatch && config.meta)\n    getMetaMatches(config.meta, pkgKey + '/' + subPath, function (metaPattern, matchMeta, matchDepth) {\n      if (matchDepth === 0 || metaPattern.lastIndexOf('*') !== metaPattern.length - 1)\n        return metaMatch = true;\n    });\n\n  if (metaMatch)\n    return subPath;\n\n  // work out what the defaultExtension is and add if not there already\n  var defaultExtension = '.' + pkg.defaultExtension;\n  if (subPath.substr(subPath.length - defaultExtension.length) !== defaultExtension)\n    return subPath + defaultExtension;\n  else\n    return subPath;\n}\n\nfunction applyPackageConfigSync (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    else\n      // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return pkgKey;\n  }\n\n  // map config checking without then with extensions\n  if (pkg.map) {\n    var mapPath = './' + subPath;\n\n    var mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(loader, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n    if (mapMatch) {\n      var mapped = doMapSync(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions);\n      if (mapped)\n        return mapped;\n    }\n  }\n\n  // normal package resolution\n  return pkgKey + '/' + addDefaultExtension(loader, pkg, pkgKey, subPath, skipExtensions);\n}\n\nfunction validMapping (mapMatch, mapped, path) {\n  // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps\n  // but only if the path is exactly ./x and not ./x/z\n  if (mapped.substr(0, mapMatch.length) === mapMatch && path.length > mapMatch.length)\n    return false;\n\n  return true;\n}\n\nfunction doMapSync (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'object')\n    throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgKey);\n\n  if (!validMapping(mapMatch, mapped, path) || typeof mapped !== 'string')\n    return;\n\n  return packageResolveSync.call(this, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions);\n}\n\nfunction applyPackageConfig (loader, config, pkg, pkgKey, subPath, metadata, skipExtensions) {\n  // main\n  if (!subPath) {\n    if (pkg.main)\n      subPath = pkg.main.substr(0, 2) === './' ? pkg.main.substr(2) : pkg.main;\n    // also no submap if key is package itself (import 'pkg' -> 'path/to/pkg.js')\n    else\n      // NB can add a default package main convention here\n      // if it becomes internal to the package then it would no longer be an exit path\n      return Promise.resolve(pkgKey);\n  }\n\n  // map config checking without then with extensions\n  var mapPath, mapMatch;\n\n  if (pkg.map) {\n    mapPath = './' + subPath;\n    mapMatch = getMapMatch(pkg.map, mapPath);\n\n    // we then check map with the default extension adding\n    if (!mapMatch) {\n      mapPath = './' + addDefaultExtension(loader, pkg, pkgKey, subPath, skipExtensions);\n      if (mapPath !== './' + subPath)\n        mapMatch = getMapMatch(pkg.map, mapPath);\n    }\n  }\n\n  return (mapMatch ? doMap(loader, config, pkg, pkgKey, mapMatch, mapPath, metadata, skipExtensions) : resolvedPromise)\n  .then(function (mapped) {\n    if (mapped)\n      return Promise.resolve(mapped);\n\n    // normal package resolution / fallback resolution for no conditional match\n    return Promise.resolve(pkgKey + '/' + addDefaultExtension(loader, pkg, pkgKey, subPath, skipExtensions));\n  });\n}\n\nfunction doMap (loader, config, pkg, pkgKey, mapMatch, path, metadata, skipExtensions) {\n  if (path[path.length - 1] === '/')\n    path = path.substr(0, path.length - 1);\n\n  var mapped = pkg.map[mapMatch];\n\n  if (typeof mapped === 'string') {\n    if (!validMapping(mapMatch, mapped, path))\n      return resolvedPromise;\n    return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n    .then(function (normalized) {\n      return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n    });\n  }\n\n  // we use a special conditional syntax to allow the builder to handle conditional branch points further\n  /*if (loader.builder)\n    return Promise.resolve(pkgKey + '/#:' + path);*/\n\n  // we load all conditions upfront\n  var conditionPromises = [];\n  var conditions = [];\n  for (var e in mapped) {\n    var c = parseCondition(e);\n    conditions.push({\n      condition: c,\n      map: mapped[e]\n    });\n    conditionPromises.push(RegisterLoader.prototype.import.call(loader, c.module, pkgKey));\n  }\n\n  // map object -> conditional map\n  return Promise.all(conditionPromises)\n  .then(function (conditionValues) {\n    // first map condition to match is used\n    for (var i = 0; i < conditions.length; i++) {\n      var c = conditions[i].condition;\n      var value = readMemberExpression(c.prop, '__useDefault' in conditionValues[i] ? conditionValues[i].__useDefault : conditionValues[i]);\n      if (!c.negate && value || c.negate && !value)\n        return conditions[i].map;\n    }\n  })\n  .then(function (mapped) {\n    if (mapped) {\n      if (!validMapping(mapMatch, mapped, path))\n        return resolvedPromise;\n      return packageResolve.call(loader, config, mapped + path.substr(mapMatch.length), pkgKey + '/', metadata, metadata, skipExtensions)\n      .then(function (normalized) {\n        return interpolateConditional.call(loader, normalized, pkgKey + '/', metadata);\n      });\n    }\n\n    // no environment match -> fallback to original subPath by returning undefined\n  });\n}\n\n// check if the given normalized key matches a packageConfigPath\n// if so, loads the config\nvar packageConfigPaths = {};\n\n// data object for quick checks against package paths\nfunction createPkgConfigPathObj (path) {\n  var lastWildcard = path.lastIndexOf('*');\n  var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));\n  return {\n    length: length,\n    regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/\\*/g, '[^\\\\/]+') + ')(\\\\/|$)'),\n    wildcard: lastWildcard !== -1\n  };\n}\n\n// most specific match wins\nfunction getPackageConfigMatch (config, normalized) {\n  var pkgKey, exactMatch = false, configPath;\n  for (var i = 0; i < config.packageConfigPaths.length; i++) {\n    var packageConfigPath = config.packageConfigPaths[i];\n    var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));\n    if (normalized.length < p.length)\n      continue;\n    var match = normalized.match(p.regEx);\n    if (match && (!pkgKey || (!(exactMatch && p.wildcard) && pkgKey.length < match[1].length))) {\n      pkgKey = match[1];\n      exactMatch = !p.wildcard;\n      configPath = pkgKey + packageConfigPath.substr(p.length);\n    }\n  }\n\n  if (!pkgKey)\n    return;\n\n  return {\n    packageKey: pkgKey,\n    configPath: configPath\n  };\n}\n\nfunction loadPackageConfigPath (loader, config, pkgConfigPath, metadata, normalized) {\n  var configLoader = loader.pluginLoader || loader;\n\n  // ensure we note this is a package config file path\n  // it will then be skipped from getting other normalizations itself to ensure idempotency\n  if (config.packageConfigKeys.indexOf(pkgConfigPath) === -1)\n    config.packageConfigKeys.push(pkgConfigPath);\n\n  return configLoader.import(pkgConfigPath)\n  .then(function (pkgConfig) {\n    setPkgConfig(metadata.packageConfig, pkgConfig, metadata.packageKey, true, config);\n    metadata.packageConfig.configured = true;\n  })\n  .catch(function (err) {\n    throw addToError(err, 'Unable to fetch package configuration file ' + pkgConfigPath);\n  });\n}\n\nfunction getMetaMatches (pkgMeta, subPath, matchFn) {\n  // wildcard meta\n  var wildcardIndex;\n  for (var module in pkgMeta) {\n    // allow meta to start with ./ for flexibility\n    var dotRel = module.substr(0, 2) === './' ? './' : '';\n    if (dotRel)\n      module = module.substr(2);\n\n    wildcardIndex = module.indexOf('*');\n    if (wildcardIndex === -1)\n      continue;\n\n    if (module.substr(0, wildcardIndex) === subPath.substr(0, wildcardIndex)\n        && module.substr(wildcardIndex + 1) === subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {\n      // alow match function to return true for an exit path\n      if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))\n        return;\n    }\n  }\n  // exact meta\n  var exactMeta = pkgMeta[subPath] && Object.hasOwnProperty.call(pkgMeta, subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];\n  if (exactMeta)\n    matchFn(exactMeta, exactMeta, 0);\n}\n\n\n/*\n * Conditions Extension\n *\n *   Allows a condition module to alter the resolution of an import via syntax:\n *\n *     import $ from 'jquery/#{browser}';\n *\n *   Will first load the module 'browser' via `SystemJS.import('browser')` and\n *   take the default export of that module.\n *   If the default export is not a string, an error is thrown.\n *\n *   We then substitute the string into the require to get the conditional resolution\n *   enabling environment-specific variations like:\n *\n *     import $ from 'jquery/ie'\n *     import $ from 'jquery/firefox'\n *     import $ from 'jquery/chrome'\n *     import $ from 'jquery/safari'\n *\n *   It can be useful for a condition module to define multiple conditions.\n *   This can be done via the `|` modifier to specify an export member expression:\n *\n *     import 'jquery/#{./browser.js|grade.version}'\n *\n *   Where the `grade` export `version` member in the `browser.js` module  is substituted.\n *\n *\n * Boolean Conditionals\n *\n *   For polyfill modules, that are used as imports but have no module value,\n *   a binary conditional allows a module not to be loaded at all if not needed:\n *\n *     import 'es5-shim#?./conditions.js|needs-es5shim'\n *\n *   These conditions can also be negated via:\n *\n *     import 'es5-shim#?./conditions.js|~es6'\n *\n */\n\nvar sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];\n\nfunction parseCondition (condition) {\n  var conditionExport, conditionModule, negation;\n\n  var negation;\n  var conditionExportIndex = condition.lastIndexOf('|');\n  if (conditionExportIndex !== -1) {\n    conditionExport = condition.substr(conditionExportIndex + 1);\n    conditionModule = condition.substr(0, conditionExportIndex);\n\n    if (conditionExport[0] === '~') {\n      negation = true;\n      conditionExport = conditionExport.substr(1);\n    }\n  }\n  else {\n    negation = condition[0] === '~';\n    conditionExport = 'default';\n    conditionModule = condition.substr(negation);\n    if (sysConditions.indexOf(conditionModule) !== -1) {\n      conditionExport = conditionModule;\n      conditionModule = null;\n    }\n  }\n\n  return {\n    module: conditionModule || '@system-env',\n    prop: conditionExport,\n    negate: negation\n  };\n}\n\nfunction resolveCondition (conditionObj, parentKey, bool) {\n  // import without __useDefault handling here\n  return RegisterLoader.prototype.import.call(this, conditionObj.module, parentKey)\n  .then(function (condition) {\n    var m = readMemberExpression(conditionObj.prop, condition);\n\n    if (bool && typeof m !== 'boolean')\n      throw new TypeError('Condition did not resolve to a boolean.');\n\n    return conditionObj.negate ? !m : m;\n  });\n}\n\nvar interpolationRegEx = /#\\{[^\\}]+\\}/;\nfunction interpolateConditional (key, parentKey, parentMetadata) {\n  // first we normalize the conditional\n  var conditionalMatch = key.match(interpolationRegEx);\n\n  if (!conditionalMatch)\n    return Promise.resolve(key);\n\n  var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));\n\n  // in builds, return normalized conditional\n  /*if (this.builder)\n    return this.normalize(conditionObj.module, parentKey, createMetadata(), parentMetadata)\n    .then(function (conditionModule) {\n      conditionObj.module = conditionModule;\n      return key.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');\n    });*/\n\n  return resolveCondition.call(this, conditionObj, parentKey, false)\n  .then(function (conditionValue) {\n    if (typeof conditionValue !== 'string')\n      throw new TypeError('The condition value for ' + key + ' doesn\\'t resolve to a string.');\n\n    if (conditionValue.indexOf('/') !== -1)\n      throw new TypeError('Unabled to interpolate conditional ' + key + (parentKey ? ' in ' + parentKey : '') + '\\n\\tThe condition value ' + conditionValue + ' cannot contain a \"/\" separator.');\n\n    return key.replace(interpolationRegEx, conditionValue);\n  });\n}\n","import { envModule, setProduction, configNames } from './systemjs-loader.js';\nimport { extend, prepend, warn, resolveIfNotPlain, baseURI, CONFIG } from './common.js';\nimport { coreResolve } from './resolve.js';\n\n/*\n Extend config merging one deep only\n\n  loader.config({\n    some: 'random',\n    config: 'here',\n    deep: {\n      config: { too: 'too' }\n    }\n  });\n\n  <=>\n\n  loader.some = 'random';\n  loader.config = 'here'\n  loader.deep = loader.deep || {};\n  loader.deep.config = { too: 'too' };\n\n\n  Normalizes meta and package configs allowing for:\n\n  SystemJS.config({\n    meta: {\n      './index.js': {}\n    }\n  });\n\n  To become\n\n  SystemJS.meta['https://thissite.com/index.js'] = {};\n\n  For easy normalization canonicalization with latest URL support.\n\n*/\nvar envConfigNames = ['browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'];\nfunction envSet(loader, cfg, envCallback) {\n  for (var i = 0; i < envConfigNames.length; i++) {\n    var envConfig = envConfigNames[i];\n    if (cfg[envConfig] && envModule[envConfig.substr(0, envConfig.length - 6)])\n      envCallback(cfg[envConfig]);\n  }\n}\n\nfunction cloneObj (obj, maxDepth) {\n  var clone = {};\n  for (var p in obj) {\n    var prop = obj[p];\n    if (maxDepth > 1) {\n      if (prop instanceof Array)\n        clone[p] = [].concat(prop);\n      else if (typeof prop === 'object')\n        clone[p] = cloneObj(prop, maxDepth - 1);\n      else if (p !== 'packageConfig')\n        clone[p] = prop;\n    }\n    else {\n      clone[p] = prop;\n    }\n  }\n  return clone;\n}\n\nexport function getConfigItem (config, p) {\n  var cfgItem = config[p];\n\n  // getConfig must return an unmodifiable clone of the configuration\n  if (cfgItem instanceof Array)\n    return config[p].concat([]);\n  else if (typeof cfgItem === 'object')\n    return cloneObj(cfgItem, 3)\n  else\n    return config[p];\n}\n\nexport function getConfig (configName) {\n  if (configName) {\n    if (configNames.indexOf(configName) !== -1)\n      return getConfigItem(this[CONFIG], configName);\n    throw new Error('\"' + configName + '\" is not a valid configuration name. Must be one of ' + configNames.join(', ') + '.');\n  }\n\n  var cfg = {};\n  for (var i = 0; i < configNames.length; i++) {\n    var p = configNames[i];\n    var configItem = getConfigItem(this[CONFIG], p);\n    if (configItem !== undefined)\n      cfg[p] = configItem;\n  }\n  return cfg;\n}\n\nexport function setConfig (cfg, isEnvConfig) {\n  var loader = this;\n  var config = this[CONFIG];\n\n  if ('warnings' in cfg)\n    config.warnings = cfg.warnings;\n\n  if ('wasm' in cfg)\n    config.wasm = typeof WebAssembly !== 'undefined' && cfg.wasm;\n\n  if ('production' in cfg || 'build' in cfg)\n    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));\n\n  if (!isEnvConfig) {\n    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there\n    // these exceptions will be unnecessary when we can properly implement config queuings\n    var baseURL;\n    envSet(loader, cfg, function(cfg) {\n      baseURL = baseURL || cfg.baseURL;\n    });\n    baseURL = baseURL || cfg.baseURL;\n\n    // always configure baseURL first\n    if (baseURL) {\n      config.baseURL = resolveIfNotPlain(baseURL, baseURI) || resolveIfNotPlain('./' + baseURL, baseURI);\n      if (config.baseURL[config.baseURL.length - 1] !== '/')\n        config.baseURL += '/';\n    }\n\n    if (cfg.paths)\n      extend(config.paths, cfg.paths);\n\n    envSet(loader, cfg, function(cfg) {\n      if (cfg.paths)\n        extend(config.paths, cfg.paths);\n    });\n\n    for (var p in config.paths) {\n      if (config.paths[p].indexOf('*') === -1)\n        continue;\n      warn.call(config, 'Path config ' + p + ' -> ' + config.paths[p] + ' is no longer supported as wildcards are deprecated.');\n      delete config.paths[p];\n    }\n  }\n\n  if (cfg.defaultJSExtensions)\n    warn.call(config, 'The defaultJSExtensions configuration option is deprecated.\\n  Use packages defaultExtension instead.', true);\n\n  if (typeof cfg.pluginFirst === 'boolean')\n    config.pluginFirst = cfg.pluginFirst;\n\n  if (cfg.map) {\n    for (var p in cfg.map) {\n      var v = cfg.map[p];\n\n      if (typeof v === 'string') {\n        var mapped = coreResolve.call(loader, config, v, undefined, false, false);\n        if (mapped[mapped.length -1] === '/' && p[p.length - 1] !== ':' && p[p.length - 1] !== '/')\n          mapped = mapped.substr(0, mapped.length - 1);\n        config.map[p] = mapped;\n      }\n\n      // object map\n      else {\n        var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n        pkgName = pkgName.substr(0, pkgName.length - 1);\n\n        var pkg = config.packages[pkgName];\n        if (!pkg) {\n          pkg = config.packages[pkgName] = createPackage();\n          // use '' instead of false to keep type consistent\n          pkg.defaultExtension = '';\n        }\n        setPkgConfig(pkg, { map: v }, pkgName, false, config);\n      }\n    }\n  }\n\n  if (cfg.packageConfigPaths) {\n    var packageConfigPaths = [];\n    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {\n      var path = cfg.packageConfigPaths[i];\n      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));\n      var normalized = coreResolve.call(loader, config, path.substr(0, packageLength), undefined, false, false);\n      packageConfigPaths[i] = normalized + path.substr(packageLength);\n    }\n    config.packageConfigPaths = packageConfigPaths;\n  }\n\n  if (cfg.bundles) {\n    for (var p in cfg.bundles) {\n      var bundle = [];\n      for (var i = 0; i < cfg.bundles[p].length; i++)\n        bundle.push(loader.normalizeSync(cfg.bundles[p][i]));\n      config.bundles[p] = bundle;\n    }\n  }\n\n  if (cfg.packages) {\n    for (var p in cfg.packages) {\n      if (p.match(/^([^\\/]+:)?\\/\\/$/))\n        throw new TypeError('\"' + p + '\" is not a valid package name.');\n\n      var pkgName = coreResolve.call(loader, config, p[p.length - 1] !== '/' ? p + '/' : p, undefined, true, true);\n      pkgName = pkgName.substr(0, pkgName.length - 1);\n\n      setPkgConfig(config.packages[pkgName] = config.packages[pkgName] || createPackage(), cfg.packages[p], pkgName, false, config);\n    }\n  }\n\n  if (cfg.depCache) {\n    for (var p in cfg.depCache)\n      config.depCache[loader.normalizeSync(p)] = [].concat(cfg.depCache[p]);\n  }\n\n  if (cfg.meta) {\n    for (var p in cfg.meta) {\n      // base wildcard stays base\n      if (p[0] === '*') {\n        extend(config.meta[p] = config.meta[p] || {}, cfg.meta[p]);\n      }\n      else {\n        var resolved = coreResolve.call(loader, config, p, undefined, true, true);\n        extend(config.meta[resolved] = config.meta[resolved] || {}, cfg.meta[p]);\n      }\n    }\n  }\n\n  if ('transpiler' in cfg)\n    config.transpiler = cfg.transpiler;\n\n\n  // copy any remaining non-standard configuration properties\n  for (var c in cfg) {\n    if (configNames.indexOf(c) !== -1)\n      continue;\n    if (envConfigNames.indexOf(c) !== -1)\n      continue;\n\n    // warn.call(config, 'Setting custom config option `System.config({ ' + c + ': ... })` is deprecated. Avoid custom config options or set SystemJS.' + c + ' = ... directly.');\n    loader[c] = cfg[c];\n  }\n\n  envSet(loader, cfg, function(cfg) {\n    loader.config(cfg, true);\n  });\n}\n\nexport function createPackage () {\n  return {\n    defaultExtension: undefined,\n    main: undefined,\n    format: undefined,\n    meta: undefined,\n    map: undefined,\n    packageConfig: undefined,\n    configured: false\n  };\n}\n\n// deeply-merge (to first level) config with any existing package config\nexport function setPkgConfig (pkg, cfg, pkgName, prependConfig, config) {\n  for (var prop in cfg) {\n    if (prop === 'main' || prop === 'format' || prop === 'defaultExtension' || prop === 'configured') {\n      if (!prependConfig || pkg[prop] === undefined)\n        pkg[prop] = cfg[prop];\n    }\n    else if (prop === 'map') {\n      (prependConfig ? prepend : extend)(pkg.map = pkg.map || {}, cfg.map);\n    }\n    else if (prop === 'meta') {\n      (prependConfig ? prepend : extend)(pkg.meta = pkg.meta || {}, cfg.meta);\n    }\n    else if (Object.hasOwnProperty.call(cfg, prop)) {\n      warn.call(config, '\"' + prop + '\" is not a valid package configuration option in package ' + pkgName);\n    }\n  }\n\n  // default defaultExtension for packages only\n  if (pkg.defaultExtension === undefined)\n    pkg.defaultExtension = 'js';\n\n  if (pkg.main === undefined && pkg.map && pkg.map['.']) {\n    pkg.main = pkg.map['.'];\n    delete pkg.map['.'];\n  }\n  // main object becomes main map\n  else if (typeof pkg.main === 'object') {\n    pkg.map = pkg.map || {};\n    pkg.map['./@main'] = pkg.main;\n    pkg.main['default'] = pkg.main['default'] || './';\n    pkg.main = '@main';\n  }\n\n  return pkg;\n}\n","import { isBrowser, global } from './common.js';\n\nvar hasBuffer = typeof Buffer !== 'undefined';\ntry {\n  if (hasBuffer && new Buffer('a').toString('base64') !== 'YQ==')\n    hasBuffer = false;\n}\ncatch (e) {\n  hasBuffer = false;\n}\n\nvar sourceMapPrefix = '\\n//# sourceMapping' + 'URL=data:application/json;base64,';\nfunction inlineSourceMap (sourceMapString) {\n  if (hasBuffer)\n    return sourceMapPrefix + new Buffer(sourceMapString).toString('base64');\n  else if (typeof btoa !== 'undefined')\n    return sourceMapPrefix + btoa(unescape(encodeURIComponent(sourceMapString)));\n  else\n    return '';\n}\n\nfunction getSource(source, sourceMap, address, wrap) {\n  var lastLineIndex = source.lastIndexOf('\\n');\n\n  if (sourceMap) {\n    if (typeof sourceMap != 'object')\n      throw new TypeError('load.metadata.sourceMap must be set to an object.');\n\n    sourceMap = JSON.stringify(sourceMap);\n  }\n\n  return (wrap ? '(function(System, SystemJS) {' : '') + source + (wrap ? '\\n})(System, System);' : '')\n      // adds the sourceURL comment if not already present\n      + (source.substr(lastLineIndex, 15) != '\\n//# sourceURL='\n        ? '\\n//# sourceURL=' + address + (sourceMap ? '!transpiled' : '') : '')\n      // add sourceMappingURL if load.metadata.sourceMap is set\n      + (sourceMap && inlineSourceMap(sourceMap) || '');\n}\n\n// script execution via injecting a script tag into the page\n// this allows CSP nonce to be set for CSP environments\nvar head;\nfunction scriptExec(loader, source, sourceMap, address, nonce) {\n  if (!head)\n    head = document.head || document.body || document.documentElement;\n\n  var script = document.createElement('script');\n  script.text = getSource(source, sourceMap, address, false);\n  var onerror = window.onerror;\n  var e;\n  window.onerror = function(_e) {\n    e = addToError(_e, 'Evaluating ' + address);\n    if (onerror)\n      onerror.apply(this, arguments);\n  }\n  preExec(loader);\n\n  if (nonce)\n    script.setAttribute('nonce', nonce);\n\n  head.appendChild(script);\n  head.removeChild(script);\n  postExec();\n  window.onerror = onerror;\n  if (e)\n    return e;\n}\n\nvar vm;\nvar useVm;\n\nvar curSystem;\n\nvar callCounter = 0;\nfunction preExec (loader) {\n  if (callCounter++ == 0)\n    curSystem = global.System;\n  global.System = global.SystemJS = loader;\n}\nfunction postExec () {\n  if (--callCounter == 0)\n    global.System = global.SystemJS = curSystem;\n}\n\nvar supportsScriptExec = false;\nif (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {\n  if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\\.js/)))\n    supportsScriptExec = true;\n}\n\nexport function evaluate (loader, source, sourceMap, address, integrity, nonce, noWrap) {\n  if (!source)\n    return;\n  if (nonce && supportsScriptExec)\n    return scriptExec(loader, source, sourceMap, address, nonce);\n  try {\n    preExec(loader);\n    // global scoped eval for node (avoids require scope leak)\n    if (!vm && loader._nodeRequire) {\n      vm = loader._nodeRequire('vm');\n      useVm = vm.runInThisContext(\"typeof System !== 'undefined' && System\") === loader;\n    }\n    if (useVm)\n      vm.runInThisContext(getSource(source, sourceMap, address, !noWrap), { filename: address + (sourceMap ? '!transpiled' : '') });\n    else\n      (0, eval)(getSource(source, sourceMap, address, !noWrap));\n    postExec();\n  }\n  catch (e) {\n    postExec();\n    return e;\n  }\n}\n","\nimport { isWindows, global, readMemberExpression, cjsRequireRegEx, noop } from './common.js';\n\nexport default function (loader) {\n  loader.set('@@cjs-helpers', loader.newModule({\n    requireResolve: requireResolve.bind(loader),\n    getPathVars: getPathVars\n  }));\n\n  loader.set('@@global-helpers', loader.newModule({\n    prepareGlobal: prepareGlobal\n  }));\n\n  /*\n    AMD-compatible require\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n  */\n  function require (names, callback, errback, referer) {\n    // in amd, first arg can be a config object... we just ignore\n    if (typeof names === 'object' && !(names instanceof Array))\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n    // amd require\n    if (typeof names === 'string' && typeof callback === 'function')\n      names = [names];\n    if (names instanceof Array) {\n      var dynamicRequires = [];\n      for (var i = 0; i < names.length; i++)\n        dynamicRequires.push(loader.import(names[i], referer));\n      Promise.all(dynamicRequires).then(function (modules) {\n        if (callback)\n          callback.apply(null, modules);\n      }, errback);\n    }\n\n    // commonjs require\n    else if (typeof names === 'string') {\n      var normalized = loader.decanonicalize(names, referer);\n      var module = loader.get(normalized);\n      if (!module)\n        throw new Error('Module not already loaded loading \"' + names + '\" as ' + normalized + (referer ? ' from \"' + referer + '\".' : '.'));\n      return '__useDefault' in module ? module.__useDefault : module;\n    }\n\n    else\n      throw new TypeError('Invalid require');\n  }\n\n  function define (name, deps, factory) {\n    if (typeof name !== 'string') {\n      factory = deps;\n      deps = name;\n      name = null;\n    }\n\n    if (!(deps instanceof Array)) {\n      factory = deps;\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\n    }\n\n    if (typeof factory !== 'function')\n      factory = (function (factory) {\n        return function() { return factory; }\n      })(factory);\n\n    if (!name) {\n      if (curMetaDeps) {\n        deps = deps.concat(curMetaDeps);\n        curMetaDeps = undefined;\n      }\n    }\n\n    // remove system dependencies\n    var requireIndex, exportsIndex, moduleIndex;\n\n    if ((requireIndex = deps.indexOf('require')) !== -1) {\n\n      deps.splice(requireIndex, 1);\n\n      // only trace cjs requires for non-named\n      // named defines assume the trace has already been done\n      if (!name)\n        deps = deps.concat(amdGetCJSDeps(factory.toString(), requireIndex));\n    }\n\n    if ((exportsIndex = deps.indexOf('exports')) !== -1)\n      deps.splice(exportsIndex, 1);\n\n    if ((moduleIndex = deps.indexOf('module')) !== -1)\n      deps.splice(moduleIndex, 1);\n\n    function execute (req, exports, module) {\n      var depValues = [];\n      for (var i = 0; i < deps.length; i++)\n        depValues.push(req(deps[i]));\n\n      module.uri = module.id;\n\n      module.config = noop;\n\n      // add back in system dependencies\n      if (moduleIndex !== -1)\n        depValues.splice(moduleIndex, 0, module);\n\n      if (exportsIndex !== -1)\n        depValues.splice(exportsIndex, 0, exports);\n\n      if (requireIndex !== -1) {\n        var contextualRequire = function (names, callback, errback) {\n          if (typeof names === 'string' && typeof callback !== 'function')\n            return req(names);\n          return require.call(loader, names, callback, errback, module.id);\n        };\n        contextualRequire.toUrl = function (name) {\n          return loader.normalizeSync(name, module.id);\n        };\n        depValues.splice(requireIndex, 0, contextualRequire);\n      }\n\n      // set global require to AMD require\n      var curRequire = global.require;\n      global.require = require;\n\n      var output = factory.apply(exportsIndex === -1 ? global : exports, depValues);\n\n      global.require = curRequire;\n\n      if (typeof output !== 'undefined')\n        module.exports = output;\n    }\n\n    // anonymous define\n    if (!name) {\n      loader.registerDynamic(deps, false, curEsModule ? wrapEsModuleExecute(execute) : execute);\n    }\n    else {\n      loader.registerDynamic(name, deps, false, execute);\n\n      // if we don't have any other defines,\n      // then let this be an anonymous define\n      // this is just to support single modules of the form:\n      // define('jquery')\n      // still loading anonymously\n      // because it is done widely enough to be useful\n      // as soon as there is more than one define, this gets removed though\n      if (lastNamedDefine) {\n        lastNamedDefine = undefined;\n        multipleNamedDefines = true;\n      }\n      else if (!multipleNamedDefines) {\n        lastNamedDefine = [deps, execute];\n      }\n    }\n  }\n  define.amd = {};\n\n  loader.amdDefine = define;\n  loader.amdRequire = require;\n}\n\n// CJS\nvar windowOrigin;\nif (typeof window !== 'undefined' && typeof document !== 'undefined' && window.location)\n  windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n\nfunction stripOrigin(path) {\n  if (path.substr(0, 8) === 'file:///')\n    return path.substr(7 + !!isWindows);\n\n  if (windowOrigin && path.substr(0, windowOrigin.length) === windowOrigin)\n    return path.substr(windowOrigin.length);\n\n  return path;\n}\n\nexport function requireResolve (request, parentId) {\n  return stripOrigin(this.normalizeSync(request, parentId));\n}\n\nexport function getPathVars (moduleId) {\n  // remove any plugin syntax\n  var pluginIndex = moduleId.lastIndexOf('!');\n  var filename;\n  if (pluginIndex !== -1)\n    filename = moduleId.substr(0, pluginIndex);\n  else\n    filename = moduleId;\n\n  var dirname = filename.split('/');\n  dirname.pop();\n  dirname = dirname.join('/');\n\n  return {\n    filename: stripOrigin(filename),\n    dirname: stripOrigin(dirname)\n  };\n}\n\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\n// extract CJS dependencies from source text via regex static analysis\n// read require('x') statements not in comments or strings\nexport function getCJSDeps (source) {\n  cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n\n  // track string and comment locations for unminified source\n  var stringLocations = [], commentLocations = [];\n\n  function inLocation (locations, match) {\n    for (var i = 0; i < locations.length; i++)\n      if (locations[i][0] < match.index && locations[i][1] > match.index)\n        return true;\n    return false;\n  }\n\n  if (source.length / source.split('\\n').length < 200) {\n    while (match = stringRegEx.exec(source))\n      stringLocations.push([match.index, match.index + match[0].length]);\n\n    // TODO: track template literals here before comments\n\n    while (match = commentRegEx.exec(source)) {\n      // only track comments not starting in strings\n      if (!inLocation(stringLocations, match))\n        commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);\n    }\n  }\n\n  while (match = cjsRequireRegEx.exec(source)) {\n    // ensure we're not within a string or comment location\n    if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {\n      var dep = match[1].substr(1, match[1].length - 2);\n      // skip cases like require('\" + file + \"')\n      if (dep.match(/\"|'/))\n        continue;\n      deps.push(dep);\n    }\n  }\n\n  return deps;\n}\n\n// Global\n// bare minimum ignores\nvar ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external',\n  'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];\n\nvar globalSnapshot;\nfunction globalIterator (globalName) {\n  if (ignoredGlobalProps.indexOf(globalName) !== -1)\n    return;\n  try {\n    var value = global[globalName];\n  }\n  catch (e) {\n    ignoredGlobalProps.push(globalName);\n  }\n  this(globalName, value);\n}\n\nexport function getGlobalValue (exports) {\n  if (typeof exports === 'string')\n    return readMemberExpression(exports, global);\n\n  if (!(exports instanceof Array))\n    throw new Error('Global exports must be a string or array.');\n\n  var globalValue = {};\n  for (var i = 0; i < exports.length; i++)\n    globalValue[exports[i].split('.').pop()] = readMemberExpression(exports[i], global);\n  return globalValue;\n}\n\nexport function prepareGlobal (moduleName, exports, globals, encapsulate) {\n  // disable module detection\n  var curDefine = global.define;\n\n  global.define = undefined;\n\n  // set globals\n  var oldGlobals;\n  if (globals) {\n    oldGlobals = {};\n    for (var g in globals) {\n      oldGlobals[g] = global[g];\n      global[g] = globals[g];\n    }\n  }\n\n  // store a complete copy of the global object in order to detect changes\n  if (!exports) {\n    globalSnapshot = {};\n\n    Object.keys(global).forEach(globalIterator, function (name, value) {\n      globalSnapshot[name] = value;\n    });\n  }\n\n  // return function to retrieve global\n  return function () {\n    var globalValue = exports ? getGlobalValue(exports) : {};\n\n    var singleGlobal;\n    var multipleExports = !!exports;\n\n    if (!exports || encapsulate)\n      Object.keys(global).forEach(globalIterator, function (name, value) {\n        if (globalSnapshot[name] === value)\n          return;\n        if (value === undefined)\n          return;\n\n        // allow global encapsulation where globals are removed\n        if (encapsulate)\n          global[name] = undefined;\n\n        if (!exports) {\n          globalValue[name] = value;\n\n          if (singleGlobal !== undefined) {\n            if (!multipleExports && singleGlobal !== value)\n              multipleExports = true;\n          }\n          else {\n            singleGlobal = value;\n          }\n        }\n      });\n\n    globalValue = multipleExports ? globalValue : singleGlobal;\n\n    // revert globals\n    if (oldGlobals) {\n      for (var g in oldGlobals)\n        global[g] = oldGlobals[g];\n    }\n    global.define = curDefine;\n\n    return globalValue;\n  };\n}\n\n// AMD\nvar cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\nvar cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\nvar fnBracketRegEx = /\\(([^\\)]*)\\)/;\nvar wsRegEx = /^\\s+|\\s+$/g;\n\nvar requireRegExs = {};\n\nfunction amdGetCJSDeps(source, requireIndex) {\n\n  // remove comments\n  source = source.replace(commentRegEx, '');\n\n  // determine the require alias\n  var params = source.match(fnBracketRegEx);\n  var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n  // find or generate the regex for this requireAlias\n  var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n  requireRegEx.lastIndex = 0;\n\n  var deps = [];\n\n  var match;\n  while (match = requireRegEx.exec(source))\n    deps.push(match[2] || match[3]);\n\n  return deps;\n}\n\nfunction wrapEsModuleExecute (execute) {\n  return function (require, exports, module) {\n    execute(require, exports, module);\n    exports = module.exports;\n    if ((typeof exports === 'object' || typeof exports === 'function') && !('__esModule' in exports))\n      Object.defineProperty(module.exports, '__esModule', {\n        value: true\n      });\n  };\n}\n\n// generate anonymous define from singular named define\nvar multipleNamedDefines = false;\nvar lastNamedDefine;\nvar curMetaDeps;\nvar curEsModule = false;\nexport function clearLastDefine (metaDeps, esModule) {\n  curMetaDeps = metaDeps;\n  curEsModule = esModule;\n  lastNamedDefine = undefined;\n  multipleNamedDefines = false;\n}\nexport function registerLastDefine (loader) {\n  if (lastNamedDefine)\n    loader.registerDynamic(curMetaDeps ? lastNamedDefine[0].concat(curMetaDeps) : lastNamedDefine[0],\n        false, curEsModule ? wrapEsModuleExecute(lastNamedDefine[1]) : lastNamedDefine[1]);\n\n  // bundles are an empty module\n  else if (multipleNamedDefines)\n    loader.registerDynamic([], false, noop);\n}\n","import { scriptLoad, isBrowser, isWorker, global, cjsRequireRegEx, addToError, loadNodeModule,\n    warn, CONFIG, METADATA, emptyModule, protectedCreateNamespace, resolvedPromise, preloadScript, checkInstantiateWasm } from './common.js';\nimport { evaluate } from './evaluate.js';\nimport fetch from './fetch.js';\nimport { getGlobalValue, getCJSDeps, requireResolve, getPathVars, prepareGlobal, clearLastDefine, registerLastDefine } from './format-helpers.js';\n\nvar supportsScriptLoad = (isBrowser || isWorker) && typeof navigator !== 'undefined' && navigator.userAgent && !navigator.userAgent.match(/MSIE (9|10).0/);\n\n// include the node require since we're overriding it\nexport var nodeRequire;\nif (typeof require !== 'undefined' && typeof process !== 'undefined' && !process.browser)\n  nodeRequire = require;\n\nfunction setMetaEsModule (metadata, moduleValue) {\n  if (metadata.load.esModule && (typeof moduleValue === 'object' || typeof moduleValue === 'function') &&\n      !('__esModule' in moduleValue))\n    Object.defineProperty(moduleValue, '__esModule', {\n      value: true\n    });\n}\n\nexport function instantiate (key, processAnonRegister) {\n  var loader = this;\n  var config = this[CONFIG];\n  // first do bundles and depCache\n  return (loadBundlesAndDepCache(config, this, key) || resolvedPromise)\n  .then(function () {\n    if (processAnonRegister())\n      return;\n\n    var metadata = loader[METADATA][key];\n\n    // node module loading\n    if (key.substr(0, 6) === '@node/') {\n      if (!loader._nodeRequire)\n        throw new TypeError('Error loading ' + key + '. Can only load node core modules in Node.');\n      loader.registerDynamic([], false, function () {\n        return loadNodeModule.call(loader, key.substr(6), loader.baseURL);\n      });\n      processAnonRegister();\n      return;\n    }\n\n    if (metadata.load.scriptLoad ) {\n      if (metadata.load.pluginKey || !supportsScriptLoad) {\n        metadata.load.scriptLoad = false;\n        warn.call(config, 'scriptLoad not supported for \"' + key + '\"');\n      }\n    }\n    else if (metadata.load.scriptLoad !== false && !metadata.load.pluginKey && supportsScriptLoad) {\n      // auto script load AMD, global without deps\n      if (!metadata.load.deps && !metadata.load.globals &&\n          (metadata.load.format === 'system' || metadata.load.format === 'register' || metadata.load.format === 'global' && metadata.load.exports))\n        metadata.load.scriptLoad = true;\n    }\n\n    // fetch / translate / instantiate pipeline\n    if (!metadata.load.scriptLoad)\n      return initializePlugin(loader, key, metadata)\n      .then(function () {\n        return runFetchPipeline(loader, key, metadata, processAnonRegister, config.wasm);\n      })\n\n    // just script loading\n    return new Promise(function (resolve, reject) {\n      if (metadata.load.format === 'amd' && global.define !== loader.amdDefine)\n        throw new Error('Loading AMD with scriptLoad requires setting the global `' + globalName + '.define = SystemJS.amdDefine`');\n\n      scriptLoad(key, metadata.load.crossOrigin, metadata.load.integrity, function () {\n        if (!processAnonRegister()) {\n          metadata.load.format = 'global';\n          var globalValue = metadata.load.exports && getGlobalValue(metadata.load.exports);\n          loader.registerDynamic([], false, function () {\n            setMetaEsModule(metadata, globalValue);\n            return globalValue;\n          });\n          processAnonRegister();\n        }\n\n        resolve();\n      }, reject);\n    });\n  })\n  .then(function (instantiated) {\n    delete loader[METADATA][key];\n    return instantiated;\n  });\n};\n\nfunction initializePlugin (loader, key, metadata) {\n  if (!metadata.pluginKey)\n    return resolvedPromise;\n\n  return loader.import(metadata.pluginKey).then(function (plugin) {\n    metadata.pluginModule = plugin;\n    metadata.pluginLoad = {\n      name: key,\n      address: metadata.pluginArgument,\n      source: undefined,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n  });\n}\n\nfunction loadBundlesAndDepCache (config, loader, key) {\n  // load direct deps, in turn will pick up their trace trees\n  var deps = config.depCache[key];\n  if (deps) {\n    for (var i = 0; i < deps.length; i++)\n      loader.normalize(deps[i], key).then(preloadScript);\n  }\n  else {\n    var matched = false;\n    for (var b in config.bundles) {\n      for (var i = 0; i < config.bundles[b].length; i++) {\n        var curModule = config.bundles[b][i];\n\n        if (curModule === key) {\n          matched = true;\n          break;\n        }\n\n        // wildcard in bundles includes / boundaries\n        if (curModule.indexOf('*') !== -1) {\n          var parts = curModule.split('*');\n          if (parts.length !== 2) {\n            config.bundles[b].splice(i--, 1);\n            continue;\n          }\n\n          if (key.substr(0, parts[0].length) === parts[0] &&\n              key.substr(key.length - parts[1].length, parts[1].length) === parts[1]) {\n            matched = true;\n            break;\n          }\n        }\n      }\n\n      if (matched)\n        return loader.import(b);\n    }\n  }\n}\n\nfunction runFetchPipeline (loader, key, metadata, processAnonRegister, wasm) {\n  if (metadata.load.exports && !metadata.load.format)\n    metadata.load.format = 'global';\n\n  return resolvedPromise\n\n  // locate\n  .then(function () {\n    if (!metadata.pluginModule || !metadata.pluginModule.locate)\n      return;\n\n    return Promise.resolve(metadata.pluginModule.locate.call(loader, metadata.pluginLoad))\n    .then(function (address) {\n      if (address)\n        metadata.pluginLoad.address = address;\n    });\n  })\n\n  // fetch\n  .then(function () {\n    if (!metadata.pluginModule)\n      return fetch(key, metadata.load.authorization, metadata.load.integrity, wasm);\n\n    wasm = false;\n\n    if (!metadata.pluginModule.fetch)\n      return fetch(metadata.pluginLoad.address, metadata.load.authorization, metadata.load.integrity, false);\n\n    return metadata.pluginModule.fetch.call(loader, metadata.pluginLoad, function (load) {\n      return fetch(load.address, metadata.load.authorization, metadata.load.integrity, false);\n    });\n  })\n\n  .then(function (fetched) {\n    // fetch is already a utf-8 string if not doing wasm detection\n    if (!wasm || typeof fetched === 'string')\n      return translateAndInstantiate(loader, key, fetched, metadata, processAnonRegister);\n\n    return checkInstantiateWasm(loader, fetched, processAnonRegister)\n    .then(function (wasmInstantiated) {\n      if (wasmInstantiated)\n        return;\n\n      // not wasm -> convert buffer into utf-8 string to execute as a module\n      // TextDecoder compatibility matches WASM currently. Need to keep checking this.\n      // The TextDecoder interface is documented at http://encoding.spec.whatwg.org/#interface-textdecoder\n      var stringSource = isBrowser ? new TextDecoder('utf-8').decode(new Uint8Array(fetched)) : fetched.toString();\n      return translateAndInstantiate(loader, key, stringSource, metadata, processAnonRegister);\n    });\n  });\n}\n\nfunction translateAndInstantiate (loader, key, source, metadata, processAnonRegister) {\n  return Promise.resolve(source)\n  // translate\n  .then(function (source) {\n    if (metadata.load.format === 'detect')\n      metadata.load.format = undefined;\n\n    readMetaSyntax(source, metadata);\n\n    if (!metadata.pluginModule || !metadata.pluginModule.translate)\n      return source;\n\n    metadata.pluginLoad.source = source;\n    return Promise.resolve(metadata.pluginModule.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (translated) {\n      if (metadata.load.sourceMap) {\n        if (typeof metadata.load.sourceMap !== 'object')\n          throw new Error('metadata.load.sourceMap must be set to an object.');\n        sanitizeSourceMap(metadata.pluginLoad.address, metadata.load.sourceMap);\n      }\n\n      if (typeof translated === 'string')\n        return translated;\n      else\n        return metadata.pluginLoad.source;\n    });\n  })\n  .then(function (source) {\n    if (!metadata.load.format && source.substring(0, 8) === '\"bundle\"') {\n      metadata.load.format = 'system';\n      return source;\n    }\n\n    if (metadata.load.format === 'register' || !metadata.load.format && detectRegisterFormat(source)) {\n      metadata.load.format = 'register';\n      return source;\n    }\n\n    if (metadata.load.format !== 'esm' && (metadata.load.format || !source.match(esmRegEx))) {\n      return source;\n    }\n\n    metadata.load.format = 'esm';\n    return transpile(loader, source, key, metadata, processAnonRegister);\n  })\n\n  // instantiate\n  .then(function (translated) {\n    if (typeof translated !== 'string' || !metadata.pluginModule || !metadata.pluginModule.instantiate)\n      return translated;\n\n    var calledInstantiate = false;\n    metadata.pluginLoad.source = translated;\n    return Promise.resolve(metadata.pluginModule.instantiate.call(loader, metadata.pluginLoad, function (load) {\n      translated = load.source;\n      metadata.load = load.metadata;\n      if (calledInstantiate)\n        throw new Error('Instantiate must only be called once.');\n      calledInstantiate = true;\n    }))\n    .then(function (result) {\n      if (calledInstantiate)\n        return translated;\n      return protectedCreateNamespace(result);\n    });\n  })\n  .then(function (source) {\n    // plugin instantiate result case\n    if (typeof source !== 'string')\n      return source;\n\n    if (!metadata.load.format)\n      metadata.load.format = detectLegacyFormat(source);\n\n    var registered = false;\n\n    switch (metadata.load.format) {\n      case 'esm':\n      case 'register':\n      case 'system':\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n        if (err)\n          throw err;\n        if (!processAnonRegister())\n          return emptyModule;\n        return;\n      break;\n\n      case 'json':\n        // warn.call(config, '\"json\" module format is deprecated.');\n        var parsed = JSON.parse(source);\n        return loader.newModule({ default: parsed, __useDefault: parsed });\n\n      case 'amd':\n        var curDefine = global.define;\n        global.define = loader.amdDefine;\n\n        clearLastDefine(metadata.load.deps, metadata.load.esModule);\n\n        var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n\n        // if didn't register anonymously, use the last named define if only one\n        registered = processAnonRegister();\n        if (!registered) {\n          registerLastDefine(loader);\n          registered = processAnonRegister();\n        }\n\n        global.define = curDefine;\n\n        if (err)\n          throw err;\n      break;\n\n      case 'cjs':\n        var metaDeps = metadata.load.deps;\n        var deps = (metadata.load.deps || []).concat(metadata.load.cjsRequireDetection ? getCJSDeps(source) : []);\n\n        for (var g in metadata.load.globals)\n          if (metadata.load.globals[g])\n            deps.push(metadata.load.globals[g]);\n\n        loader.registerDynamic(deps, true, function (require, exports, module) {\n          require.resolve = function (key) {\n            return requireResolve.call(loader, key, module.id);\n          };\n          // support module.paths ish\n          module.paths = [];\n          module.require = require;\n\n          // ensure meta deps execute first\n          if (!metadata.load.cjsDeferDepsExecute && metaDeps)\n            for (var i = 0; i < metaDeps.length; i++)\n              require(metaDeps[i]);\n\n          var pathVars = getPathVars(module.id);\n          var __cjsWrapper = {\n            exports: exports,\n            args: [require, exports, module, pathVars.filename, pathVars.dirname, global, global]\n          };\n\n          var cjsWrapper = \"(function (require, exports, module, __filename, __dirname, global, GLOBAL\";\n\n          // add metadata.globals to the wrapper arguments\n          if (metadata.load.globals)\n            for (var g in metadata.load.globals) {\n              __cjsWrapper.args.push(require(metadata.load.globals[g]));\n              cjsWrapper += \", \" + g;\n            }\n\n          // disable AMD detection\n          var define = global.define;\n          global.define = undefined;\n          global.__cjsWrapper = __cjsWrapper;\n\n          source = cjsWrapper + \") {\" + source.replace(hashBangRegEx, '') + \"\\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);\";\n\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, false);\n          if (err)\n            throw err;\n\n          setMetaEsModule(metadata, exports);\n\n          global.__cjsWrapper = undefined;\n          global.define = define;\n        });\n        registered = processAnonRegister();\n      break;\n\n      case 'global':\n        var deps = metadata.load.deps || [];\n        for (var g in metadata.load.globals) {\n          var gl = metadata.load.globals[g];\n          if (gl)\n            deps.push(gl);\n        }\n\n        loader.registerDynamic(deps, false, function (require, exports, module) {\n          var globals;\n          if (metadata.load.globals) {\n            globals = {};\n            for (var g in metadata.load.globals)\n              if (metadata.load.globals[g])\n                globals[g] = require(metadata.load.globals[g]);\n          }\n\n          var exportName = metadata.load.exports;\n\n          if (exportName)\n            source += '\\n' + globalName + '[\"' + exportName + '\"] = ' + exportName + ';';\n\n          var retrieveGlobal = prepareGlobal(module.id, exportName, globals, metadata.load.encapsulateGlobal);\n          var err = evaluate(loader, source, metadata.load.sourceMap, key, metadata.load.integrity, metadata.load.nonce, true);\n\n          if (err)\n            throw err;\n\n          var output = retrieveGlobal();\n          setMetaEsModule(metadata, output);\n          return output;\n        });\n        registered = processAnonRegister();\n      break;\n\n      default:\n        throw new TypeError('Unknown module format \"' + metadata.load.format + '\" for \"' + key + '\".' + (metadata.load.format === 'es6' ? ' Use \"esm\" instead here.' : ''));\n    }\n\n    if (!registered)\n      throw new Error('Module ' + key + ' detected as ' + metadata.load.format + ' but didn\\'t execute correctly.');\n  });\n}\n\nvar globalName = typeof self != 'undefined' ? 'self' : 'global';\n\n// good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case\nexport var esmRegEx = /(^\\s*|[}\\);\\n]\\s*)(import\\s*(['\"]|(\\*\\s+as\\s+)?[^\"'\\(\\)\\n;]+\\s*from\\s*['\"]|\\{)|export\\s+\\*\\s+from\\s+[\"']|export\\s*(\\{|default|function|class|var|const|let|async\\s+function))/;\n\nvar leadingCommentAndMetaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)*\\s*/;\nexport function detectRegisterFormat(source) {\n  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);\n  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) === 'System.register';\n}\n\n// AMD Module Format Detection RegEx\n// define([.., .., ..], ...)\n// define(varName); || define(function(require, exports) {}); || define({})\nvar amdRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])define\\s*\\(\\s*(\"[^\"]+\"\\s*,\\s*|'[^']+'\\s*,\\s*)?\\s*(\\[(\\s*((\"[^\"]+\"|'[^']+')\\s*,|\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*(\\s*(\"[^\"]+\"|'[^']+')\\s*,?)?(\\s*(\\/\\/.*\\r?\\n|\\/\\*(.|\\s)*?\\*\\/))*\\s*\\]|function\\s*|{|[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*\\))/;\n\n/// require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...\nvar cjsExportsRegEx = /(?:^\\uFEFF?|[^$_a-zA-Z\\xA0-\\uFFFF.])(exports\\s*(\\[['\"]|\\.)|module(\\.exports|\\['exports'\\]|\\[\"exports\"\\])\\s*(\\[['\"]|[=,\\.]))/;\nvar commentRegEx = /(^|[^\\\\])(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n\nvar stringRegEx = /(\"[^\"\\\\\\n\\r]*(\\\\.[^\"\\\\\\n\\r]*)*\"|'[^'\\\\\\n\\r]*(\\\\.[^'\\\\\\n\\r]*)*')/g;\n\n// used to support leading #!/usr/bin/env in scripts as supported in Node\nvar hashBangRegEx = /^\\#\\!.*/;\n\nexport function detectLegacyFormat (source) {\n  if (source.match(amdRegEx))\n    return 'amd';\n\n  cjsExportsRegEx.lastIndex = 0;\n  cjsRequireRegEx.lastIndex = 0;\n  if (cjsRequireRegEx.exec(source) || cjsExportsRegEx.exec(source))\n    return 'cjs';\n\n  // global is the fallback format\n  return 'global';\n}\n\nfunction sanitizeSourceMap (address, sourceMap) {\n  var originalName = address.split('!')[0];\n\n  // force set the filename of the original file\n  if (!sourceMap.file || sourceMap.file == address)\n    sourceMap.file = originalName + '!transpiled';\n\n  // force set the sources list if only one source\n  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] === address))\n    sourceMap.sources = [originalName];\n}\n\nfunction transpile (loader, source, key, metadata, processAnonRegister) {\n  if (!loader.transpiler)\n    throw new TypeError('Unable to dynamically transpile ES module\\n   A loader plugin needs to be configured via `SystemJS.config({ transpiler: \\'transpiler-module\\' })`.');\n\n  // deps support for es transpile\n  if (metadata.load.deps) {\n    var depsPrefix = '';\n    for (var i = 0; i < metadata.load.deps.length; i++)\n      depsPrefix += 'import \"' + metadata.load.deps[i] + '\"; ';\n    source = depsPrefix + source;\n  }\n\n  // do transpilation\n  return loader.import.call(loader, loader.transpiler)\n  .then(function (transpiler) {\n    transpiler = transpiler.__useDefault || transpiler;\n\n    // translate hooks means this is a transpiler plugin instead of a raw implementation\n    if (!transpiler.translate)\n      throw new Error(loader.transpiler + ' is not a valid transpiler plugin.');\n\n    // if transpiler is the same as the plugin loader, then don't run twice\n    if (transpiler === metadata.pluginModule)\n      return source;\n\n    // convert the source map into an object for transpilation chaining\n    if (typeof metadata.load.sourceMap === 'string')\n      metadata.load.sourceMap = JSON.parse(metadata.load.sourceMap);\n\n    metadata.pluginLoad = metadata.pluginLoad || {\n      name: key,\n      address: key,\n      source: source,\n      metadata: metadata.load\n    };\n    metadata.load.deps = metadata.load.deps || [];\n\n    return Promise.resolve(transpiler.translate.call(loader, metadata.pluginLoad, metadata.traceOpts))\n    .then(function (source) {\n      // sanitize sourceMap if an object not a JSON string\n      var sourceMap = metadata.load.sourceMap;\n      if (sourceMap && typeof sourceMap === 'object')\n        sanitizeSourceMap(key, sourceMap);\n\n      if (metadata.load.format === 'esm' && detectRegisterFormat(source))\n        metadata.load.format = 'register';\n\n      return source;\n    });\n  }, function (err) {\n    throw addToError(err, 'Unable to load transpiler to transpile ' + key);\n  });\n}\n\n// detect any meta header syntax\n// only set if not already set\nvar metaRegEx = /^(\\s*\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\s*\\/\\/[^\\n]*|\\s*\"[^\"]+\"\\s*;?|\\s*'[^']+'\\s*;?)+/;\nvar metaPartRegEx = /\\/\\*[^\\*]*(\\*(?!\\/)[^\\*]*)*\\*\\/|\\/\\/[^\\n]*|\"[^\"]+\"\\s*;?|'[^']+'\\s*;?/g;\n\nfunction setMetaProperty(target, p, value) {\n  var pParts = p.split('.');\n  var curPart;\n  while (pParts.length > 1) {\n    curPart = pParts.shift();\n    target = target[curPart] = target[curPart] || {};\n  }\n  curPart = pParts.shift();\n  if (target[curPart] === undefined)\n    target[curPart] = value;\n}\n\nfunction readMetaSyntax (source, metadata) {\n  var meta = source.match(metaRegEx);\n  if (!meta)\n    return;\n\n  var metaParts = meta[0].match(metaPartRegEx);\n\n  for (var i = 0; i < metaParts.length; i++) {\n    var curPart = metaParts[i];\n    var len = curPart.length;\n\n    var firstChar = curPart.substr(0, 1);\n    if (curPart.substr(len - 1, 1) == ';')\n      len--;\n\n    if (firstChar != '\"' && firstChar != \"'\")\n      continue;\n\n    var metaString = curPart.substr(1, curPart.length - 3);\n    var metaName = metaString.substr(0, metaString.indexOf(' '));\n\n    if (metaName) {\n      var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);\n\n      if (metaName === 'deps')\n        metaName = 'deps[]';\n\n      if (metaName.substr(metaName.length - 2, 2) === '[]') {\n        metaName = metaName.substr(0, metaName.length - 2);\n        metadata.load[metaName] = metadata.load[metaName] || [];\n        metadata.load[metaName].push(metaValue);\n      }\n      // \"use strict\" is not meta\n      else if (metaName !== 'use') {\n        setMetaProperty(metadata.load, metaName, metaValue);\n      }\n    }\n    else {\n      metadata.load[metaString] = true;\n    }\n  }\n}\n","import RegisterLoader from 'es-module-loader/core/register-loader.js';\nimport { warn, isBrowser, global, baseURI, CONFIG, METADATA, ModuleNamespace, emptyModule, isModule } from './common.js';\n\nimport { getConfig, getConfigItem, setConfig } from './config.js';\nimport { decanonicalize, normalize, normalizeSync } from './resolve.js';\nimport { instantiate, nodeRequire } from './instantiate.js';\nimport formatHelpers from './format-helpers.js';\n\nexport default SystemJSLoader;\n\nvar scriptSrc;\n\n// Promise detection and error message\nif (typeof Promise === 'undefined')\n  throw new Error('SystemJS needs a Promise polyfill.');\n\nif (typeof document !== 'undefined') {\n  var scripts = document.getElementsByTagName('script');\n  var curScript = scripts[scripts.length - 1];\n  if (document.currentScript && (curScript.defer || curScript.async))\n    curScript = document.currentScript;\n\n  scriptSrc = curScript && curScript.src;\n}\n// worker\nelse if (typeof importScripts !== 'undefined') {\n  try {\n    throw new Error('_');\n  }\n  catch (e) {\n    e.stack.replace(/(?:at|@).*(http.+):[\\d]+:[\\d]+/, function(m, url) {\n      scriptSrc = url;\n    });\n  }\n}\n// node\nelse if (typeof __filename !== 'undefined') {\n  scriptSrc = __filename;\n}\n\nfunction SystemJSLoader () {\n  RegisterLoader.call(this);\n\n  // NB deprecate\n  this._loader = {};\n\n  // internal metadata store\n  this[METADATA] = {};\n\n  // internal configuration\n  this[CONFIG] = {\n    baseURL: baseURI,\n    paths: {},\n\n    packageConfigPaths: [],\n    packageConfigKeys: [],\n    map: {},\n    packages: {},\n    depCache: {},\n    meta: {},\n    bundles: {},\n\n    production: false,\n\n    transpiler: undefined,\n    loadedBundles: {},\n\n    // global behaviour flags\n    warnings: false,\n    pluginFirst: false,\n\n    // enable wasm loading and detection when supported\n    wasm: false\n  };\n\n  // make the location of the system.js script accessible (if any)\n  this.scriptSrc = scriptSrc;\n\n  this._nodeRequire = nodeRequire;\n\n  // support the empty module, as a concept\n  this.registry.set('@empty', emptyModule);\n\n  setProduction.call(this, false, false);\n\n  // add module format helpers\n  formatHelpers(this);\n}\n\nexport var envModule;\nexport function setProduction (isProduction, isBuilder) {\n  this[CONFIG].production = isProduction;\n  this.registry.set('@system-env', envModule = this.newModule({\n    browser: isBrowser,\n    node: !!this._nodeRequire,\n    production: !isBuilder && isProduction,\n    dev: isBuilder || !isProduction,\n    build: isBuilder,\n    'default': true\n  }));\n}\n\nSystemJSLoader.prototype = Object.create(RegisterLoader.prototype);\n\nSystemJSLoader.prototype.constructor = SystemJSLoader;\n\n// NB deprecate normalize\nSystemJSLoader.prototype[SystemJSLoader.resolve = RegisterLoader.resolve] = SystemJSLoader.prototype.normalize = normalize;\n\nSystemJSLoader.prototype.load = function (key, parentKey) {\n  warn.call(this[CONFIG], 'System.load is deprecated.');\n  return this.import(key, parentKey);\n};\n\n// NB deprecate decanonicalize, normalizeSync\nSystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.resolveSync = normalizeSync;\n\nSystemJSLoader.prototype[SystemJSLoader.instantiate = RegisterLoader.instantiate] = instantiate;\n\nSystemJSLoader.prototype.config = setConfig;\nSystemJSLoader.prototype.getConfig = getConfig;\n\nSystemJSLoader.prototype.global = global;\n\nSystemJSLoader.prototype.import = function () {\n  return RegisterLoader.prototype.import.apply(this, arguments)\n  .then(function (m) {\n    return '__useDefault' in m ? m.__useDefault : m;\n  });\n};\n\nexport var configNames = ['baseURL', 'map', 'paths', 'packages', 'packageConfigPaths', 'depCache', 'meta', 'bundles', 'transpiler', 'warnings', 'pluginFirst', 'production', 'wasm'];\n\nvar hasProxy = typeof Proxy !== 'undefined';\nfor (var i = 0; i < configNames.length; i++) (function (configName) {\n  Object.defineProperty(SystemJSLoader.prototype, configName, {\n    get: function () {\n      var cfg = getConfigItem(this[CONFIG], configName);\n\n      if (hasProxy && typeof cfg === 'object')\n        cfg = new Proxy(cfg, {\n          set: function (target, option) {\n            throw new Error('Cannot set SystemJS.' + configName + '[\"' + option + '\"] directly. Use SystemJS.config({ ' + configName + ': { \"' + option + '\": ... } }) rather.');\n          }\n        });\n\n      //if (typeof cfg === 'object')\n      //  warn.call(this[CONFIG], 'Referencing `SystemJS.' + configName + '` is deprecated. Use the config getter `SystemJS.getConfig(\\'' + configName + '\\')`');\n      return cfg;\n    },\n    set: function (name) {\n      throw new Error('Setting `SystemJS.' + configName + '` directly is no longer supported. Use `SystemJS.config({ ' + configName + ': ... })`.');\n    }\n  });\n})(configNames[i]);\n\n/*\n * Backwards-compatible registry API, to be deprecated\n */\nfunction registryWarn(loader, method) {\n  warn.call(loader[CONFIG], 'SystemJS.' + method + ' is deprecated for SystemJS.registry.' + method);\n}\nSystemJSLoader.prototype.delete = function (key) {\n  registryWarn(this, 'delete');\n  return this.registry.delete(key);\n};\nSystemJSLoader.prototype.get = function (key) {\n  registryWarn(this, 'get');\n  return this.registry.get(key);\n};\nSystemJSLoader.prototype.has = function (key) {\n  registryWarn(this, 'has');\n  return this.registry.has(key);\n};\nSystemJSLoader.prototype.set = function (key, module) {\n  registryWarn(this, 'set');\n  return this.registry.set(key, module);\n};\nSystemJSLoader.prototype.newModule = function (bindings) {\n  return new ModuleNamespace(bindings);\n};\nSystemJSLoader.prototype.isModule = isModule;\n\n// ensure System.register and System.registerDynamic decanonicalize\nSystemJSLoader.prototype.register = function (key, deps, declare) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.register.call(this, key, deps, declare);\n};\n\nSystemJSLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  if (typeof key === 'string')\n    key = decanonicalize.call(this, this[CONFIG], key);\n  return RegisterLoader.prototype.registerDynamic.call(this, key, deps, executingRequire, execute);\n};\n","import { global, isBrowser, isWorker } from './common.js';\nimport SystemJSLoader from './systemjs-loader.js';\n\nSystemJSLoader.prototype.version = VERSION;\n\nvar System = new SystemJSLoader();\n\n// only set the global System on the global in browsers\nif (isBrowser || isWorker)\n  global.SystemJS = global.System = System;\n\nif (typeof module !== 'undefined' && module.exports)\n  module.exports = System;\n","SystemJS.config({\n  paths: {\n    \"github:\": \"/jspm_packages/github/\",\n    \"npm:\": \"/jspm_packages/npm/\",\n    \"vendor:*\": \"/js/vendor/*.js\",\n    \"app:*\": \"/app/*.js\"\n  }\n});\n","SystemJS.config({\n  devConfig: {\n    'map': {\n      'plugin-babel': 'npm:systemjs-plugin-babel@0.0.21'\n    }\n  },\n  packages: {\n    'src': {\n      'defaultExtension': 'js'\n    },\n    'npm:chokidar@1.7.0': {\n      'map': {\n        'glob-parent': 'npm:glob-parent@2.0.0',\n        'anymatch': 'npm:anymatch@1.3.2',\n        'path-is-absolute': 'npm:path-is-absolute@1.0.1',\n        'async-each': 'npm:async-each@1.0.1',\n        'is-binary-path': 'npm:is-binary-path@1.0.1',\n        'is-glob': 'npm:is-glob@2.0.1',\n        'readdirp': 'npm:readdirp@2.1.0',\n        'inherits': 'npm:inherits@2.0.3'\n      }\n    },\n    'npm:glob-parent@2.0.0': {\n      'map': {\n        'is-glob': 'npm:is-glob@2.0.1'\n      }\n    },\n    'npm:is-glob@2.0.1': {\n      'map': {\n        'is-extglob': 'npm:is-extglob@1.0.0'\n      }\n    },\n    'npm:is-binary-path@1.0.1': {\n      'map': {\n        'binary-extensions': 'npm:binary-extensions@1.10.0'\n      }\n    },\n    'npm:readdirp@2.1.0': {\n      'map': {\n        'set-immediate-shim': 'npm:set-immediate-shim@1.0.1',\n        'minimatch': 'npm:minimatch@3.0.4',\n        'graceful-fs': 'npm:graceful-fs@4.1.11',\n        'readable-stream': 'npm:readable-stream@2.3.3'\n      }\n    },\n    'npm:anymatch@1.3.2': {\n      'map': {\n        'normalize-path': 'npm:normalize-path@2.1.1',\n        'micromatch': 'npm:micromatch@2.3.11'\n      }\n    },\n    'npm:fsevents@1.1.2': {\n      'map': {\n        'nan': 'npm:nan@2.6.2',\n        'node-pre-gyp': 'npm:node-pre-gyp@0.6.36'\n      }\n    },\n    'npm:normalize-path@2.1.1': {\n      'map': {\n        'remove-trailing-separator': 'npm:remove-trailing-separator@1.0.2'\n      }\n    },\n    'npm:node-pre-gyp@0.6.36': {\n      'map': {\n        'rc': 'npm:rc@1.2.1',\n        'tar-pack': 'npm:tar-pack@3.4.0',\n        'mkdirp': 'npm:mkdirp@0.5.1',\n        'semver': 'npm:semver@5.4.1',\n        'tar': 'npm:tar@2.2.1',\n        'rimraf': 'npm:rimraf@2.6.1',\n        'nopt': 'npm:nopt@4.0.1',\n        'npmlog': 'npm:npmlog@4.1.2',\n        'request': 'npm:request@2.81.0'\n      }\n    },\n    'npm:tar-pack@3.4.0': {\n      'map': {\n        'readable-stream': 'npm:readable-stream@2.3.3',\n        'tar': 'npm:tar@2.2.1',\n        'rimraf': 'npm:rimraf@2.6.1',\n        'uid-number': 'npm:uid-number@0.0.6',\n        'once': 'npm:once@1.4.0',\n        'fstream-ignore': 'npm:fstream-ignore@1.0.5',\n        'fstream': 'npm:fstream@1.0.11',\n        'debug': 'npm:debug@2.6.8'\n      }\n    },\n    'npm:tar@2.2.1': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'fstream': 'npm:fstream@1.0.11',\n        'block-stream': 'npm:block-stream@0.0.9'\n      }\n    },\n    'npm:rc@1.2.1': {\n      'map': {\n        'ini': 'npm:ini@1.3.4',\n        'strip-json-comments': 'npm:strip-json-comments@2.0.1',\n        'deep-extend': 'npm:deep-extend@0.4.2',\n        'minimist': 'npm:minimist@1.2.0'\n      }\n    },\n    'npm:string-width@1.0.2': {\n      'map': {\n        'strip-ansi': 'npm:strip-ansi@3.0.1',\n        'is-fullwidth-code-point': 'npm:is-fullwidth-code-point@1.0.0',\n        'code-point-at': 'npm:code-point-at@1.1.0'\n      }\n    },\n    'npm:fstream-ignore@1.0.5': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'minimatch': 'npm:minimatch@3.0.4',\n        'fstream': 'npm:fstream@1.0.11'\n      }\n    },\n    'npm:fstream@1.0.11': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'mkdirp': 'npm:mkdirp@0.5.1',\n        'graceful-fs': 'npm:graceful-fs@4.1.11',\n        'rimraf': 'npm:rimraf@2.6.1'\n      }\n    },\n    'npm:block-stream@0.0.9': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3'\n      }\n    },\n    'npm:micromatch@2.3.11': {\n      'map': {\n        'is-extglob': 'npm:is-extglob@1.0.0',\n        'is-glob': 'npm:is-glob@2.0.1',\n        'normalize-path': 'npm:normalize-path@2.1.1',\n        'filename-regex': 'npm:filename-regex@2.0.1',\n        'array-unique': 'npm:array-unique@0.2.1',\n        'object.omit': 'npm:object.omit@2.0.1',\n        'arr-diff': 'npm:arr-diff@2.0.0',\n        'parse-glob': 'npm:parse-glob@3.0.4',\n        'regex-cache': 'npm:regex-cache@0.4.3',\n        'extglob': 'npm:extglob@0.3.2',\n        'expand-brackets': 'npm:expand-brackets@0.1.5',\n        'braces': 'npm:braces@1.8.5',\n        'kind-of': 'npm:kind-of@3.2.2'\n      }\n    },\n    'npm:once@1.4.0': {\n      'map': {\n        'wrappy': 'npm:wrappy@1.0.2'\n      }\n    },\n    'npm:nopt@4.0.1': {\n      'map': {\n        'osenv': 'npm:osenv@0.1.4',\n        'abbrev': 'npm:abbrev@1.1.0'\n      }\n    },\n    'npm:rimraf@2.6.1': {\n      'map': {\n        'glob': 'npm:glob@7.1.2'\n      }\n    },\n    'npm:npmlog@4.1.2': {\n      'map': {\n        'set-blocking': 'npm:set-blocking@2.0.0',\n        'console-control-strings': 'npm:console-control-strings@1.1.0',\n        'are-we-there-yet': 'npm:are-we-there-yet@1.1.4',\n        'gauge': 'npm:gauge@2.7.4'\n      }\n    },\n    'npm:request@2.81.0': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'tunnel-agent': 'npm:tunnel-agent@0.6.0',\n        'stringstream': 'npm:stringstream@0.0.5',\n        'forever-agent': 'npm:forever-agent@0.6.1',\n        'aws-sign2': 'npm:aws-sign2@0.6.0',\n        'is-typedarray': 'npm:is-typedarray@1.0.0',\n        'caseless': 'npm:caseless@0.12.0',\n        'performance-now': 'npm:performance-now@0.2.0',\n        'http-signature': 'npm:http-signature@1.1.1',\n        'tough-cookie': 'npm:tough-cookie@2.3.2',\n        'form-data': 'npm:form-data@2.1.4',\n        'aws4': 'npm:aws4@1.6.0',\n        'mime-types': 'npm:mime-types@2.1.16',\n        'har-validator': 'npm:har-validator@4.2.1',\n        'qs': 'npm:qs@6.4.0',\n        'hawk': 'npm:hawk@3.1.3',\n        'json-stringify-safe': 'npm:json-stringify-safe@5.0.1',\n        'isstream': 'npm:isstream@0.1.2',\n        'oauth-sign': 'npm:oauth-sign@0.8.2',\n        'combined-stream': 'npm:combined-stream@1.0.5',\n        'uuid': 'npm:uuid@3.1.0',\n        'extend': 'npm:extend@3.0.1'\n      }\n    },\n    'npm:glob@7.1.2': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'minimatch': 'npm:minimatch@3.0.4',\n        'path-is-absolute': 'npm:path-is-absolute@1.0.1',\n        'once': 'npm:once@1.4.0',\n        'inflight': 'npm:inflight@1.0.6',\n        'fs.realpath': 'npm:fs.realpath@1.0.0'\n      }\n    },\n    'npm:is-fullwidth-code-point@1.0.0': {\n      'map': {\n        'number-is-nan': 'npm:number-is-nan@1.0.1'\n      }\n    },\n    'npm:are-we-there-yet@1.1.4': {\n      'map': {\n        'readable-stream': 'npm:readable-stream@2.3.3',\n        'delegates': 'npm:delegates@1.0.0'\n      }\n    },\n    'npm:osenv@0.1.4': {\n      'map': {\n        'os-homedir': 'npm:os-homedir@1.0.2',\n        'os-tmpdir': 'npm:os-tmpdir@1.0.2'\n      }\n    },\n    'npm:parse-glob@3.0.4': {\n      'map': {\n        'is-extglob': 'npm:is-extglob@1.0.0',\n        'is-glob': 'npm:is-glob@2.0.1',\n        'glob-base': 'npm:glob-base@0.3.0',\n        'is-dotfile': 'npm:is-dotfile@1.0.3'\n      }\n    },\n    'npm:extglob@0.3.2': {\n      'map': {\n        'is-extglob': 'npm:is-extglob@1.0.0'\n      }\n    },\n    'npm:tunnel-agent@0.6.0': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1'\n      }\n    },\n    'npm:inflight@1.0.6': {\n      'map': {\n        'once': 'npm:once@1.4.0',\n        'wrappy': 'npm:wrappy@1.0.2'\n      }\n    },\n    'npm:form-data@2.1.4': {\n      'map': {\n        'mime-types': 'npm:mime-types@2.1.16',\n        'combined-stream': 'npm:combined-stream@1.0.5',\n        'asynckit': 'npm:asynckit@0.4.0'\n      }\n    },\n    'npm:regex-cache@0.4.3': {\n      'map': {\n        'is-primitive': 'npm:is-primitive@2.0.0',\n        'is-equal-shallow': 'npm:is-equal-shallow@0.1.3'\n      }\n    },\n    'npm:object.omit@2.0.1': {\n      'map': {\n        'for-own': 'npm:for-own@0.1.5',\n        'is-extendable': 'npm:is-extendable@0.1.1'\n      }\n    },\n    'npm:arr-diff@2.0.0': {\n      'map': {\n        'arr-flatten': 'npm:arr-flatten@1.1.0'\n      }\n    },\n    'npm:expand-brackets@0.1.5': {\n      'map': {\n        'is-posix-bracket': 'npm:is-posix-bracket@0.1.1'\n      }\n    },\n    'npm:braces@1.8.5': {\n      'map': {\n        'repeat-element': 'npm:repeat-element@1.1.2',\n        'preserve': 'npm:preserve@0.2.0',\n        'expand-range': 'npm:expand-range@1.8.2'\n      }\n    },\n    'npm:glob-base@0.3.0': {\n      'map': {\n        'glob-parent': 'npm:glob-parent@2.0.0',\n        'is-glob': 'npm:is-glob@2.0.1'\n      }\n    },\n    'npm:gauge@2.7.4': {\n      'map': {\n        'string-width': 'npm:string-width@1.0.2',\n        'strip-ansi': 'npm:strip-ansi@3.0.1',\n        'console-control-strings': 'npm:console-control-strings@1.1.0',\n        'object-assign': 'npm:object-assign@4.1.1',\n        'aproba': 'npm:aproba@1.1.2',\n        'has-unicode': 'npm:has-unicode@2.0.1',\n        'wide-align': 'npm:wide-align@1.1.2',\n        'signal-exit': 'npm:signal-exit@3.0.2'\n      }\n    },\n    'npm:is-equal-shallow@0.1.3': {\n      'map': {\n        'is-primitive': 'npm:is-primitive@2.0.0'\n      }\n    },\n    'npm:for-own@0.1.5': {\n      'map': {\n        'for-in': 'npm:for-in@1.0.2'\n      }\n    },\n    'npm:http-signature@1.1.1': {\n      'map': {\n        'jsprim': 'npm:jsprim@1.4.1',\n        'sshpk': 'npm:sshpk@1.13.1',\n        'assert-plus': 'npm:assert-plus@0.2.0'\n      }\n    },\n    'npm:har-validator@4.2.1': {\n      'map': {\n        'har-schema': 'npm:har-schema@1.0.5',\n        'ajv': 'npm:ajv@4.11.8'\n      }\n    },\n    'npm:tough-cookie@2.3.2': {\n      'map': {\n        'punycode': 'npm:punycode@1.4.1'\n      }\n    },\n    'npm:wide-align@1.1.2': {\n      'map': {\n        'string-width': 'npm:string-width@1.0.2'\n      }\n    },\n    'npm:mime-types@2.1.16': {\n      'map': {\n        'mime-db': 'npm:mime-db@1.29.0'\n      }\n    },\n    'npm:hawk@3.1.3': {\n      'map': {\n        'sntp': 'npm:sntp@1.0.9',\n        'cryptiles': 'npm:cryptiles@2.0.5',\n        'boom': 'npm:boom@2.10.1',\n        'hoek': 'npm:hoek@2.16.3'\n      }\n    },\n    'npm:expand-range@1.8.2': {\n      'map': {\n        'fill-range': 'npm:fill-range@2.2.3'\n      }\n    },\n    'npm:sntp@1.0.9': {\n      'map': {\n        'hoek': 'npm:hoek@2.16.3'\n      }\n    },\n    'npm:cryptiles@2.0.5': {\n      'map': {\n        'boom': 'npm:boom@2.10.1'\n      }\n    },\n    'npm:jsprim@1.4.1': {\n      'map': {\n        'assert-plus': 'npm:assert-plus@1.0.0',\n        'extsprintf': 'npm:extsprintf@1.3.0',\n        'json-schema': 'npm:json-schema@0.2.3',\n        'verror': 'npm:verror@1.10.0'\n      }\n    },\n    'npm:sshpk@1.13.1': {\n      'map': {\n        'assert-plus': 'npm:assert-plus@1.0.0',\n        'getpass': 'npm:getpass@0.1.7',\n        'asn1': 'npm:asn1@0.2.3',\n        'dashdash': 'npm:dashdash@1.14.1'\n      }\n    },\n    'npm:fill-range@2.2.3': {\n      'map': {\n        'repeat-element': 'npm:repeat-element@1.1.2',\n        'is-number': 'npm:is-number@2.1.0',\n        'isobject': 'npm:isobject@2.1.0',\n        'repeat-string': 'npm:repeat-string@1.6.1',\n        'randomatic': 'npm:randomatic@1.1.7'\n      }\n    },\n    'npm:boom@2.10.1': {\n      'map': {\n        'hoek': 'npm:hoek@2.16.3'\n      }\n    },\n    'npm:combined-stream@1.0.5': {\n      'map': {\n        'delayed-stream': 'npm:delayed-stream@1.0.0'\n      }\n    },\n    'npm:kind-of@3.2.2': {\n      'map': {\n        'is-buffer': 'npm:is-buffer@1.1.5'\n      }\n    },\n    'npm:bcrypt-pbkdf@1.0.1': {\n      'map': {\n        'tweetnacl': 'npm:tweetnacl@0.14.5'\n      }\n    },\n    'npm:ecc-jsbn@0.1.1': {\n      'map': {\n        'jsbn': 'npm:jsbn@0.1.1'\n      }\n    },\n    'npm:getpass@0.1.7': {\n      'map': {\n        'assert-plus': 'npm:assert-plus@1.0.0'\n      }\n    },\n    'npm:verror@1.10.0': {\n      'map': {\n        'core-util-is': 'npm:core-util-is@1.0.2',\n        'assert-plus': 'npm:assert-plus@1.0.0',\n        'extsprintf': 'npm:extsprintf@1.3.0'\n      }\n    },\n    'npm:is-number@2.1.0': {\n      'map': {\n        'kind-of': 'npm:kind-of@3.2.2'\n      }\n    },\n    'npm:isobject@2.1.0': {\n      'map': {\n        'isarray': 'npm:isarray@1.0.0'\n      }\n    },\n    'npm:dashdash@1.14.1': {\n      'map': {\n        'assert-plus': 'npm:assert-plus@1.0.0'\n      }\n    },\n    'npm:randomatic@1.1.7': {\n      'map': {\n        'is-number': 'npm:is-number@3.0.0',\n        'kind-of': 'npm:kind-of@4.0.0'\n      }\n    },\n    'npm:is-number@3.0.0': {\n      'map': {\n        'kind-of': 'npm:kind-of@3.2.2'\n      }\n    },\n    'npm:kind-of@4.0.0': {\n      'map': {\n        'is-buffer': 'npm:is-buffer@1.1.5'\n      }\n    },\n    'npm:ajv@4.11.8': {\n      'map': {\n        'json-stable-stringify': 'npm:json-stable-stringify@1.0.1',\n        'co': 'npm:co@4.6.0'\n      }\n    },\n    'npm:json-stable-stringify@1.0.1': {\n      'map': {\n        'jsonify': 'npm:jsonify@0.0.0'\n      }\n    },\n    'npm:tiny-slider@1.5.5': {\n      'map': {\n        'go-native': 'npm:go-native@1.0.0'\n      }\n    }\n  },\n  transpiler: 'plugin-babel',\n  map: {\n    'config': '.tmp/properties.json',\n    'objectFit': 'npm:lazysizes@4.0.0-rc3/plugins/object-fit/ls.object-fit.js',\n    'bcrypt-pbkdf': 'npm:bcrypt-pbkdf@1.0.1',\n    'chokidar': 'npm:chokidar@1.7.0',\n    'dgram': 'npm:jspm-nodelibs-dgram@0.2.0',\n    'dns': 'npm:jspm-nodelibs-dns@0.2.0',\n    'domain': 'npm:jspm-nodelibs-domain@0.2.0',\n    'ecc-jsbn': 'npm:ecc-jsbn@0.1.1',\n    'fsevents': 'npm:fsevents@1.1.2',\n    'jsbn': 'npm:jsbn@0.1.1',\n    'net': 'npm:jspm-nodelibs-net@0.2.0',\n    'http': 'npm:jspm-nodelibs-http@0.2.0',\n    'https': 'npm:jspm-nodelibs-https@0.2.0',\n    'querystring': 'npm:jspm-nodelibs-querystring@0.2.0',\n    'tls': 'npm:jspm-nodelibs-tls@0.2.0',\n    'tty': 'npm:jspm-nodelibs-tty@0.2.0',\n    'tweetnacl': 'npm:tweetnacl@0.14.5',\n    'url': 'npm:jspm-nodelibs-url@0.2.0',\n    'zlib': 'npm:jspm-nodelibs-zlib@0.2.0',\n    'agile-player': 'github:agilecontent/agile-player@master',\n    'nunjucks': 'github:mozilla/nunjucks@3.0.1',\n    'lodash': 'npm:lodash@4.17.4',\n    'tiny-slider': 'npm:tiny-slider@1.5.5'\n  },\n  meta: {\n    '*.json': {\n      'loader': 'json'\n    }\n  }\n});\n\nSystemJS.config({\n  packageConfigPaths: [\n    'npm:@*/*.json',\n    'npm:*.json',\n    'github:*/*.json'\n  ],\n  map: {\n    'draggabilly': 'npm:draggabilly@2.1.1',\n    'packery': 'npm:packery@2.1.1',\n    'json': 'github:systemjs/plugin-json@0.3.0',\n    'assert': 'npm:jspm-nodelibs-assert@0.2.0',\n    'babel': 'npm:babel-core@6.25.0',\n    'buffer': 'npm:jspm-nodelibs-buffer@0.2.0',\n    'child_process': 'npm:jspm-nodelibs-child_process@0.2.0',\n    'constants': 'npm:jspm-nodelibs-constants@0.2.0',\n    'crypto': 'npm:jspm-nodelibs-crypto@0.2.0',\n    'events': 'npm:jspm-nodelibs-events@0.2.0',\n    'fs': 'npm:jspm-nodelibs-fs@0.2.0',\n    'lazysizes': 'npm:lazysizes@4.0.0-rc3',\n    'module': 'npm:jspm-nodelibs-module@0.2.1',\n    'os': 'npm:jspm-nodelibs-os@0.2.0',\n    'path': 'npm:jspm-nodelibs-path@0.2.0',\n    'picturefill': 'npm:picturefill@3.0.2',\n    'process': 'npm:jspm-nodelibs-process@0.2.0',\n    'stream': 'npm:jspm-nodelibs-stream@0.2.0',\n    'string_decoder': 'npm:jspm-nodelibs-string_decoder@0.2.0',\n    'util': 'npm:jspm-nodelibs-util@0.2.0',\n    'vm': 'npm:jspm-nodelibs-vm@0.2.0'\n  },\n  packages: {\n    'npm:babel-core@6.25.0': {\n      'map': {\n        'lodash': 'npm:lodash@4.17.4',\n        'babel-messages': 'npm:babel-messages@6.23.0',\n        'babel-helpers': 'npm:babel-helpers@6.24.1',\n        'convert-source-map': 'npm:convert-source-map@1.5.0',\n        'path-is-absolute': 'npm:path-is-absolute@1.0.1',\n        'minimatch': 'npm:minimatch@3.0.4',\n        'source-map': 'npm:source-map@0.5.6',\n        'babel-generator': 'npm:babel-generator@6.25.0',\n        'babel-code-frame': 'npm:babel-code-frame@6.22.0',\n        'babel-template': 'npm:babel-template@6.25.0',\n        'babylon': 'npm:babylon@6.17.4',\n        'babel-register': 'npm:babel-register@6.24.1',\n        'private': 'npm:private@0.1.7',\n        'slash': 'npm:slash@1.0.0',\n        'json5': 'npm:json5@0.5.1',\n        'babel-types': 'npm:babel-types@6.25.0',\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'babel-traverse': 'npm:babel-traverse@6.25.0',\n        'debug': 'npm:debug@2.6.8'\n      }\n    },\n    'npm:invariant@2.2.2': {\n      'map': {\n        'loose-envify': 'npm:loose-envify@1.3.1'\n      }\n    },\n    'npm:babel-helpers@6.24.1': {\n      'map': {\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'babel-template': 'npm:babel-template@6.25.0'\n      }\n    },\n    'npm:babel-messages@6.23.0': {\n      'map': {\n        'babel-runtime': 'npm:babel-runtime@6.23.0'\n      }\n    },\n    'npm:babel-generator@6.25.0': {\n      'map': {\n        'source-map': 'npm:source-map@0.5.6',\n        'babel-messages': 'npm:babel-messages@6.23.0',\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'babel-types': 'npm:babel-types@6.25.0',\n        'lodash': 'npm:lodash@4.17.4',\n        'detect-indent': 'npm:detect-indent@4.0.0',\n        'jsesc': 'npm:jsesc@1.3.0',\n        'trim-right': 'npm:trim-right@1.0.1'\n      }\n    },\n    'npm:babel-register@6.24.1': {\n      'map': {\n        'babel-core': 'npm:babel-core@6.25.0',\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'core-js': 'npm:core-js@2.4.1',\n        'lodash': 'npm:lodash@4.17.4',\n        'source-map-support': 'npm:source-map-support@0.4.15',\n        'home-or-tmp': 'npm:home-or-tmp@2.0.0',\n        'mkdirp': 'npm:mkdirp@0.5.1'\n      }\n    },\n    'npm:babel-template@6.25.0': {\n      'map': {\n        'babylon': 'npm:babylon@6.17.4',\n        'babel-traverse': 'npm:babel-traverse@6.25.0',\n        'babel-types': 'npm:babel-types@6.25.0',\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'lodash': 'npm:lodash@4.17.4'\n      }\n    },\n    'npm:babel-runtime@6.23.0': {\n      'map': {\n        'core-js': 'npm:core-js@2.4.1',\n        'regenerator-runtime': 'npm:regenerator-runtime@0.10.5'\n      }\n    },\n    'npm:babel-types@6.25.0': {\n      'map': {\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'lodash': 'npm:lodash@4.17.4',\n        'esutils': 'npm:esutils@2.0.2',\n        'to-fast-properties': 'npm:to-fast-properties@1.0.3'\n      }\n    },\n    'npm:babel-traverse@6.25.0': {\n      'map': {\n        'babel-code-frame': 'npm:babel-code-frame@6.22.0',\n        'babel-runtime': 'npm:babel-runtime@6.23.0',\n        'babel-types': 'npm:babel-types@6.25.0',\n        'babylon': 'npm:babylon@6.17.4',\n        'invariant': 'npm:invariant@2.2.2',\n        'lodash': 'npm:lodash@4.17.4',\n        'babel-messages': 'npm:babel-messages@6.23.0',\n        'debug': 'npm:debug@2.6.8',\n        'globals': 'npm:globals@9.18.0'\n      }\n    },\n    'npm:loose-envify@1.3.1': {\n      'map': {\n        'js-tokens': 'npm:js-tokens@3.0.2'\n      }\n    },\n    'npm:babel-code-frame@6.22.0': {\n      'map': {\n        'js-tokens': 'npm:js-tokens@3.0.2',\n        'esutils': 'npm:esutils@2.0.2',\n        'chalk': 'npm:chalk@1.1.3'\n      }\n    },\n    'npm:minimatch@3.0.4': {\n      'map': {\n        'brace-expansion': 'npm:brace-expansion@1.1.8'\n      }\n    },\n    'npm:source-map-support@0.4.15': {\n      'map': {\n        'source-map': 'npm:source-map@0.5.6'\n      }\n    },\n    'npm:brace-expansion@1.1.8': {\n      'map': {\n        'concat-map': 'npm:concat-map@0.0.1',\n        'balanced-match': 'npm:balanced-match@1.0.0'\n      }\n    },\n    'npm:chalk@1.1.3': {\n      'map': {\n        'strip-ansi': 'npm:strip-ansi@3.0.1',\n        'has-ansi': 'npm:has-ansi@2.0.0',\n        'escape-string-regexp': 'npm:escape-string-regexp@1.0.5',\n        'supports-color': 'npm:supports-color@2.0.0',\n        'ansi-styles': 'npm:ansi-styles@2.2.1'\n      }\n    },\n    'npm:home-or-tmp@2.0.0': {\n      'map': {\n        'os-tmpdir': 'npm:os-tmpdir@1.0.2',\n        'os-homedir': 'npm:os-homedir@1.0.2'\n      }\n    },\n    'npm:mkdirp@0.5.1': {\n      'map': {\n        'minimist': 'npm:minimist@0.0.8'\n      }\n    },\n    'npm:strip-ansi@3.0.1': {\n      'map': {\n        'ansi-regex': 'npm:ansi-regex@2.1.1'\n      }\n    },\n    'npm:has-ansi@2.0.0': {\n      'map': {\n        'ansi-regex': 'npm:ansi-regex@2.1.1'\n      }\n    },\n    'npm:debug@2.6.8': {\n      'map': {\n        'ms': 'npm:ms@2.0.0'\n      }\n    },\n    'npm:detect-indent@4.0.0': {\n      'map': {\n        'repeating': 'npm:repeating@2.0.1'\n      }\n    },\n    'npm:repeating@2.0.1': {\n      'map': {\n        'is-finite': 'npm:is-finite@1.0.2'\n      }\n    },\n    'npm:is-finite@1.0.2': {\n      'map': {\n        'number-is-nan': 'npm:number-is-nan@1.0.1'\n      }\n    },\n    'npm:readable-stream@2.3.3': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'isarray': 'npm:isarray@1.0.0',\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'core-util-is': 'npm:core-util-is@1.0.2',\n        'util-deprecate': 'npm:util-deprecate@1.0.2',\n        'string_decoder': 'npm:string_decoder@1.0.3',\n        'process-nextick-args': 'npm:process-nextick-args@1.0.7'\n      }\n    },\n    'npm:string_decoder@1.0.3': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1'\n      }\n    },\n    'npm:stream-browserify@2.0.1': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'readable-stream': 'npm:readable-stream@2.3.3'\n      }\n    },\n    'npm:crypto-browserify@3.11.1': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'create-ecdh': 'npm:create-ecdh@4.0.0',\n        'browserify-cipher': 'npm:browserify-cipher@1.0.0',\n        'create-hash': 'npm:create-hash@1.1.3',\n        'public-encrypt': 'npm:public-encrypt@4.0.0',\n        'randombytes': 'npm:randombytes@2.0.5',\n        'create-hmac': 'npm:create-hmac@1.1.6',\n        'browserify-sign': 'npm:browserify-sign@4.0.4',\n        'diffie-hellman': 'npm:diffie-hellman@5.0.2',\n        'pbkdf2': 'npm:pbkdf2@3.0.14'\n      }\n    },\n    'npm:create-hash@1.1.3': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'cipher-base': 'npm:cipher-base@1.0.4',\n        'sha.js': 'npm:sha.js@2.4.9',\n        'ripemd160': 'npm:ripemd160@2.0.1'\n      }\n    },\n    'npm:public-encrypt@4.0.0': {\n      'map': {\n        'create-hash': 'npm:create-hash@1.1.3',\n        'randombytes': 'npm:randombytes@2.0.5',\n        'bn.js': 'npm:bn.js@4.11.8',\n        'parse-asn1': 'npm:parse-asn1@5.1.0',\n        'browserify-rsa': 'npm:browserify-rsa@4.0.1'\n      }\n    },\n    'npm:browserify-sign@4.0.4': {\n      'map': {\n        'create-hash': 'npm:create-hash@1.1.3',\n        'create-hmac': 'npm:create-hmac@1.1.6',\n        'inherits': 'npm:inherits@2.0.3',\n        'elliptic': 'npm:elliptic@6.4.0',\n        'bn.js': 'npm:bn.js@4.11.8',\n        'parse-asn1': 'npm:parse-asn1@5.1.0',\n        'browserify-rsa': 'npm:browserify-rsa@4.0.1'\n      }\n    },\n    'npm:randombytes@2.0.5': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1'\n      }\n    },\n    'npm:create-hmac@1.1.6': {\n      'map': {\n        'create-hash': 'npm:create-hash@1.1.3',\n        'inherits': 'npm:inherits@2.0.3',\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'cipher-base': 'npm:cipher-base@1.0.4',\n        'sha.js': 'npm:sha.js@2.4.9',\n        'ripemd160': 'npm:ripemd160@2.0.1'\n      }\n    },\n    'npm:create-ecdh@4.0.0': {\n      'map': {\n        'elliptic': 'npm:elliptic@6.4.0',\n        'bn.js': 'npm:bn.js@4.11.8'\n      }\n    },\n    'npm:browserify-cipher@1.0.0': {\n      'map': {\n        'browserify-aes': 'npm:browserify-aes@1.1.1',\n        'evp_bytestokey': 'npm:evp_bytestokey@1.0.3',\n        'browserify-des': 'npm:browserify-des@1.0.0'\n      }\n    },\n    'npm:diffie-hellman@5.0.2': {\n      'map': {\n        'randombytes': 'npm:randombytes@2.0.5',\n        'bn.js': 'npm:bn.js@4.11.8',\n        'miller-rabin': 'npm:miller-rabin@4.0.1'\n      }\n    },\n    'npm:elliptic@6.4.0': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'bn.js': 'npm:bn.js@4.11.8',\n        'brorand': 'npm:brorand@1.1.0',\n        'hmac-drbg': 'npm:hmac-drbg@1.0.1',\n        'hash.js': 'npm:hash.js@1.1.3',\n        'minimalistic-assert': 'npm:minimalistic-assert@1.0.0',\n        'minimalistic-crypto-utils': 'npm:minimalistic-crypto-utils@1.0.1'\n      }\n    },\n    'npm:browserify-des@1.0.0': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'cipher-base': 'npm:cipher-base@1.0.4',\n        'des.js': 'npm:des.js@1.0.0'\n      }\n    },\n    'npm:cipher-base@1.0.4': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'safe-buffer': 'npm:safe-buffer@5.1.1'\n      }\n    },\n    'npm:browserify-rsa@4.0.1': {\n      'map': {\n        'bn.js': 'npm:bn.js@4.11.8',\n        'randombytes': 'npm:randombytes@2.0.5'\n      }\n    },\n    'npm:parse-asn1@5.1.0': {\n      'map': {\n        'browserify-aes': 'npm:browserify-aes@1.1.1',\n        'create-hash': 'npm:create-hash@1.1.3',\n        'evp_bytestokey': 'npm:evp_bytestokey@1.0.3',\n        'pbkdf2': 'npm:pbkdf2@3.0.14',\n        'asn1.js': 'npm:asn1.js@4.9.1'\n      }\n    },\n    'npm:hmac-drbg@1.0.1': {\n      'map': {\n        'hash.js': 'npm:hash.js@1.1.3',\n        'minimalistic-assert': 'npm:minimalistic-assert@1.0.0',\n        'minimalistic-crypto-utils': 'npm:minimalistic-crypto-utils@1.0.1'\n      }\n    },\n    'npm:hash.js@1.1.3': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'minimalistic-assert': 'npm:minimalistic-assert@1.0.0'\n      }\n    },\n    'npm:ripemd160@2.0.1': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'hash-base': 'npm:hash-base@2.0.2'\n      }\n    },\n    'npm:des.js@1.0.0': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'minimalistic-assert': 'npm:minimalistic-assert@1.0.0'\n      }\n    },\n    'npm:asn1.js@4.9.1': {\n      'map': {\n        'bn.js': 'npm:bn.js@4.11.8',\n        'inherits': 'npm:inherits@2.0.3',\n        'minimalistic-assert': 'npm:minimalistic-assert@1.0.0'\n      }\n    },\n    'npm:hash-base@2.0.2': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3'\n      }\n    },\n    'npm:pbkdf2@3.0.14': {\n      'map': {\n        'create-hash': 'npm:create-hash@1.1.3',\n        'create-hmac': 'npm:create-hmac@1.1.6',\n        'sha.js': 'npm:sha.js@2.4.9',\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'ripemd160': 'npm:ripemd160@2.0.1'\n      }\n    },\n    'npm:sha.js@2.4.9': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'inherits': 'npm:inherits@2.0.3'\n      }\n    },\n    'npm:evp_bytestokey@1.0.3': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'md5.js': 'npm:md5.js@1.3.4'\n      }\n    },\n    'npm:miller-rabin@4.0.1': {\n      'map': {\n        'bn.js': 'npm:bn.js@4.11.8',\n        'brorand': 'npm:brorand@1.1.0'\n      }\n    },\n    'npm:md5.js@1.3.4': {\n      'map': {\n        'inherits': 'npm:inherits@2.0.3',\n        'hash-base': 'npm:hash-base@3.0.4'\n      }\n    },\n    'npm:hash-base@3.0.4': {\n      'map': {\n        'safe-buffer': 'npm:safe-buffer@5.1.1',\n        'inherits': 'npm:inherits@2.0.3'\n      }\n    },\n    'npm:buffer@4.9.1': {\n      'map': {\n        'base64-js': 'npm:base64-js@1.2.1',\n        'ieee754': 'npm:ieee754@1.1.8',\n        'isarray': 'npm:isarray@1.0.0'\n      }\n    },\n    'npm:packery@2.1.1': {\n      'map': {\n        'get-size': 'npm:get-size@2.0.2',\n        'outlayer': 'npm:outlayer@2.1.1'\n      }\n    },\n    'npm:outlayer@2.1.1': {\n      'map': {\n        'get-size': 'npm:get-size@2.0.2',\n        'fizzy-ui-utils': 'npm:fizzy-ui-utils@2.0.5',\n        'ev-emitter': 'npm:ev-emitter@1.1.1'\n      }\n    },\n    'npm:fizzy-ui-utils@2.0.5': {\n      'map': {\n        'desandro-matches-selector': 'npm:desandro-matches-selector@2.0.2'\n      }\n    },\n    'npm:draggabilly@2.1.1': {\n      'map': {\n        'get-size': 'npm:get-size@2.0.2',\n        'unidragger': 'npm:unidragger@2.1.0'\n      }\n    },\n    'npm:unidragger@2.1.0': {\n      'map': {\n        'unipointer': 'npm:unipointer@2.1.0'\n      }\n    },\n    'npm:unipointer@2.1.0': {\n      'map': {\n        'ev-emitter': 'npm:ev-emitter@1.0.3'\n      }\n    },\n    'npm:browserify-aes@1.1.1': {\n      'map': {\n        'cipher-base': 'npm:cipher-base@1.0.4',\n        'create-hash': 'npm:create-hash@1.1.3',\n        'inherits': 'npm:inherits@2.0.3',\n        'evp_bytestokey': 'npm:evp_bytestokey@1.0.3',\n        'buffer-xor': 'npm:buffer-xor@1.0.3',\n        'safe-buffer': 'npm:safe-buffer@5.1.1'\n      }\n    },\n    'npm:jspm-nodelibs-crypto@0.2.0': {\n      'map': {\n        'crypto-browserify': 'npm:crypto-browserify@3.11.1'\n      }\n    },\n    'npm:jspm-nodelibs-buffer@0.2.0': {\n      'map': {\n        'buffer-browserify': 'npm:buffer@4.9.1'\n      }\n    },\n    'npm:jspm-nodelibs-string_decoder@0.2.0': {\n      'map': {\n        'string_decoder-browserify': 'npm:string_decoder@0.10.31'\n      }\n    },\n    'npm:jspm-nodelibs-os@0.2.0': {\n      'map': {\n        'os-browserify': 'npm:os-browserify@0.2.1'\n      }\n    },\n    'npm:jspm-nodelibs-stream@0.2.0': {\n      'map': {\n        'stream-browserify': 'npm:stream-browserify@2.0.1'\n      }\n    }\n  }\n});\n","!function(e){function r(e,r,o){return 4===arguments.length?t.apply(this,arguments):void n(e,{declarative:!0,deps:r,declare:o})}function t(e,r,t,o){n(e,{declarative:!1,deps:r,executingRequire:t,execute:o})}function n(e,r){r.name=e,e in v||(v[e]=r),r.normalizedDeps=r.deps}function o(e,r){if(r[e.groupIndex]=r[e.groupIndex]||[],-1==g.call(r[e.groupIndex],e)){r[e.groupIndex].push(e);for(var t=0,n=e.normalizedDeps.length;n>t;t++){var a=e.normalizedDeps[t],u=v[a];if(u&&!u.evaluated){var d=e.groupIndex+(u.declarative!=e.declarative);if(void 0===u.groupIndex||u.groupIndex<d){if(void 0!==u.groupIndex&&(r[u.groupIndex].splice(g.call(r[u.groupIndex],u),1),0==r[u.groupIndex].length))throw new TypeError(\"Mixed dependency cycle detected\");u.groupIndex=d}o(u,r)}}}}function a(e){var r=v[e];r.groupIndex=0;var t=[];o(r,t);for(var n=!!r.declarative==t.length%2,a=t.length-1;a>=0;a--){for(var u=t[a],i=0;i<u.length;i++){var s=u[i];n?d(s):l(s)}n=!n}}function u(e){return y[e]||(y[e]={name:e,dependencies:[],exports:{},importers:[]})}function d(r){if(!r.module){var t=r.module=u(r.name),n=r.module.exports,o=r.declare.call(e,function(e,r){if(t.locked=!0,\"object\"==typeof e)for(var o in e)n[o]=e[o];else n[e]=r;for(var a=0,u=t.importers.length;u>a;a++){var d=t.importers[a];if(!d.locked)for(var i=0;i<d.dependencies.length;++i)d.dependencies[i]===t&&d.setters[i](n)}return t.locked=!1,r},{id:r.name});t.setters=o.setters,t.execute=o.execute;for(var a=0,i=r.normalizedDeps.length;i>a;a++){var l,s=r.normalizedDeps[a],c=v[s],f=y[s];f?l=f.exports:c&&!c.declarative?l=c.esModule:c?(d(c),f=c.module,l=f.exports):l=p(s),f&&f.importers?(f.importers.push(t),t.dependencies.push(f)):t.dependencies.push(null),t.setters[a]&&t.setters[a](l)}}}function i(e){var r,t=v[e];if(t)t.declarative?f(e,[]):t.evaluated||l(t),r=t.module.exports;else if(r=p(e),!r)throw new Error(\"Unable to load dependency \"+e+\".\");return(!t||t.declarative)&&r&&r.__useDefault?r[\"default\"]:r}function l(r){if(!r.module){var t={},n=r.module={exports:t,id:r.name};if(!r.executingRequire)for(var o=0,a=r.normalizedDeps.length;a>o;o++){var u=r.normalizedDeps[o],d=v[u];d&&l(d)}r.evaluated=!0;var c=r.execute.call(e,function(e){for(var t=0,n=r.deps.length;n>t;t++)if(r.deps[t]==e)return i(r.normalizedDeps[t]);throw new TypeError(\"Module \"+e+\" not declared as a dependency.\")},t,n);c&&(n.exports=c),t=n.exports,t&&t.__esModule?r.esModule=t:r.esModule=s(t)}}function s(r){var t={};if((\"object\"==typeof r||\"function\"==typeof r)&&r!==e)if(m)for(var n in r)\"default\"!==n&&c(t,r,n);else{var o=r&&r.hasOwnProperty;for(var n in r)\"default\"===n||o&&!r.hasOwnProperty(n)||(t[n]=r[n])}return t[\"default\"]=r,x(t,\"__useDefault\",{value:!0}),t}function c(e,r,t){try{var n;(n=Object.getOwnPropertyDescriptor(r,t))&&x(e,t,n)}catch(o){return e[t]=r[t],!1}}function f(r,t){var n=v[r];if(n&&!n.evaluated&&n.declarative){t.push(r);for(var o=0,a=n.normalizedDeps.length;a>o;o++){var u=n.normalizedDeps[o];-1==g.call(t,u)&&(v[u]?f(u,t):p(u))}n.evaluated||(n.evaluated=!0,n.module.execute.call(e))}}function p(e){if(I[e])return I[e];if(\"@node/\"==e.substr(0,6))return I[e]=s(D(e.substr(6)));var r=v[e];if(!r)throw\"Module \"+e+\" not present.\";return a(e),f(e,[]),v[e]=void 0,r.declarative&&x(r.module.exports,\"__esModule\",{value:!0}),I[e]=r.declarative?r.module.exports:r.esModule}var v={},g=Array.prototype.indexOf||function(e){for(var r=0,t=this.length;t>r;r++)if(this[r]===e)return r;return-1},m=!0;try{Object.getOwnPropertyDescriptor({a:0},\"a\")}catch(h){m=!1}var x;!function(){try{Object.defineProperty({},\"a\",{})&&(x=Object.defineProperty)}catch(e){x=function(e,r,t){try{e[r]=t.value||t.get.call(e)}catch(n){}}}}();var y={},D=\"undefined\"!=typeof System&&System._nodeRequire||\"undefined\"!=typeof require&&require.resolve&&\"undefined\"!=typeof process&&require,I={\"@empty\":{}};return function(e,n,o,a){return function(u){u(function(u){for(var d={_nodeRequire:D,register:r,registerDynamic:t,get:p,set:function(e,r){I[e]=r},newModule:function(e){return e}},i=0;i<n.length;i++)(function(e,r){r&&r.__esModule?I[e]=r:I[e]=s(r)})(n[i],arguments[i]);a(d);var l=p(e[0]);if(e.length>1)for(var i=1;i<e.length;i++)p(e[i]);return o?l[\"default\"]:l})}}}(\"undefined\"!=typeof self?self:global)\n\n([\"1\"], [], false, function($__System) {\nvar require = this.require, exports = this.exports, module = this.module;\n$__System.registerDynamic(\"2\", [\"3\", \"4\"], true, function($__require, exports, module) {\n  var process = $__require(\"4\");\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['./rect'], factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory($__require('3'));\n    } else {\n      var Packery = window.Packery = window.Packery || {};\n      Packery.Packer = factory(Packery.Rect);\n    }\n  }(window, function factory(Rect) {\n    'use strict';\n    function Packer(width, height, sortDirection) {\n      this.width = width || 0;\n      this.height = height || 0;\n      this.sortDirection = sortDirection || 'downwardLeftToRight';\n      this.reset();\n    }\n    var proto = Packer.prototype;\n    proto.reset = function() {\n      this.spaces = [];\n      var initialSpace = new Rect({\n        x: 0,\n        y: 0,\n        width: this.width,\n        height: this.height\n      });\n      this.spaces.push(initialSpace);\n      this.sorter = sorters[this.sortDirection] || sorters.downwardLeftToRight;\n    };\n    proto.pack = function(rect) {\n      for (var i = 0; i < this.spaces.length; i++) {\n        var space = this.spaces[i];\n        if (space.canFit(rect)) {\n          this.placeInSpace(rect, space);\n          break;\n        }\n      }\n    };\n    proto.columnPack = function(rect) {\n      for (var i = 0; i < this.spaces.length; i++) {\n        var space = this.spaces[i];\n        var canFitInSpaceColumn = space.x <= rect.x && space.x + space.width >= rect.x + rect.width && space.height >= rect.height - 0.01;\n        if (canFitInSpaceColumn) {\n          rect.y = space.y;\n          this.placed(rect);\n          break;\n        }\n      }\n    };\n    proto.rowPack = function(rect) {\n      for (var i = 0; i < this.spaces.length; i++) {\n        var space = this.spaces[i];\n        var canFitInSpaceRow = space.y <= rect.y && space.y + space.height >= rect.y + rect.height && space.width >= rect.width - 0.01;\n        if (canFitInSpaceRow) {\n          rect.x = space.x;\n          this.placed(rect);\n          break;\n        }\n      }\n    };\n    proto.placeInSpace = function(rect, space) {\n      rect.x = space.x;\n      rect.y = space.y;\n      this.placed(rect);\n    };\n    proto.placed = function(rect) {\n      var revisedSpaces = [];\n      for (var i = 0; i < this.spaces.length; i++) {\n        var space = this.spaces[i];\n        var newSpaces = space.getMaximalFreeRects(rect);\n        if (newSpaces) {\n          revisedSpaces.push.apply(revisedSpaces, newSpaces);\n        } else {\n          revisedSpaces.push(space);\n        }\n      }\n      this.spaces = revisedSpaces;\n      this.mergeSortSpaces();\n    };\n    proto.mergeSortSpaces = function() {\n      Packer.mergeRects(this.spaces);\n      this.spaces.sort(this.sorter);\n    };\n    proto.addSpace = function(rect) {\n      this.spaces.push(rect);\n      this.mergeSortSpaces();\n    };\n    Packer.mergeRects = function(rects) {\n      var i = 0;\n      var rect = rects[i];\n      rectLoop: while (rect) {\n        var j = 0;\n        var compareRect = rects[i + j];\n        while (compareRect) {\n          if (compareRect == rect) {\n            j++;\n          } else if (compareRect.contains(rect)) {\n            rects.splice(i, 1);\n            rect = rects[i];\n            continue rectLoop;\n          } else if (rect.contains(compareRect)) {\n            rects.splice(i + j, 1);\n          } else {\n            j++;\n          }\n          compareRect = rects[i + j];\n        }\n        i++;\n        rect = rects[i];\n      }\n      return rects;\n    };\n    var sorters = {\n      downwardLeftToRight: function(a, b) {\n        return a.y - b.y || a.x - b.x;\n      },\n      rightwardTopToBottom: function(a, b) {\n        return a.x - b.x || a.y - b.y;\n      }\n    };\n    return Packer;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"5\", [], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    'use strict';\n    if (typeof define == 'function' && define.amd) {\n      define(factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory();\n    } else {\n      window.matchesSelector = factory();\n    }\n  }(window, function factory() {\n    'use strict';\n    var matchesMethod = (function() {\n      var ElemProto = window.Element.prototype;\n      if (ElemProto.matches) {\n        return 'matches';\n      }\n      if (ElemProto.matchesSelector) {\n        return 'matchesSelector';\n      }\n      var prefixes = ['webkit', 'moz', 'ms', 'o'];\n      for (var i = 0; i < prefixes.length; i++) {\n        var prefix = prefixes[i];\n        var method = prefix + 'MatchesSelector';\n        if (ElemProto[method]) {\n          return method;\n        }\n      }\n    })();\n    return function matchesSelector(elem, selector) {\n      return elem[matchesMethod](selector);\n    };\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"6\", [\"5\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['desandro-matches-selector/matches-selector'], function(matchesSelector) {\n        return factory(window, matchesSelector);\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory(window, $__require('5'));\n    } else {\n      window.fizzyUIUtils = factory(window, window.matchesSelector);\n    }\n  }(window, function factory(window, matchesSelector) {\n    'use strict';\n    var utils = {};\n    utils.extend = function(a, b) {\n      for (var prop in b) {\n        a[prop] = b[prop];\n      }\n      return a;\n    };\n    utils.modulo = function(num, div) {\n      return ((num % div) + div) % div;\n    };\n    utils.makeArray = function(obj) {\n      var ary = [];\n      if (Array.isArray(obj)) {\n        ary = obj;\n      } else if (obj && typeof obj == 'object' && typeof obj.length == 'number') {\n        for (var i = 0; i < obj.length; i++) {\n          ary.push(obj[i]);\n        }\n      } else {\n        ary.push(obj);\n      }\n      return ary;\n    };\n    utils.removeFrom = function(ary, obj) {\n      var index = ary.indexOf(obj);\n      if (index != -1) {\n        ary.splice(index, 1);\n      }\n    };\n    utils.getParent = function(elem, selector) {\n      while (elem.parentNode && elem != document.body) {\n        elem = elem.parentNode;\n        if (matchesSelector(elem, selector)) {\n          return elem;\n        }\n      }\n    };\n    utils.getQueryElement = function(elem) {\n      if (typeof elem == 'string') {\n        return document.querySelector(elem);\n      }\n      return elem;\n    };\n    utils.handleEvent = function(event) {\n      var method = 'on' + event.type;\n      if (this[method]) {\n        this[method](event);\n      }\n    };\n    utils.filterFindElements = function(elems, selector) {\n      elems = utils.makeArray(elems);\n      var ffElems = [];\n      elems.forEach(function(elem) {\n        if (!(elem instanceof HTMLElement)) {\n          return;\n        }\n        if (!selector) {\n          ffElems.push(elem);\n          return;\n        }\n        if (matchesSelector(elem, selector)) {\n          ffElems.push(elem);\n        }\n        var childElems = elem.querySelectorAll(selector);\n        for (var i = 0; i < childElems.length; i++) {\n          ffElems.push(childElems[i]);\n        }\n      });\n      return ffElems;\n    };\n    utils.debounceMethod = function(_class, methodName, threshold) {\n      var method = _class.prototype[methodName];\n      var timeoutName = methodName + 'Timeout';\n      _class.prototype[methodName] = function() {\n        var timeout = this[timeoutName];\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        var args = arguments;\n        var _this = this;\n        this[timeoutName] = setTimeout(function() {\n          method.apply(_this, args);\n          delete _this[timeoutName];\n        }, threshold || 100);\n      };\n    };\n    utils.docReady = function(callback) {\n      var readyState = document.readyState;\n      if (readyState == 'complete' || readyState == 'interactive') {\n        setTimeout(callback);\n      } else {\n        document.addEventListener('DOMContentLoaded', callback);\n      }\n    };\n    utils.toDashed = function(str) {\n      return str.replace(/(.)([A-Z])/g, function(match, $1, $2) {\n        return $1 + '-' + $2;\n      }).toLowerCase();\n    };\n    var console = window.console;\n    utils.htmlInit = function(WidgetClass, namespace) {\n      utils.docReady(function() {\n        var dashedNamespace = utils.toDashed(namespace);\n        var dataAttr = 'data-' + dashedNamespace;\n        var dataAttrElems = document.querySelectorAll('[' + dataAttr + ']');\n        var jsDashElems = document.querySelectorAll('.js-' + dashedNamespace);\n        var elems = utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));\n        var dataOptionsAttr = dataAttr + '-options';\n        var jQuery = window.jQuery;\n        elems.forEach(function(elem) {\n          var attr = elem.getAttribute(dataAttr) || elem.getAttribute(dataOptionsAttr);\n          var options;\n          try {\n            options = attr && JSON.parse(attr);\n          } catch (error) {\n            if (console) {\n              console.error('Error parsing ' + dataAttr + ' on ' + elem.className + ': ' + error);\n            }\n            return;\n          }\n          var instance = new WidgetClass(elem, options);\n          if (jQuery) {\n            jQuery.data(elem, namespace, instance);\n          }\n        });\n      });\n    };\n    return utils;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"7\", [], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(global, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory();\n    } else {\n      global.EvEmitter = factory();\n    }\n  }(typeof window != 'undefined' ? window : this, function() {\n    \"use strict\";\n    function EvEmitter() {}\n    var proto = EvEmitter.prototype;\n    proto.on = function(eventName, listener) {\n      if (!eventName || !listener) {\n        return;\n      }\n      var events = this._events = this._events || {};\n      var listeners = events[eventName] = events[eventName] || [];\n      if (listeners.indexOf(listener) == -1) {\n        listeners.push(listener);\n      }\n      return this;\n    };\n    proto.once = function(eventName, listener) {\n      if (!eventName || !listener) {\n        return;\n      }\n      this.on(eventName, listener);\n      var onceEvents = this._onceEvents = this._onceEvents || {};\n      var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {};\n      onceListeners[listener] = true;\n      return this;\n    };\n    proto.off = function(eventName, listener) {\n      var listeners = this._events && this._events[eventName];\n      if (!listeners || !listeners.length) {\n        return;\n      }\n      var index = listeners.indexOf(listener);\n      if (index != -1) {\n        listeners.splice(index, 1);\n      }\n      return this;\n    };\n    proto.emitEvent = function(eventName, args) {\n      var listeners = this._events && this._events[eventName];\n      if (!listeners || !listeners.length) {\n        return;\n      }\n      listeners = listeners.slice(0);\n      args = args || [];\n      var onceListeners = this._onceEvents && this._onceEvents[eventName];\n      for (var i = 0; i < listeners.length; i++) {\n        var listener = listeners[i];\n        var isOnce = onceListeners && onceListeners[listener];\n        if (isOnce) {\n          this.off(eventName, listener);\n          delete onceListeners[listener];\n        }\n        listener.apply(this, args);\n      }\n      return this;\n    };\n    proto.allOff = function() {\n      delete this._events;\n      delete this._onceEvents;\n    };\n    return EvEmitter;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"8\", [\"7\", \"9\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['ev-emitter/ev-emitter', 'get-size/get-size'], factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory($__require('7'), $__require('9'));\n    } else {\n      window.Outlayer = {};\n      window.Outlayer.Item = factory(window.EvEmitter, window.getSize);\n    }\n  }(window, function factory(EvEmitter, getSize) {\n    'use strict';\n    function isEmptyObj(obj) {\n      for (var prop in obj) {\n        return false;\n      }\n      prop = null;\n      return true;\n    }\n    var docElemStyle = document.documentElement.style;\n    var transitionProperty = typeof docElemStyle.transition == 'string' ? 'transition' : 'WebkitTransition';\n    var transformProperty = typeof docElemStyle.transform == 'string' ? 'transform' : 'WebkitTransform';\n    var transitionEndEvent = {\n      WebkitTransition: 'webkitTransitionEnd',\n      transition: 'transitionend'\n    }[transitionProperty];\n    var vendorProperties = {\n      transform: transformProperty,\n      transition: transitionProperty,\n      transitionDuration: transitionProperty + 'Duration',\n      transitionProperty: transitionProperty + 'Property',\n      transitionDelay: transitionProperty + 'Delay'\n    };\n    function Item(element, layout) {\n      if (!element) {\n        return;\n      }\n      this.element = element;\n      this.layout = layout;\n      this.position = {\n        x: 0,\n        y: 0\n      };\n      this._create();\n    }\n    var proto = Item.prototype = Object.create(EvEmitter.prototype);\n    proto.constructor = Item;\n    proto._create = function() {\n      this._transn = {\n        ingProperties: {},\n        clean: {},\n        onEnd: {}\n      };\n      this.css({position: 'absolute'});\n    };\n    proto.handleEvent = function(event) {\n      var method = 'on' + event.type;\n      if (this[method]) {\n        this[method](event);\n      }\n    };\n    proto.getSize = function() {\n      this.size = getSize(this.element);\n    };\n    proto.css = function(style) {\n      var elemStyle = this.element.style;\n      for (var prop in style) {\n        var supportedProp = vendorProperties[prop] || prop;\n        elemStyle[supportedProp] = style[prop];\n      }\n    };\n    proto.getPosition = function() {\n      var style = getComputedStyle(this.element);\n      var isOriginLeft = this.layout._getOption('originLeft');\n      var isOriginTop = this.layout._getOption('originTop');\n      var xValue = style[isOriginLeft ? 'left' : 'right'];\n      var yValue = style[isOriginTop ? 'top' : 'bottom'];\n      var x = parseFloat(xValue);\n      var y = parseFloat(yValue);\n      var layoutSize = this.layout.size;\n      if (xValue.indexOf('%') != -1) {\n        x = (x / 100) * layoutSize.width;\n      }\n      if (yValue.indexOf('%') != -1) {\n        y = (y / 100) * layoutSize.height;\n      }\n      x = isNaN(x) ? 0 : x;\n      y = isNaN(y) ? 0 : y;\n      x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n      y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n      this.position.x = x;\n      this.position.y = y;\n    };\n    proto.layoutPosition = function() {\n      var layoutSize = this.layout.size;\n      var style = {};\n      var isOriginLeft = this.layout._getOption('originLeft');\n      var isOriginTop = this.layout._getOption('originTop');\n      var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n      var xProperty = isOriginLeft ? 'left' : 'right';\n      var xResetProperty = isOriginLeft ? 'right' : 'left';\n      var x = this.position.x + layoutSize[xPadding];\n      style[xProperty] = this.getXValue(x);\n      style[xResetProperty] = '';\n      var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n      var yProperty = isOriginTop ? 'top' : 'bottom';\n      var yResetProperty = isOriginTop ? 'bottom' : 'top';\n      var y = this.position.y + layoutSize[yPadding];\n      style[yProperty] = this.getYValue(y);\n      style[yResetProperty] = '';\n      this.css(style);\n      this.emitEvent('layout', [this]);\n    };\n    proto.getXValue = function(x) {\n      var isHorizontal = this.layout._getOption('horizontal');\n      return this.layout.options.percentPosition && !isHorizontal ? ((x / this.layout.size.width) * 100) + '%' : x + 'px';\n    };\n    proto.getYValue = function(y) {\n      var isHorizontal = this.layout._getOption('horizontal');\n      return this.layout.options.percentPosition && isHorizontal ? ((y / this.layout.size.height) * 100) + '%' : y + 'px';\n    };\n    proto._transitionTo = function(x, y) {\n      this.getPosition();\n      var curX = this.position.x;\n      var curY = this.position.y;\n      var didNotMove = x == this.position.x && y == this.position.y;\n      this.setPosition(x, y);\n      if (didNotMove && !this.isTransitioning) {\n        this.layoutPosition();\n        return;\n      }\n      var transX = x - curX;\n      var transY = y - curY;\n      var transitionStyle = {};\n      transitionStyle.transform = this.getTranslate(transX, transY);\n      this.transition({\n        to: transitionStyle,\n        onTransitionEnd: {transform: this.layoutPosition},\n        isCleaning: true\n      });\n    };\n    proto.getTranslate = function(x, y) {\n      var isOriginLeft = this.layout._getOption('originLeft');\n      var isOriginTop = this.layout._getOption('originTop');\n      x = isOriginLeft ? x : -x;\n      y = isOriginTop ? y : -y;\n      return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n    };\n    proto.goTo = function(x, y) {\n      this.setPosition(x, y);\n      this.layoutPosition();\n    };\n    proto.moveTo = proto._transitionTo;\n    proto.setPosition = function(x, y) {\n      this.position.x = parseFloat(x);\n      this.position.y = parseFloat(y);\n    };\n    proto._nonTransition = function(args) {\n      this.css(args.to);\n      if (args.isCleaning) {\n        this._removeStyles(args.to);\n      }\n      for (var prop in args.onTransitionEnd) {\n        args.onTransitionEnd[prop].call(this);\n      }\n    };\n    proto.transition = function(args) {\n      if (!parseFloat(this.layout.options.transitionDuration)) {\n        this._nonTransition(args);\n        return;\n      }\n      var _transition = this._transn;\n      for (var prop in args.onTransitionEnd) {\n        _transition.onEnd[prop] = args.onTransitionEnd[prop];\n      }\n      for (prop in args.to) {\n        _transition.ingProperties[prop] = true;\n        if (args.isCleaning) {\n          _transition.clean[prop] = true;\n        }\n      }\n      if (args.from) {\n        this.css(args.from);\n        var h = this.element.offsetHeight;\n        h = null;\n      }\n      this.enableTransition(args.to);\n      this.css(args.to);\n      this.isTransitioning = true;\n    };\n    function toDashedAll(str) {\n      return str.replace(/([A-Z])/g, function($1) {\n        return '-' + $1.toLowerCase();\n      });\n    }\n    var transitionProps = 'opacity,' + toDashedAll(transformProperty);\n    proto.enableTransition = function() {\n      if (this.isTransitioning) {\n        return;\n      }\n      var duration = this.layout.options.transitionDuration;\n      duration = typeof duration == 'number' ? duration + 'ms' : duration;\n      this.css({\n        transitionProperty: transitionProps,\n        transitionDuration: duration,\n        transitionDelay: this.staggerDelay || 0\n      });\n      this.element.addEventListener(transitionEndEvent, this, false);\n    };\n    proto.onwebkitTransitionEnd = function(event) {\n      this.ontransitionend(event);\n    };\n    proto.onotransitionend = function(event) {\n      this.ontransitionend(event);\n    };\n    var dashedVendorProperties = {'-webkit-transform': 'transform'};\n    proto.ontransitionend = function(event) {\n      if (event.target !== this.element) {\n        return;\n      }\n      var _transition = this._transn;\n      var propertyName = dashedVendorProperties[event.propertyName] || event.propertyName;\n      delete _transition.ingProperties[propertyName];\n      if (isEmptyObj(_transition.ingProperties)) {\n        this.disableTransition();\n      }\n      if (propertyName in _transition.clean) {\n        this.element.style[event.propertyName] = '';\n        delete _transition.clean[propertyName];\n      }\n      if (propertyName in _transition.onEnd) {\n        var onTransitionEnd = _transition.onEnd[propertyName];\n        onTransitionEnd.call(this);\n        delete _transition.onEnd[propertyName];\n      }\n      this.emitEvent('transitionEnd', [this]);\n    };\n    proto.disableTransition = function() {\n      this.removeTransitionStyles();\n      this.element.removeEventListener(transitionEndEvent, this, false);\n      this.isTransitioning = false;\n    };\n    proto._removeStyles = function(style) {\n      var cleanStyle = {};\n      for (var prop in style) {\n        cleanStyle[prop] = '';\n      }\n      this.css(cleanStyle);\n    };\n    var cleanTransitionStyle = {\n      transitionProperty: '',\n      transitionDuration: '',\n      transitionDelay: ''\n    };\n    proto.removeTransitionStyles = function() {\n      this.css(cleanTransitionStyle);\n    };\n    proto.stagger = function(delay) {\n      delay = isNaN(delay) ? 0 : delay;\n      this.staggerDelay = delay + 'ms';\n    };\n    proto.removeElem = function() {\n      this.element.parentNode.removeChild(this.element);\n      this.css({display: ''});\n      this.emitEvent('remove', [this]);\n    };\n    proto.remove = function() {\n      if (!transitionProperty || !parseFloat(this.layout.options.transitionDuration)) {\n        this.removeElem();\n        return;\n      }\n      this.once('transitionEnd', function() {\n        this.removeElem();\n      });\n      this.hide();\n    };\n    proto.reveal = function() {\n      delete this.isHidden;\n      this.css({display: ''});\n      var options = this.layout.options;\n      var onTransitionEnd = {};\n      var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n      onTransitionEnd[transitionEndProperty] = this.onRevealTransitionEnd;\n      this.transition({\n        from: options.hiddenStyle,\n        to: options.visibleStyle,\n        isCleaning: true,\n        onTransitionEnd: onTransitionEnd\n      });\n    };\n    proto.onRevealTransitionEnd = function() {\n      if (!this.isHidden) {\n        this.emitEvent('reveal');\n      }\n    };\n    proto.getHideRevealTransitionEndProperty = function(styleProperty) {\n      var optionStyle = this.layout.options[styleProperty];\n      if (optionStyle.opacity) {\n        return 'opacity';\n      }\n      for (var prop in optionStyle) {\n        return prop;\n      }\n    };\n    proto.hide = function() {\n      this.isHidden = true;\n      this.css({display: ''});\n      var options = this.layout.options;\n      var onTransitionEnd = {};\n      var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n      onTransitionEnd[transitionEndProperty] = this.onHideTransitionEnd;\n      this.transition({\n        from: options.visibleStyle,\n        to: options.hiddenStyle,\n        isCleaning: true,\n        onTransitionEnd: onTransitionEnd\n      });\n    };\n    proto.onHideTransitionEnd = function() {\n      if (this.isHidden) {\n        this.css({display: 'none'});\n        this.emitEvent('hide');\n      }\n    };\n    proto.destroy = function() {\n      this.css({\n        position: '',\n        left: '',\n        right: '',\n        top: '',\n        bottom: '',\n        transition: '',\n        transform: ''\n      });\n    };\n    return Item;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"a\", [\"7\", \"9\", \"6\", \"8\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    'use strict';\n    if (typeof define == 'function' && define.amd) {\n      define(['ev-emitter/ev-emitter', 'get-size/get-size', 'fizzy-ui-utils/utils', './item'], function(EvEmitter, getSize, utils, Item) {\n        return factory(window, EvEmitter, getSize, utils, Item);\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory(window, $__require('7'), $__require('9'), $__require('6'), $__require('8'));\n    } else {\n      window.Outlayer = factory(window, window.EvEmitter, window.getSize, window.fizzyUIUtils, window.Outlayer.Item);\n    }\n  }(window, function factory(window, EvEmitter, getSize, utils, Item) {\n    'use strict';\n    var console = window.console;\n    var jQuery = window.jQuery;\n    var noop = function() {};\n    var GUID = 0;\n    var instances = {};\n    function Outlayer(element, options) {\n      var queryElement = utils.getQueryElement(element);\n      if (!queryElement) {\n        if (console) {\n          console.error('Bad element for ' + this.constructor.namespace + ': ' + (queryElement || element));\n        }\n        return;\n      }\n      this.element = queryElement;\n      if (jQuery) {\n        this.$element = jQuery(this.element);\n      }\n      this.options = utils.extend({}, this.constructor.defaults);\n      this.option(options);\n      var id = ++GUID;\n      this.element.outlayerGUID = id;\n      instances[id] = this;\n      this._create();\n      var isInitLayout = this._getOption('initLayout');\n      if (isInitLayout) {\n        this.layout();\n      }\n    }\n    Outlayer.namespace = 'outlayer';\n    Outlayer.Item = Item;\n    Outlayer.defaults = {\n      containerStyle: {position: 'relative'},\n      initLayout: true,\n      originLeft: true,\n      originTop: true,\n      resize: true,\n      resizeContainer: true,\n      transitionDuration: '0.4s',\n      hiddenStyle: {\n        opacity: 0,\n        transform: 'scale(0.001)'\n      },\n      visibleStyle: {\n        opacity: 1,\n        transform: 'scale(1)'\n      }\n    };\n    var proto = Outlayer.prototype;\n    utils.extend(proto, EvEmitter.prototype);\n    proto.option = function(opts) {\n      utils.extend(this.options, opts);\n    };\n    proto._getOption = function(option) {\n      var oldOption = this.constructor.compatOptions[option];\n      return oldOption && this.options[oldOption] !== undefined ? this.options[oldOption] : this.options[option];\n    };\n    Outlayer.compatOptions = {\n      initLayout: 'isInitLayout',\n      horizontal: 'isHorizontal',\n      layoutInstant: 'isLayoutInstant',\n      originLeft: 'isOriginLeft',\n      originTop: 'isOriginTop',\n      resize: 'isResizeBound',\n      resizeContainer: 'isResizingContainer'\n    };\n    proto._create = function() {\n      this.reloadItems();\n      this.stamps = [];\n      this.stamp(this.options.stamp);\n      utils.extend(this.element.style, this.options.containerStyle);\n      var canBindResize = this._getOption('resize');\n      if (canBindResize) {\n        this.bindResize();\n      }\n    };\n    proto.reloadItems = function() {\n      this.items = this._itemize(this.element.children);\n    };\n    proto._itemize = function(elems) {\n      var itemElems = this._filterFindItemElements(elems);\n      var Item = this.constructor.Item;\n      var items = [];\n      for (var i = 0; i < itemElems.length; i++) {\n        var elem = itemElems[i];\n        var item = new Item(elem, this);\n        items.push(item);\n      }\n      return items;\n    };\n    proto._filterFindItemElements = function(elems) {\n      return utils.filterFindElements(elems, this.options.itemSelector);\n    };\n    proto.getItemElements = function() {\n      return this.items.map(function(item) {\n        return item.element;\n      });\n    };\n    proto.layout = function() {\n      this._resetLayout();\n      this._manageStamps();\n      var layoutInstant = this._getOption('layoutInstant');\n      var isInstant = layoutInstant !== undefined ? layoutInstant : !this._isLayoutInited;\n      this.layoutItems(this.items, isInstant);\n      this._isLayoutInited = true;\n    };\n    proto._init = proto.layout;\n    proto._resetLayout = function() {\n      this.getSize();\n    };\n    proto.getSize = function() {\n      this.size = getSize(this.element);\n    };\n    proto._getMeasurement = function(measurement, size) {\n      var option = this.options[measurement];\n      var elem;\n      if (!option) {\n        this[measurement] = 0;\n      } else {\n        if (typeof option == 'string') {\n          elem = this.element.querySelector(option);\n        } else if (option instanceof HTMLElement) {\n          elem = option;\n        }\n        this[measurement] = elem ? getSize(elem)[size] : option;\n      }\n    };\n    proto.layoutItems = function(items, isInstant) {\n      items = this._getItemsForLayout(items);\n      this._layoutItems(items, isInstant);\n      this._postLayout();\n    };\n    proto._getItemsForLayout = function(items) {\n      return items.filter(function(item) {\n        return !item.isIgnored;\n      });\n    };\n    proto._layoutItems = function(items, isInstant) {\n      this._emitCompleteOnItems('layout', items);\n      if (!items || !items.length) {\n        return;\n      }\n      var queue = [];\n      items.forEach(function(item) {\n        var position = this._getItemLayoutPosition(item);\n        position.item = item;\n        position.isInstant = isInstant || item.isLayoutInstant;\n        queue.push(position);\n      }, this);\n      this._processLayoutQueue(queue);\n    };\n    proto._getItemLayoutPosition = function() {\n      return {\n        x: 0,\n        y: 0\n      };\n    };\n    proto._processLayoutQueue = function(queue) {\n      this.updateStagger();\n      queue.forEach(function(obj, i) {\n        this._positionItem(obj.item, obj.x, obj.y, obj.isInstant, i);\n      }, this);\n    };\n    proto.updateStagger = function() {\n      var stagger = this.options.stagger;\n      if (stagger === null || stagger === undefined) {\n        this.stagger = 0;\n        return;\n      }\n      this.stagger = getMilliseconds(stagger);\n      return this.stagger;\n    };\n    proto._positionItem = function(item, x, y, isInstant, i) {\n      if (isInstant) {\n        item.goTo(x, y);\n      } else {\n        item.stagger(i * this.stagger);\n        item.moveTo(x, y);\n      }\n    };\n    proto._postLayout = function() {\n      this.resizeContainer();\n    };\n    proto.resizeContainer = function() {\n      var isResizingContainer = this._getOption('resizeContainer');\n      if (!isResizingContainer) {\n        return;\n      }\n      var size = this._getContainerSize();\n      if (size) {\n        this._setContainerMeasure(size.width, true);\n        this._setContainerMeasure(size.height, false);\n      }\n    };\n    proto._getContainerSize = noop;\n    proto._setContainerMeasure = function(measure, isWidth) {\n      if (measure === undefined) {\n        return;\n      }\n      var elemSize = this.size;\n      if (elemSize.isBorderBox) {\n        measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight + elemSize.borderLeftWidth + elemSize.borderRightWidth : elemSize.paddingBottom + elemSize.paddingTop + elemSize.borderTopWidth + elemSize.borderBottomWidth;\n      }\n      measure = Math.max(measure, 0);\n      this.element.style[isWidth ? 'width' : 'height'] = measure + 'px';\n    };\n    proto._emitCompleteOnItems = function(eventName, items) {\n      var _this = this;\n      function onComplete() {\n        _this.dispatchEvent(eventName + 'Complete', null, [items]);\n      }\n      var count = items.length;\n      if (!items || !count) {\n        onComplete();\n        return;\n      }\n      var doneCount = 0;\n      function tick() {\n        doneCount++;\n        if (doneCount == count) {\n          onComplete();\n        }\n      }\n      items.forEach(function(item) {\n        item.once(eventName, tick);\n      });\n    };\n    proto.dispatchEvent = function(type, event, args) {\n      var emitArgs = event ? [event].concat(args) : args;\n      this.emitEvent(type, emitArgs);\n      if (jQuery) {\n        this.$element = this.$element || jQuery(this.element);\n        if (event) {\n          var $event = jQuery.Event(event);\n          $event.type = type;\n          this.$element.trigger($event, args);\n        } else {\n          this.$element.trigger(type, args);\n        }\n      }\n    };\n    proto.ignore = function(elem) {\n      var item = this.getItem(elem);\n      if (item) {\n        item.isIgnored = true;\n      }\n    };\n    proto.unignore = function(elem) {\n      var item = this.getItem(elem);\n      if (item) {\n        delete item.isIgnored;\n      }\n    };\n    proto.stamp = function(elems) {\n      elems = this._find(elems);\n      if (!elems) {\n        return;\n      }\n      this.stamps = this.stamps.concat(elems);\n      elems.forEach(this.ignore, this);\n    };\n    proto.unstamp = function(elems) {\n      elems = this._find(elems);\n      if (!elems) {\n        return;\n      }\n      elems.forEach(function(elem) {\n        utils.removeFrom(this.stamps, elem);\n        this.unignore(elem);\n      }, this);\n    };\n    proto._find = function(elems) {\n      if (!elems) {\n        return;\n      }\n      if (typeof elems == 'string') {\n        elems = this.element.querySelectorAll(elems);\n      }\n      elems = utils.makeArray(elems);\n      return elems;\n    };\n    proto._manageStamps = function() {\n      if (!this.stamps || !this.stamps.length) {\n        return;\n      }\n      this._getBoundingRect();\n      this.stamps.forEach(this._manageStamp, this);\n    };\n    proto._getBoundingRect = function() {\n      var boundingRect = this.element.getBoundingClientRect();\n      var size = this.size;\n      this._boundingRect = {\n        left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n        top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n        right: boundingRect.right - (size.paddingRight + size.borderRightWidth),\n        bottom: boundingRect.bottom - (size.paddingBottom + size.borderBottomWidth)\n      };\n    };\n    proto._manageStamp = noop;\n    proto._getElementOffset = function(elem) {\n      var boundingRect = elem.getBoundingClientRect();\n      var thisRect = this._boundingRect;\n      var size = getSize(elem);\n      var offset = {\n        left: boundingRect.left - thisRect.left - size.marginLeft,\n        top: boundingRect.top - thisRect.top - size.marginTop,\n        right: thisRect.right - boundingRect.right - size.marginRight,\n        bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n      };\n      return offset;\n    };\n    proto.handleEvent = utils.handleEvent;\n    proto.bindResize = function() {\n      window.addEventListener('resize', this);\n      this.isResizeBound = true;\n    };\n    proto.unbindResize = function() {\n      window.removeEventListener('resize', this);\n      this.isResizeBound = false;\n    };\n    proto.onresize = function() {\n      this.resize();\n    };\n    utils.debounceMethod(Outlayer, 'onresize', 100);\n    proto.resize = function() {\n      if (!this.isResizeBound || !this.needsResizeLayout()) {\n        return;\n      }\n      this.layout();\n    };\n    proto.needsResizeLayout = function() {\n      var size = getSize(this.element);\n      var hasSizes = this.size && size;\n      return hasSizes && size.innerWidth !== this.size.innerWidth;\n    };\n    proto.addItems = function(elems) {\n      var items = this._itemize(elems);\n      if (items.length) {\n        this.items = this.items.concat(items);\n      }\n      return items;\n    };\n    proto.appended = function(elems) {\n      var items = this.addItems(elems);\n      if (!items.length) {\n        return;\n      }\n      this.layoutItems(items, true);\n      this.reveal(items);\n    };\n    proto.prepended = function(elems) {\n      var items = this._itemize(elems);\n      if (!items.length) {\n        return;\n      }\n      var previousItems = this.items.slice(0);\n      this.items = items.concat(previousItems);\n      this._resetLayout();\n      this._manageStamps();\n      this.layoutItems(items, true);\n      this.reveal(items);\n      this.layoutItems(previousItems);\n    };\n    proto.reveal = function(items) {\n      this._emitCompleteOnItems('reveal', items);\n      if (!items || !items.length) {\n        return;\n      }\n      var stagger = this.updateStagger();\n      items.forEach(function(item, i) {\n        item.stagger(i * stagger);\n        item.reveal();\n      });\n    };\n    proto.hide = function(items) {\n      this._emitCompleteOnItems('hide', items);\n      if (!items || !items.length) {\n        return;\n      }\n      var stagger = this.updateStagger();\n      items.forEach(function(item, i) {\n        item.stagger(i * stagger);\n        item.hide();\n      });\n    };\n    proto.revealItemElements = function(elems) {\n      var items = this.getItems(elems);\n      this.reveal(items);\n    };\n    proto.hideItemElements = function(elems) {\n      var items = this.getItems(elems);\n      this.hide(items);\n    };\n    proto.getItem = function(elem) {\n      for (var i = 0; i < this.items.length; i++) {\n        var item = this.items[i];\n        if (item.element == elem) {\n          return item;\n        }\n      }\n    };\n    proto.getItems = function(elems) {\n      elems = utils.makeArray(elems);\n      var items = [];\n      elems.forEach(function(elem) {\n        var item = this.getItem(elem);\n        if (item) {\n          items.push(item);\n        }\n      }, this);\n      return items;\n    };\n    proto.remove = function(elems) {\n      var removeItems = this.getItems(elems);\n      this._emitCompleteOnItems('remove', removeItems);\n      if (!removeItems || !removeItems.length) {\n        return;\n      }\n      removeItems.forEach(function(item) {\n        item.remove();\n        utils.removeFrom(this.items, item);\n      }, this);\n    };\n    proto.destroy = function() {\n      var style = this.element.style;\n      style.height = '';\n      style.position = '';\n      style.width = '';\n      this.items.forEach(function(item) {\n        item.destroy();\n      });\n      this.unbindResize();\n      var id = this.element.outlayerGUID;\n      delete instances[id];\n      delete this.element.outlayerGUID;\n      if (jQuery) {\n        jQuery.removeData(this.element, this.constructor.namespace);\n      }\n    };\n    Outlayer.data = function(elem) {\n      elem = utils.getQueryElement(elem);\n      var id = elem && elem.outlayerGUID;\n      return id && instances[id];\n    };\n    Outlayer.create = function(namespace, options) {\n      var Layout = subclass(Outlayer);\n      Layout.defaults = utils.extend({}, Outlayer.defaults);\n      utils.extend(Layout.defaults, options);\n      Layout.compatOptions = utils.extend({}, Outlayer.compatOptions);\n      Layout.namespace = namespace;\n      Layout.data = Outlayer.data;\n      Layout.Item = subclass(Item);\n      utils.htmlInit(Layout, namespace);\n      if (jQuery && jQuery.bridget) {\n        jQuery.bridget(namespace, Layout);\n      }\n      return Layout;\n    };\n    function subclass(Parent) {\n      function SubClass() {\n        Parent.apply(this, arguments);\n      }\n      SubClass.prototype = Object.create(Parent.prototype);\n      SubClass.prototype.constructor = SubClass;\n      return SubClass;\n    }\n    var msUnits = {\n      ms: 1,\n      s: 1000\n    };\n    function getMilliseconds(time) {\n      if (typeof time == 'number') {\n        return time;\n      }\n      var matches = time.match(/(^\\d*\\.?\\d*)(\\w*)/);\n      var num = matches && matches[1];\n      var unit = matches && matches[2];\n      if (!num.length) {\n        return 0;\n      }\n      num = parseFloat(num);\n      var mult = msUnits[unit] || 1;\n      return num * mult;\n    }\n    Outlayer.Item = Item;\n    return Outlayer;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"3\", [\"4\"], true, function($__require, exports, module) {\n  var process = $__require(\"4\");\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory();\n    } else {\n      window.Packery = window.Packery || {};\n      window.Packery.Rect = factory();\n    }\n  }(window, function factory() {\n    'use strict';\n    function Rect(props) {\n      for (var prop in Rect.defaults) {\n        this[prop] = Rect.defaults[prop];\n      }\n      for (prop in props) {\n        this[prop] = props[prop];\n      }\n    }\n    Rect.defaults = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    var proto = Rect.prototype;\n    proto.contains = function(rect) {\n      var otherWidth = rect.width || 0;\n      var otherHeight = rect.height || 0;\n      return this.x <= rect.x && this.y <= rect.y && this.x + this.width >= rect.x + otherWidth && this.y + this.height >= rect.y + otherHeight;\n    };\n    proto.overlaps = function(rect) {\n      var thisRight = this.x + this.width;\n      var thisBottom = this.y + this.height;\n      var rectRight = rect.x + rect.width;\n      var rectBottom = rect.y + rect.height;\n      return this.x < rectRight && thisRight > rect.x && this.y < rectBottom && thisBottom > rect.y;\n    };\n    proto.getMaximalFreeRects = function(rect) {\n      if (!this.overlaps(rect)) {\n        return false;\n      }\n      var freeRects = [];\n      var freeRect;\n      var thisRight = this.x + this.width;\n      var thisBottom = this.y + this.height;\n      var rectRight = rect.x + rect.width;\n      var rectBottom = rect.y + rect.height;\n      if (this.y < rect.y) {\n        freeRect = new Rect({\n          x: this.x,\n          y: this.y,\n          width: this.width,\n          height: rect.y - this.y\n        });\n        freeRects.push(freeRect);\n      }\n      if (thisRight > rectRight) {\n        freeRect = new Rect({\n          x: rectRight,\n          y: this.y,\n          width: thisRight - rectRight,\n          height: this.height\n        });\n        freeRects.push(freeRect);\n      }\n      if (thisBottom > rectBottom) {\n        freeRect = new Rect({\n          x: this.x,\n          y: rectBottom,\n          width: this.width,\n          height: thisBottom - rectBottom\n        });\n        freeRects.push(freeRect);\n      }\n      if (this.x < rect.x) {\n        freeRect = new Rect({\n          x: this.x,\n          y: this.y,\n          width: rect.x - this.x,\n          height: this.height\n        });\n        freeRects.push(freeRect);\n      }\n      return freeRects;\n    };\n    proto.canFit = function(rect) {\n      return this.width >= rect.width && this.height >= rect.height;\n    };\n    return Rect;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"b\", [\"a\", \"3\", \"4\"], true, function($__require, exports, module) {\n  var process = $__require(\"4\");\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['outlayer/outlayer', './rect'], factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory($__require('a'), $__require('3'));\n    } else {\n      window.Packery.Item = factory(window.Outlayer, window.Packery.Rect);\n    }\n  }(window, function factory(Outlayer, Rect) {\n    'use strict';\n    var docElemStyle = document.documentElement.style;\n    var transformProperty = typeof docElemStyle.transform == 'string' ? 'transform' : 'WebkitTransform';\n    var Item = function PackeryItem() {\n      Outlayer.Item.apply(this, arguments);\n    };\n    var proto = Item.prototype = Object.create(Outlayer.Item.prototype);\n    var __create = proto._create;\n    proto._create = function() {\n      __create.call(this);\n      this.rect = new Rect();\n    };\n    var _moveTo = proto.moveTo;\n    proto.moveTo = function(x, y) {\n      var dx = Math.abs(this.position.x - x);\n      var dy = Math.abs(this.position.y - y);\n      var canHackGoTo = this.layout.dragItemCount && !this.isPlacing && !this.isTransitioning && dx < 1 && dy < 1;\n      if (canHackGoTo) {\n        this.goTo(x, y);\n        return;\n      }\n      _moveTo.apply(this, arguments);\n    };\n    proto.enablePlacing = function() {\n      this.removeTransitionStyles();\n      if (this.isTransitioning && transformProperty) {\n        this.element.style[transformProperty] = 'none';\n      }\n      this.isTransitioning = false;\n      this.getSize();\n      this.layout._setRectSize(this.element, this.rect);\n      this.isPlacing = true;\n    };\n    proto.disablePlacing = function() {\n      this.isPlacing = false;\n    };\n    proto.removeElem = function() {\n      this.element.parentNode.removeChild(this.element);\n      this.layout.packer.addSpace(this.rect);\n      this.emitEvent('remove', [this]);\n    };\n    proto.showDropPlaceholder = function() {\n      var dropPlaceholder = this.dropPlaceholder;\n      if (!dropPlaceholder) {\n        dropPlaceholder = this.dropPlaceholder = document.createElement('div');\n        dropPlaceholder.className = 'packery-drop-placeholder';\n        dropPlaceholder.style.position = 'absolute';\n      }\n      dropPlaceholder.style.width = this.size.width + 'px';\n      dropPlaceholder.style.height = this.size.height + 'px';\n      this.positionDropPlaceholder();\n      this.layout.element.appendChild(dropPlaceholder);\n    };\n    proto.positionDropPlaceholder = function() {\n      this.dropPlaceholder.style[transformProperty] = 'translate(' + this.rect.x + 'px, ' + this.rect.y + 'px)';\n    };\n    proto.hideDropPlaceholder = function() {\n      var parent = this.dropPlaceholder.parentNode;\n      if (parent) {\n        parent.removeChild(this.dropPlaceholder);\n      }\n    };\n    return Item;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"c\", [\"9\", \"a\", \"3\", \"2\", \"b\", \"4\"], true, function($__require, exports, module) {\n  var process = $__require(\"4\");\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['get-size/get-size', 'outlayer/outlayer', './rect', './packer', './item'], factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory($__require('9'), $__require('a'), $__require('3'), $__require('2'), $__require('b'));\n    } else {\n      window.Packery = factory(window.getSize, window.Outlayer, window.Packery.Rect, window.Packery.Packer, window.Packery.Item);\n    }\n  }(window, function factory(getSize, Outlayer, Rect, Packer, Item) {\n    'use strict';\n    Rect.prototype.canFit = function(rect) {\n      return this.width >= rect.width - 1 && this.height >= rect.height - 1;\n    };\n    var Packery = Outlayer.create('packery');\n    Packery.Item = Item;\n    var proto = Packery.prototype;\n    proto._create = function() {\n      Outlayer.prototype._create.call(this);\n      this.packer = new Packer();\n      this.shiftPacker = new Packer();\n      this.isEnabled = true;\n      this.dragItemCount = 0;\n      var _this = this;\n      this.handleDraggabilly = {\n        dragStart: function() {\n          _this.itemDragStart(this.element);\n        },\n        dragMove: function() {\n          _this.itemDragMove(this.element, this.position.x, this.position.y);\n        },\n        dragEnd: function() {\n          _this.itemDragEnd(this.element);\n        }\n      };\n      this.handleUIDraggable = {\n        start: function handleUIDraggableStart(event, ui) {\n          if (!ui) {\n            return;\n          }\n          _this.itemDragStart(event.currentTarget);\n        },\n        drag: function handleUIDraggableDrag(event, ui) {\n          if (!ui) {\n            return;\n          }\n          _this.itemDragMove(event.currentTarget, ui.position.left, ui.position.top);\n        },\n        stop: function handleUIDraggableStop(event, ui) {\n          if (!ui) {\n            return;\n          }\n          _this.itemDragEnd(event.currentTarget);\n        }\n      };\n    };\n    proto._resetLayout = function() {\n      this.getSize();\n      this._getMeasurements();\n      var width,\n          height,\n          sortDirection;\n      if (this._getOption('horizontal')) {\n        width = Infinity;\n        height = this.size.innerHeight + this.gutter;\n        sortDirection = 'rightwardTopToBottom';\n      } else {\n        width = this.size.innerWidth + this.gutter;\n        height = Infinity;\n        sortDirection = 'downwardLeftToRight';\n      }\n      this.packer.width = this.shiftPacker.width = width;\n      this.packer.height = this.shiftPacker.height = height;\n      this.packer.sortDirection = this.shiftPacker.sortDirection = sortDirection;\n      this.packer.reset();\n      this.maxY = 0;\n      this.maxX = 0;\n    };\n    proto._getMeasurements = function() {\n      this._getMeasurement('columnWidth', 'width');\n      this._getMeasurement('rowHeight', 'height');\n      this._getMeasurement('gutter', 'width');\n    };\n    proto._getItemLayoutPosition = function(item) {\n      this._setRectSize(item.element, item.rect);\n      if (this.isShifting || this.dragItemCount > 0) {\n        var packMethod = this._getPackMethod();\n        this.packer[packMethod](item.rect);\n      } else {\n        this.packer.pack(item.rect);\n      }\n      this._setMaxXY(item.rect);\n      return item.rect;\n    };\n    proto.shiftLayout = function() {\n      this.isShifting = true;\n      this.layout();\n      delete this.isShifting;\n    };\n    proto._getPackMethod = function() {\n      return this._getOption('horizontal') ? 'rowPack' : 'columnPack';\n    };\n    proto._setMaxXY = function(rect) {\n      this.maxX = Math.max(rect.x + rect.width, this.maxX);\n      this.maxY = Math.max(rect.y + rect.height, this.maxY);\n    };\n    proto._setRectSize = function(elem, rect) {\n      var size = getSize(elem);\n      var w = size.outerWidth;\n      var h = size.outerHeight;\n      if (w || h) {\n        w = this._applyGridGutter(w, this.columnWidth);\n        h = this._applyGridGutter(h, this.rowHeight);\n      }\n      rect.width = Math.min(w, this.packer.width);\n      rect.height = Math.min(h, this.packer.height);\n    };\n    proto._applyGridGutter = function(measurement, gridSize) {\n      if (!gridSize) {\n        return measurement + this.gutter;\n      }\n      gridSize += this.gutter;\n      var remainder = measurement % gridSize;\n      var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n      measurement = Math[mathMethod](measurement / gridSize) * gridSize;\n      return measurement;\n    };\n    proto._getContainerSize = function() {\n      if (this._getOption('horizontal')) {\n        return {width: this.maxX - this.gutter};\n      } else {\n        return {height: this.maxY - this.gutter};\n      }\n    };\n    proto._manageStamp = function(elem) {\n      var item = this.getItem(elem);\n      var rect;\n      if (item && item.isPlacing) {\n        rect = item.rect;\n      } else {\n        var offset = this._getElementOffset(elem);\n        rect = new Rect({\n          x: this._getOption('originLeft') ? offset.left : offset.right,\n          y: this._getOption('originTop') ? offset.top : offset.bottom\n        });\n      }\n      this._setRectSize(elem, rect);\n      this.packer.placed(rect);\n      this._setMaxXY(rect);\n    };\n    function verticalSorter(a, b) {\n      return a.position.y - b.position.y || a.position.x - b.position.x;\n    }\n    function horizontalSorter(a, b) {\n      return a.position.x - b.position.x || a.position.y - b.position.y;\n    }\n    proto.sortItemsByPosition = function() {\n      var sorter = this._getOption('horizontal') ? horizontalSorter : verticalSorter;\n      this.items.sort(sorter);\n    };\n    proto.fit = function(elem, x, y) {\n      var item = this.getItem(elem);\n      if (!item) {\n        return;\n      }\n      this.stamp(item.element);\n      item.enablePlacing();\n      this.updateShiftTargets(item);\n      x = x === undefined ? item.rect.x : x;\n      y = y === undefined ? item.rect.y : y;\n      this.shift(item, x, y);\n      this._bindFitEvents(item);\n      item.moveTo(item.rect.x, item.rect.y);\n      this.shiftLayout();\n      this.unstamp(item.element);\n      this.sortItemsByPosition();\n      item.disablePlacing();\n    };\n    proto._bindFitEvents = function(item) {\n      var _this = this;\n      var ticks = 0;\n      function onLayout() {\n        ticks++;\n        if (ticks != 2) {\n          return;\n        }\n        _this.dispatchEvent('fitComplete', null, [item]);\n      }\n      item.once('layout', onLayout);\n      this.once('layoutComplete', onLayout);\n    };\n    proto.resize = function() {\n      if (!this.isResizeBound || !this.needsResizeLayout()) {\n        return;\n      }\n      if (this.options.shiftPercentResize) {\n        this.resizeShiftPercentLayout();\n      } else {\n        this.layout();\n      }\n    };\n    proto.needsResizeLayout = function() {\n      var size = getSize(this.element);\n      var innerSize = this._getOption('horizontal') ? 'innerHeight' : 'innerWidth';\n      return size[innerSize] != this.size[innerSize];\n    };\n    proto.resizeShiftPercentLayout = function() {\n      var items = this._getItemsForLayout(this.items);\n      var isHorizontal = this._getOption('horizontal');\n      var coord = isHorizontal ? 'y' : 'x';\n      var measure = isHorizontal ? 'height' : 'width';\n      var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n      var innerSize = isHorizontal ? 'innerHeight' : 'innerWidth';\n      var previousSegment = this[segmentName];\n      previousSegment = previousSegment && previousSegment + this.gutter;\n      if (previousSegment) {\n        this._getMeasurements();\n        var currentSegment = this[segmentName] + this.gutter;\n        items.forEach(function(item) {\n          var seg = Math.round(item.rect[coord] / previousSegment);\n          item.rect[coord] = seg * currentSegment;\n        });\n      } else {\n        var currentSize = getSize(this.element)[innerSize] + this.gutter;\n        var previousSize = this.packer[measure];\n        items.forEach(function(item) {\n          item.rect[coord] = (item.rect[coord] / previousSize) * currentSize;\n        });\n      }\n      this.shiftLayout();\n    };\n    proto.itemDragStart = function(elem) {\n      if (!this.isEnabled) {\n        return;\n      }\n      this.stamp(elem);\n      var item = this.getItem(elem);\n      if (!item) {\n        return;\n      }\n      item.enablePlacing();\n      item.showDropPlaceholder();\n      this.dragItemCount++;\n      this.updateShiftTargets(item);\n    };\n    proto.updateShiftTargets = function(dropItem) {\n      this.shiftPacker.reset();\n      this._getBoundingRect();\n      var isOriginLeft = this._getOption('originLeft');\n      var isOriginTop = this._getOption('originTop');\n      this.stamps.forEach(function(stamp) {\n        var item = this.getItem(stamp);\n        if (item && item.isPlacing) {\n          return;\n        }\n        var offset = this._getElementOffset(stamp);\n        var rect = new Rect({\n          x: isOriginLeft ? offset.left : offset.right,\n          y: isOriginTop ? offset.top : offset.bottom\n        });\n        this._setRectSize(stamp, rect);\n        this.shiftPacker.placed(rect);\n      }, this);\n      var isHorizontal = this._getOption('horizontal');\n      var segmentName = isHorizontal ? 'rowHeight' : 'columnWidth';\n      var measure = isHorizontal ? 'height' : 'width';\n      this.shiftTargetKeys = [];\n      this.shiftTargets = [];\n      var boundsSize;\n      var segment = this[segmentName];\n      segment = segment && segment + this.gutter;\n      if (segment) {\n        var segmentSpan = Math.ceil(dropItem.rect[measure] / segment);\n        var segs = Math.floor((this.shiftPacker[measure] + this.gutter) / segment);\n        boundsSize = (segs - segmentSpan) * segment;\n        for (var i = 0; i < segs; i++) {\n          var initialX = isHorizontal ? 0 : i * segment;\n          var initialY = isHorizontal ? i * segment : 0;\n          this._addShiftTarget(initialX, initialY, boundsSize);\n        }\n      } else {\n        boundsSize = (this.shiftPacker[measure] + this.gutter) - dropItem.rect[measure];\n        this._addShiftTarget(0, 0, boundsSize);\n      }\n      var items = this._getItemsForLayout(this.items);\n      var packMethod = this._getPackMethod();\n      items.forEach(function(item) {\n        var rect = item.rect;\n        this._setRectSize(item.element, rect);\n        this.shiftPacker[packMethod](rect);\n        this._addShiftTarget(rect.x, rect.y, boundsSize);\n        var cornerX = isHorizontal ? rect.x + rect.width : rect.x;\n        var cornerY = isHorizontal ? rect.y : rect.y + rect.height;\n        this._addShiftTarget(cornerX, cornerY, boundsSize);\n        if (segment) {\n          var segSpan = Math.round(rect[measure] / segment);\n          for (var i = 1; i < segSpan; i++) {\n            var segX = isHorizontal ? cornerX : rect.x + segment * i;\n            var segY = isHorizontal ? rect.y + segment * i : cornerY;\n            this._addShiftTarget(segX, segY, boundsSize);\n          }\n        }\n      }, this);\n    };\n    proto._addShiftTarget = function(x, y, boundsSize) {\n      var checkCoord = this._getOption('horizontal') ? y : x;\n      if (checkCoord !== 0 && checkCoord > boundsSize) {\n        return;\n      }\n      var key = x + ',' + y;\n      var hasKey = this.shiftTargetKeys.indexOf(key) != -1;\n      if (hasKey) {\n        return;\n      }\n      this.shiftTargetKeys.push(key);\n      this.shiftTargets.push({\n        x: x,\n        y: y\n      });\n    };\n    proto.shift = function(item, x, y) {\n      var shiftPosition;\n      var minDistance = Infinity;\n      var position = {\n        x: x,\n        y: y\n      };\n      this.shiftTargets.forEach(function(target) {\n        var distance = getDistance(target, position);\n        if (distance < minDistance) {\n          shiftPosition = target;\n          minDistance = distance;\n        }\n      });\n      item.rect.x = shiftPosition.x;\n      item.rect.y = shiftPosition.y;\n    };\n    function getDistance(a, b) {\n      var dx = b.x - a.x;\n      var dy = b.y - a.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    }\n    var DRAG_THROTTLE_TIME = 120;\n    proto.itemDragMove = function(elem, x, y) {\n      var item = this.isEnabled && this.getItem(elem);\n      if (!item) {\n        return;\n      }\n      x -= this.size.paddingLeft;\n      y -= this.size.paddingTop;\n      var _this = this;\n      function onDrag() {\n        _this.shift(item, x, y);\n        item.positionDropPlaceholder();\n        _this.layout();\n      }\n      var now = new Date();\n      if (this._itemDragTime && now - this._itemDragTime < DRAG_THROTTLE_TIME) {\n        clearTimeout(this.dragTimeout);\n        this.dragTimeout = setTimeout(onDrag, DRAG_THROTTLE_TIME);\n      } else {\n        onDrag();\n        this._itemDragTime = now;\n      }\n    };\n    proto.itemDragEnd = function(elem) {\n      var item = this.isEnabled && this.getItem(elem);\n      if (!item) {\n        return;\n      }\n      clearTimeout(this.dragTimeout);\n      item.element.classList.add('is-positioning-post-drag');\n      var completeCount = 0;\n      var _this = this;\n      function onDragEndLayoutComplete() {\n        completeCount++;\n        if (completeCount != 2) {\n          return;\n        }\n        item.element.classList.remove('is-positioning-post-drag');\n        item.hideDropPlaceholder();\n        _this.dispatchEvent('dragItemPositioned', null, [item]);\n      }\n      item.once('layout', onDragEndLayoutComplete);\n      this.once('layoutComplete', onDragEndLayoutComplete);\n      item.moveTo(item.rect.x, item.rect.y);\n      this.layout();\n      this.dragItemCount = Math.max(0, this.dragItemCount - 1);\n      this.sortItemsByPosition();\n      item.disablePlacing();\n      this.unstamp(item.element);\n    };\n    proto.bindDraggabillyEvents = function(draggie) {\n      this._bindDraggabillyEvents(draggie, 'on');\n    };\n    proto.unbindDraggabillyEvents = function(draggie) {\n      this._bindDraggabillyEvents(draggie, 'off');\n    };\n    proto._bindDraggabillyEvents = function(draggie, method) {\n      var handlers = this.handleDraggabilly;\n      draggie[method]('dragStart', handlers.dragStart);\n      draggie[method]('dragMove', handlers.dragMove);\n      draggie[method]('dragEnd', handlers.dragEnd);\n    };\n    proto.bindUIDraggableEvents = function($elems) {\n      this._bindUIDraggableEvents($elems, 'on');\n    };\n    proto.unbindUIDraggableEvents = function($elems) {\n      this._bindUIDraggableEvents($elems, 'off');\n    };\n    proto._bindUIDraggableEvents = function($elems, method) {\n      var handlers = this.handleUIDraggable;\n      $elems[method]('dragstart', handlers.start)[method]('drag', handlers.drag)[method]('dragstop', handlers.stop);\n    };\n    var _destroy = proto.destroy;\n    proto.destroy = function() {\n      _destroy.apply(this, arguments);\n      this.isEnabled = false;\n    };\n    Packery.Rect = Rect;\n    Packery.Packer = Packer;\n    return Packery;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"9\", [], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    'use strict';\n    if (typeof define == 'function' && define.amd) {\n      define(function() {\n        return factory();\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory();\n    } else {\n      window.getSize = factory();\n    }\n  })(window, function factory() {\n    'use strict';\n    function getStyleSize(value) {\n      var num = parseFloat(value);\n      var isValid = value.indexOf('%') == -1 && !isNaN(num);\n      return isValid && num;\n    }\n    function noop() {}\n    var logError = typeof console == 'undefined' ? noop : function(message) {\n      console.error(message);\n    };\n    var measurements = ['paddingLeft', 'paddingRight', 'paddingTop', 'paddingBottom', 'marginLeft', 'marginRight', 'marginTop', 'marginBottom', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'borderBottomWidth'];\n    var measurementsLength = measurements.length;\n    function getZeroSize() {\n      var size = {\n        width: 0,\n        height: 0,\n        innerWidth: 0,\n        innerHeight: 0,\n        outerWidth: 0,\n        outerHeight: 0\n      };\n      for (var i = 0; i < measurementsLength; i++) {\n        var measurement = measurements[i];\n        size[measurement] = 0;\n      }\n      return size;\n    }\n    function getStyle(elem) {\n      var style = getComputedStyle(elem);\n      if (!style) {\n        logError('Style returned ' + style + '. Are you running this code in a hidden iframe on Firefox? ' + 'See http://bit.ly/getsizebug1');\n      }\n      return style;\n    }\n    var isSetup = false;\n    var isBoxSizeOuter;\n    function setup() {\n      if (isSetup) {\n        return;\n      }\n      isSetup = true;\n      var div = document.createElement('div');\n      div.style.width = '200px';\n      div.style.padding = '1px 2px 3px 4px';\n      div.style.borderStyle = 'solid';\n      div.style.borderWidth = '1px 2px 3px 4px';\n      div.style.boxSizing = 'border-box';\n      var body = document.body || document.documentElement;\n      body.appendChild(div);\n      var style = getStyle(div);\n      getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize(style.width) == 200;\n      body.removeChild(div);\n    }\n    function getSize(elem) {\n      setup();\n      if (typeof elem == 'string') {\n        elem = document.querySelector(elem);\n      }\n      if (!elem || typeof elem != 'object' || !elem.nodeType) {\n        return;\n      }\n      var style = getStyle(elem);\n      if (style.display == 'none') {\n        return getZeroSize();\n      }\n      var size = {};\n      size.width = elem.offsetWidth;\n      size.height = elem.offsetHeight;\n      var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n      for (var i = 0; i < measurementsLength; i++) {\n        var measurement = measurements[i];\n        var value = style[measurement];\n        var num = parseFloat(value);\n        size[measurement] = !isNaN(num) ? num : 0;\n      }\n      var paddingWidth = size.paddingLeft + size.paddingRight;\n      var paddingHeight = size.paddingTop + size.paddingBottom;\n      var marginWidth = size.marginLeft + size.marginRight;\n      var marginHeight = size.marginTop + size.marginBottom;\n      var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n      var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n      var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n      var styleWidth = getStyleSize(style.width);\n      if (styleWidth !== false) {\n        size.width = styleWidth + (isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth);\n      }\n      var styleHeight = getStyleSize(style.height);\n      if (styleHeight !== false) {\n        size.height = styleHeight + (isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight);\n      }\n      size.innerWidth = size.width - (paddingWidth + borderWidth);\n      size.innerHeight = size.height - (paddingHeight + borderHeight);\n      size.outerWidth = size.width + marginWidth;\n      size.outerHeight = size.height + marginHeight;\n      return size;\n    }\n    return getSize;\n  });\n  return module.exports;\n});\n\n$__System.registerDynamic(\"d\", [], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(global, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(factory);\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory();\n    } else {\n      global.EvEmitter = factory();\n    }\n  }(typeof window != 'undefined' ? window : this, function() {\n    \"use strict\";\n    function EvEmitter() {}\n    var proto = EvEmitter.prototype;\n    proto.on = function(eventName, listener) {\n      if (!eventName || !listener) {\n        return;\n      }\n      var events = this._events = this._events || {};\n      var listeners = events[eventName] = events[eventName] || [];\n      if (listeners.indexOf(listener) == -1) {\n        listeners.push(listener);\n      }\n      return this;\n    };\n    proto.once = function(eventName, listener) {\n      if (!eventName || !listener) {\n        return;\n      }\n      this.on(eventName, listener);\n      var onceEvents = this._onceEvents = this._onceEvents || {};\n      var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {};\n      onceListeners[listener] = true;\n      return this;\n    };\n    proto.off = function(eventName, listener) {\n      var listeners = this._events && this._events[eventName];\n      if (!listeners || !listeners.length) {\n        return;\n      }\n      var index = listeners.indexOf(listener);\n      if (index != -1) {\n        listeners.splice(index, 1);\n      }\n      return this;\n    };\n    proto.emitEvent = function(eventName, args) {\n      var listeners = this._events && this._events[eventName];\n      if (!listeners || !listeners.length) {\n        return;\n      }\n      var i = 0;\n      var listener = listeners[i];\n      args = args || [];\n      var onceListeners = this._onceEvents && this._onceEvents[eventName];\n      while (listener) {\n        var isOnce = onceListeners && onceListeners[listener];\n        if (isOnce) {\n          this.off(eventName, listener);\n          delete onceListeners[listener];\n        }\n        listener.apply(this, args);\n        i += isOnce ? 0 : 1;\n        listener = listeners[i];\n      }\n      return this;\n    };\n    return EvEmitter;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"e\", [\"d\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['ev-emitter/ev-emitter'], function(EvEmitter) {\n        return factory(window, EvEmitter);\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory(window, $__require('d'));\n    } else {\n      window.Unipointer = factory(window, window.EvEmitter);\n    }\n  }(window, function factory(window, EvEmitter) {\n    'use strict';\n    function noop() {}\n    function Unipointer() {}\n    var proto = Unipointer.prototype = Object.create(EvEmitter.prototype);\n    proto.bindStartEvent = function(elem) {\n      this._bindStartEvent(elem, true);\n    };\n    proto.unbindStartEvent = function(elem) {\n      this._bindStartEvent(elem, false);\n    };\n    proto._bindStartEvent = function(elem, isBind) {\n      isBind = isBind === undefined ? true : !!isBind;\n      var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\n      if (window.navigator.pointerEnabled) {\n        elem[bindMethod]('pointerdown', this);\n      } else if (window.navigator.msPointerEnabled) {\n        elem[bindMethod]('MSPointerDown', this);\n      } else {\n        elem[bindMethod]('mousedown', this);\n        elem[bindMethod]('touchstart', this);\n      }\n    };\n    proto.handleEvent = function(event) {\n      var method = 'on' + event.type;\n      if (this[method]) {\n        this[method](event);\n      }\n    };\n    proto.getTouch = function(touches) {\n      for (var i = 0; i < touches.length; i++) {\n        var touch = touches[i];\n        if (touch.identifier == this.pointerIdentifier) {\n          return touch;\n        }\n      }\n    };\n    proto.onmousedown = function(event) {\n      var button = event.button;\n      if (button && (button !== 0 && button !== 1)) {\n        return;\n      }\n      this._pointerDown(event, event);\n    };\n    proto.ontouchstart = function(event) {\n      this._pointerDown(event, event.changedTouches[0]);\n    };\n    proto.onMSPointerDown = proto.onpointerdown = function(event) {\n      this._pointerDown(event, event);\n    };\n    proto._pointerDown = function(event, pointer) {\n      if (this.isPointerDown) {\n        return;\n      }\n      this.isPointerDown = true;\n      this.pointerIdentifier = pointer.pointerId !== undefined ? pointer.pointerId : pointer.identifier;\n      this.pointerDown(event, pointer);\n    };\n    proto.pointerDown = function(event, pointer) {\n      this._bindPostStartEvents(event);\n      this.emitEvent('pointerDown', [event, pointer]);\n    };\n    var postStartEvents = {\n      mousedown: ['mousemove', 'mouseup'],\n      touchstart: ['touchmove', 'touchend', 'touchcancel'],\n      pointerdown: ['pointermove', 'pointerup', 'pointercancel'],\n      MSPointerDown: ['MSPointerMove', 'MSPointerUp', 'MSPointerCancel']\n    };\n    proto._bindPostStartEvents = function(event) {\n      if (!event) {\n        return;\n      }\n      var events = postStartEvents[event.type];\n      events.forEach(function(eventName) {\n        window.addEventListener(eventName, this);\n      }, this);\n      this._boundPointerEvents = events;\n    };\n    proto._unbindPostStartEvents = function() {\n      if (!this._boundPointerEvents) {\n        return;\n      }\n      this._boundPointerEvents.forEach(function(eventName) {\n        window.removeEventListener(eventName, this);\n      }, this);\n      delete this._boundPointerEvents;\n    };\n    proto.onmousemove = function(event) {\n      this._pointerMove(event, event);\n    };\n    proto.onMSPointerMove = proto.onpointermove = function(event) {\n      if (event.pointerId == this.pointerIdentifier) {\n        this._pointerMove(event, event);\n      }\n    };\n    proto.ontouchmove = function(event) {\n      var touch = this.getTouch(event.changedTouches);\n      if (touch) {\n        this._pointerMove(event, touch);\n      }\n    };\n    proto._pointerMove = function(event, pointer) {\n      this.pointerMove(event, pointer);\n    };\n    proto.pointerMove = function(event, pointer) {\n      this.emitEvent('pointerMove', [event, pointer]);\n    };\n    proto.onmouseup = function(event) {\n      this._pointerUp(event, event);\n    };\n    proto.onMSPointerUp = proto.onpointerup = function(event) {\n      if (event.pointerId == this.pointerIdentifier) {\n        this._pointerUp(event, event);\n      }\n    };\n    proto.ontouchend = function(event) {\n      var touch = this.getTouch(event.changedTouches);\n      if (touch) {\n        this._pointerUp(event, touch);\n      }\n    };\n    proto._pointerUp = function(event, pointer) {\n      this._pointerDone();\n      this.pointerUp(event, pointer);\n    };\n    proto.pointerUp = function(event, pointer) {\n      this.emitEvent('pointerUp', [event, pointer]);\n    };\n    proto._pointerDone = function() {\n      this.isPointerDown = false;\n      delete this.pointerIdentifier;\n      this._unbindPostStartEvents();\n      this.pointerDone();\n    };\n    proto.pointerDone = noop;\n    proto.onMSPointerCancel = proto.onpointercancel = function(event) {\n      if (event.pointerId == this.pointerIdentifier) {\n        this._pointerCancel(event, event);\n      }\n    };\n    proto.ontouchcancel = function(event) {\n      var touch = this.getTouch(event.changedTouches);\n      if (touch) {\n        this._pointerCancel(event, touch);\n      }\n    };\n    proto._pointerCancel = function(event, pointer) {\n      this._pointerDone();\n      this.pointerCancel(event, pointer);\n    };\n    proto.pointerCancel = function(event, pointer) {\n      this.emitEvent('pointerCancel', [event, pointer]);\n    };\n    Unipointer.getPointerPoint = function(pointer) {\n      return {\n        x: pointer.pageX,\n        y: pointer.pageY\n      };\n    };\n    return Unipointer;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"f\", [\"e\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['unipointer/unipointer'], function(Unipointer) {\n        return factory(window, Unipointer);\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory(window, $__require('e'));\n    } else {\n      window.Unidragger = factory(window, window.Unipointer);\n    }\n  }(window, function factory(window, Unipointer) {\n    'use strict';\n    function noop() {}\n    function Unidragger() {}\n    var proto = Unidragger.prototype = Object.create(Unipointer.prototype);\n    proto.bindHandles = function() {\n      this._bindHandles(true);\n    };\n    proto.unbindHandles = function() {\n      this._bindHandles(false);\n    };\n    var navigator = window.navigator;\n    proto._bindHandles = function(isBind) {\n      isBind = isBind === undefined ? true : !!isBind;\n      var binderExtra;\n      if (navigator.pointerEnabled) {\n        binderExtra = function(handle) {\n          handle.style.touchAction = isBind ? 'none' : '';\n        };\n      } else if (navigator.msPointerEnabled) {\n        binderExtra = function(handle) {\n          handle.style.msTouchAction = isBind ? 'none' : '';\n        };\n      } else {\n        binderExtra = noop;\n      }\n      var bindMethod = isBind ? 'addEventListener' : 'removeEventListener';\n      for (var i = 0; i < this.handles.length; i++) {\n        var handle = this.handles[i];\n        this._bindStartEvent(handle, isBind);\n        binderExtra(handle);\n        handle[bindMethod]('click', this);\n      }\n    };\n    proto.pointerDown = function(event, pointer) {\n      if (event.target.nodeName == 'INPUT' && event.target.type == 'range') {\n        this.isPointerDown = false;\n        delete this.pointerIdentifier;\n        return;\n      }\n      this._dragPointerDown(event, pointer);\n      var focused = document.activeElement;\n      if (focused && focused.blur) {\n        focused.blur();\n      }\n      this._bindPostStartEvents(event);\n      this.emitEvent('pointerDown', [event, pointer]);\n    };\n    proto._dragPointerDown = function(event, pointer) {\n      this.pointerDownPoint = Unipointer.getPointerPoint(pointer);\n      var canPreventDefault = this.canPreventDefaultOnPointerDown(event, pointer);\n      if (canPreventDefault) {\n        event.preventDefault();\n      }\n    };\n    proto.canPreventDefaultOnPointerDown = function(event) {\n      return event.target.nodeName != 'SELECT';\n    };\n    proto.pointerMove = function(event, pointer) {\n      var moveVector = this._dragPointerMove(event, pointer);\n      this.emitEvent('pointerMove', [event, pointer, moveVector]);\n      this._dragMove(event, pointer, moveVector);\n    };\n    proto._dragPointerMove = function(event, pointer) {\n      var movePoint = Unipointer.getPointerPoint(pointer);\n      var moveVector = {\n        x: movePoint.x - this.pointerDownPoint.x,\n        y: movePoint.y - this.pointerDownPoint.y\n      };\n      if (!this.isDragging && this.hasDragStarted(moveVector)) {\n        this._dragStart(event, pointer);\n      }\n      return moveVector;\n    };\n    proto.hasDragStarted = function(moveVector) {\n      return Math.abs(moveVector.x) > 3 || Math.abs(moveVector.y) > 3;\n    };\n    proto.pointerUp = function(event, pointer) {\n      this.emitEvent('pointerUp', [event, pointer]);\n      this._dragPointerUp(event, pointer);\n    };\n    proto._dragPointerUp = function(event, pointer) {\n      if (this.isDragging) {\n        this._dragEnd(event, pointer);\n      } else {\n        this._staticClick(event, pointer);\n      }\n    };\n    proto._dragStart = function(event, pointer) {\n      this.isDragging = true;\n      this.dragStartPoint = Unipointer.getPointerPoint(pointer);\n      this.isPreventingClicks = true;\n      this.dragStart(event, pointer);\n    };\n    proto.dragStart = function(event, pointer) {\n      this.emitEvent('dragStart', [event, pointer]);\n    };\n    proto._dragMove = function(event, pointer, moveVector) {\n      if (!this.isDragging) {\n        return;\n      }\n      this.dragMove(event, pointer, moveVector);\n    };\n    proto.dragMove = function(event, pointer, moveVector) {\n      event.preventDefault();\n      this.emitEvent('dragMove', [event, pointer, moveVector]);\n    };\n    proto._dragEnd = function(event, pointer) {\n      this.isDragging = false;\n      setTimeout(function() {\n        delete this.isPreventingClicks;\n      }.bind(this));\n      this.dragEnd(event, pointer);\n    };\n    proto.dragEnd = function(event, pointer) {\n      this.emitEvent('dragEnd', [event, pointer]);\n    };\n    proto.onclick = function(event) {\n      if (this.isPreventingClicks) {\n        event.preventDefault();\n      }\n    };\n    proto._staticClick = function(event, pointer) {\n      if (this.isIgnoringMouseUp && event.type == 'mouseup') {\n        return;\n      }\n      var nodeName = event.target.nodeName;\n      if (nodeName == 'INPUT' || nodeName == 'TEXTAREA') {\n        event.target.focus();\n      }\n      this.staticClick(event, pointer);\n      if (event.type != 'mouseup') {\n        this.isIgnoringMouseUp = true;\n        setTimeout(function() {\n          delete this.isIgnoringMouseUp;\n        }.bind(this), 400);\n      }\n    };\n    proto.staticClick = function(event, pointer) {\n      this.emitEvent('staticClick', [event, pointer]);\n    };\n    Unidragger.getPointerPoint = Unipointer.getPointerPoint;\n    return Unidragger;\n  }));\n  return module.exports;\n});\n\n$__System.registerDynamic(\"@system-env\", [], false, function() {\n  return {\n    \"production\": true,\n    \"browser\": true,\n    \"node\": false,\n    \"dev\": false,\n    \"default\": true\n  };\n});\n\n$__System.registerDynamic(\"4\", [\"@system-env\"], true, function($__require, exports, module) {\n  ;\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  var productionEnv = $__require('@system-env').production;\n  var process = module.exports = {};\n  var queue = [];\n  var draining = false;\n  var currentQueue;\n  var queueIndex = -1;\n  function cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n      queue = currentQueue.concat(queue);\n    } else {\n      queueIndex = -1;\n    }\n    if (queue.length) {\n      drainQueue();\n    }\n  }\n  function drainQueue() {\n    if (draining) {\n      return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n    var len = queue.length;\n    while (len) {\n      currentQueue = queue;\n      queue = [];\n      while (++queueIndex < len) {\n        if (currentQueue) {\n          currentQueue[queueIndex].run();\n        }\n      }\n      queueIndex = -1;\n      len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n  }\n  process.nextTick = function(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n      for (var i = 1; i < arguments.length; i++) {\n        args[i - 1] = arguments[i];\n      }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n      setTimeout(drainQueue, 0);\n    }\n  };\n  function Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n  }\n  Item.prototype.run = function() {\n    this.fun.apply(null, this.array);\n  };\n  process.title = 'browser';\n  process.browser = true;\n  process.env = {NODE_ENV: productionEnv ? 'production' : 'development'};\n  process.argv = [];\n  process.version = '';\n  process.versions = {};\n  function noop() {}\n  process.on = noop;\n  process.addListener = noop;\n  process.once = noop;\n  process.off = noop;\n  process.removeListener = noop;\n  process.removeAllListeners = noop;\n  process.emit = noop;\n  process.binding = function(name) {\n    throw new Error('process.binding is not supported');\n  };\n  process.cwd = function() {\n    return '/';\n  };\n  process.chdir = function(dir) {\n    throw new Error('process.chdir is not supported');\n  };\n  process.umask = function() {\n    return 0;\n  };\n  return module.exports;\n});\n\n$__System.registerDynamic(\"10\", [\"9\", \"f\", \"4\"], true, function($__require, exports, module) {\n  var process = $__require(\"4\");\n  var define,\n      global = this || self,\n      GLOBAL = global;\n  (function(window, factory) {\n    if (typeof define == 'function' && define.amd) {\n      define(['get-size/get-size', 'unidragger/unidragger'], function(getSize, Unidragger) {\n        return factory(window, getSize, Unidragger);\n      });\n    } else if (typeof module == 'object' && module.exports) {\n      module.exports = factory(window, $__require('9'), $__require('f'));\n    } else {\n      window.Draggabilly = factory(window, window.getSize, window.Unidragger);\n    }\n  }(window, function factory(window, getSize, Unidragger) {\n    'use strict';\n    var document = window.document;\n    function noop() {}\n    function extend(a, b) {\n      for (var prop in b) {\n        a[prop] = b[prop];\n      }\n      return a;\n    }\n    function isElement(obj) {\n      return obj instanceof HTMLElement;\n    }\n    var requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n    var lastTime = 0;\n    if (!requestAnimationFrame) {\n      requestAnimationFrame = function(callback) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = setTimeout(callback, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n    }\n    var docElem = document.documentElement;\n    var transformProperty = typeof docElem.style.transform == 'string' ? 'transform' : 'WebkitTransform';\n    var jQuery = window.jQuery;\n    function Draggabilly(element, options) {\n      this.element = typeof element == 'string' ? document.querySelector(element) : element;\n      if (jQuery) {\n        this.$element = jQuery(this.element);\n      }\n      this.options = extend({}, this.constructor.defaults);\n      this.option(options);\n      this._create();\n    }\n    var proto = Draggabilly.prototype = Object.create(Unidragger.prototype);\n    Draggabilly.defaults = {};\n    proto.option = function(opts) {\n      extend(this.options, opts);\n    };\n    var positionValues = {\n      relative: true,\n      absolute: true,\n      fixed: true\n    };\n    proto._create = function() {\n      this.position = {};\n      this._getPosition();\n      this.startPoint = {\n        x: 0,\n        y: 0\n      };\n      this.dragPoint = {\n        x: 0,\n        y: 0\n      };\n      this.startPosition = extend({}, this.position);\n      var style = getComputedStyle(this.element);\n      if (!positionValues[style.position]) {\n        this.element.style.position = 'relative';\n      }\n      this.enable();\n      this.setHandles();\n    };\n    proto.setHandles = function() {\n      this.handles = this.options.handle ? this.element.querySelectorAll(this.options.handle) : [this.element];\n      this.bindHandles();\n    };\n    proto.dispatchEvent = function(type, event, args) {\n      var emitArgs = [event].concat(args);\n      this.emitEvent(type, emitArgs);\n      var jQuery = window.jQuery;\n      if (jQuery && this.$element) {\n        if (event) {\n          var $event = jQuery.Event(event);\n          $event.type = type;\n          this.$element.trigger($event, args);\n        } else {\n          this.$element.trigger(type, args);\n        }\n      }\n    };\n    proto._getPosition = function() {\n      var style = getComputedStyle(this.element);\n      var x = this._getPositionCoord(style.left, 'width');\n      var y = this._getPositionCoord(style.top, 'height');\n      this.position.x = isNaN(x) ? 0 : x;\n      this.position.y = isNaN(y) ? 0 : y;\n      this._addTransformPosition(style);\n    };\n    proto._getPositionCoord = function(styleSide, measure) {\n      if (styleSide.indexOf('%') != -1) {\n        var parentSize = getSize(this.element.parentNode);\n        return !parentSize ? 0 : (parseFloat(styleSide) / 100) * parentSize[measure];\n      }\n      return parseInt(styleSide, 10);\n    };\n    proto._addTransformPosition = function(style) {\n      var transform = style[transformProperty];\n      if (transform.indexOf('matrix') !== 0) {\n        return;\n      }\n      var matrixValues = transform.split(',');\n      var xIndex = transform.indexOf('matrix3d') === 0 ? 12 : 4;\n      var translateX = parseInt(matrixValues[xIndex], 10);\n      var translateY = parseInt(matrixValues[xIndex + 1], 10);\n      this.position.x += translateX;\n      this.position.y += translateY;\n    };\n    proto.pointerDown = function(event, pointer) {\n      this._dragPointerDown(event, pointer);\n      var focused = document.activeElement;\n      if (focused && focused.blur && focused != document.body) {\n        focused.blur();\n      }\n      this._bindPostStartEvents(event);\n      this.element.classList.add('is-pointer-down');\n      this.dispatchEvent('pointerDown', event, [pointer]);\n    };\n    proto.pointerMove = function(event, pointer) {\n      var moveVector = this._dragPointerMove(event, pointer);\n      this.dispatchEvent('pointerMove', event, [pointer, moveVector]);\n      this._dragMove(event, pointer, moveVector);\n    };\n    proto.dragStart = function(event, pointer) {\n      if (!this.isEnabled) {\n        return;\n      }\n      this._getPosition();\n      this.measureContainment();\n      this.startPosition.x = this.position.x;\n      this.startPosition.y = this.position.y;\n      this.setLeftTop();\n      this.dragPoint.x = 0;\n      this.dragPoint.y = 0;\n      this.element.classList.add('is-dragging');\n      this.dispatchEvent('dragStart', event, [pointer]);\n      this.animate();\n    };\n    proto.measureContainment = function() {\n      var containment = this.options.containment;\n      if (!containment) {\n        return;\n      }\n      var container = isElement(containment) ? containment : typeof containment == 'string' ? document.querySelector(containment) : this.element.parentNode;\n      var elemSize = getSize(this.element);\n      var containerSize = getSize(container);\n      var elemRect = this.element.getBoundingClientRect();\n      var containerRect = container.getBoundingClientRect();\n      var borderSizeX = containerSize.borderLeftWidth + containerSize.borderRightWidth;\n      var borderSizeY = containerSize.borderTopWidth + containerSize.borderBottomWidth;\n      var position = this.relativeStartPosition = {\n        x: elemRect.left - (containerRect.left + containerSize.borderLeftWidth),\n        y: elemRect.top - (containerRect.top + containerSize.borderTopWidth)\n      };\n      this.containSize = {\n        width: (containerSize.width - borderSizeX) - position.x - elemSize.width,\n        height: (containerSize.height - borderSizeY) - position.y - elemSize.height\n      };\n    };\n    proto.dragMove = function(event, pointer, moveVector) {\n      if (!this.isEnabled) {\n        return;\n      }\n      var dragX = moveVector.x;\n      var dragY = moveVector.y;\n      var grid = this.options.grid;\n      var gridX = grid && grid[0];\n      var gridY = grid && grid[1];\n      dragX = applyGrid(dragX, gridX);\n      dragY = applyGrid(dragY, gridY);\n      dragX = this.containDrag('x', dragX, gridX);\n      dragY = this.containDrag('y', dragY, gridY);\n      dragX = this.options.axis == 'y' ? 0 : dragX;\n      dragY = this.options.axis == 'x' ? 0 : dragY;\n      this.position.x = this.startPosition.x + dragX;\n      this.position.y = this.startPosition.y + dragY;\n      this.dragPoint.x = dragX;\n      this.dragPoint.y = dragY;\n      this.dispatchEvent('dragMove', event, [pointer, moveVector]);\n    };\n    function applyGrid(value, grid, method) {\n      method = method || 'round';\n      return grid ? Math[method](value / grid) * grid : value;\n    }\n    proto.containDrag = function(axis, drag, grid) {\n      if (!this.options.containment) {\n        return drag;\n      }\n      var measure = axis == 'x' ? 'width' : 'height';\n      var rel = this.relativeStartPosition[axis];\n      var min = applyGrid(-rel, grid, 'ceil');\n      var max = this.containSize[measure];\n      max = applyGrid(max, grid, 'floor');\n      return Math.min(max, Math.max(min, drag));\n    };\n    proto.pointerUp = function(event, pointer) {\n      this.element.classList.remove('is-pointer-down');\n      this.dispatchEvent('pointerUp', event, [pointer]);\n      this._dragPointerUp(event, pointer);\n    };\n    proto.dragEnd = function(event, pointer) {\n      if (!this.isEnabled) {\n        return;\n      }\n      if (transformProperty) {\n        this.element.style[transformProperty] = '';\n        this.setLeftTop();\n      }\n      this.element.classList.remove('is-dragging');\n      this.dispatchEvent('dragEnd', event, [pointer]);\n    };\n    proto.animate = function() {\n      if (!this.isDragging) {\n        return;\n      }\n      this.positionDrag();\n      var _this = this;\n      requestAnimationFrame(function animateFrame() {\n        _this.animate();\n      });\n    };\n    proto.setLeftTop = function() {\n      this.element.style.left = this.position.x + 'px';\n      this.element.style.top = this.position.y + 'px';\n    };\n    proto.positionDrag = function() {\n      this.element.style[transformProperty] = 'translate3d( ' + this.dragPoint.x + 'px, ' + this.dragPoint.y + 'px, 0)';\n    };\n    proto.staticClick = function(event, pointer) {\n      this.dispatchEvent('staticClick', event, [pointer]);\n    };\n    proto.enable = function() {\n      this.isEnabled = true;\n    };\n    proto.disable = function() {\n      this.isEnabled = false;\n      if (this.isDragging) {\n        this.dragEnd();\n      }\n    };\n    proto.destroy = function() {\n      this.disable();\n      this.element.style[transformProperty] = '';\n      this.element.style.left = '';\n      this.element.style.top = '';\n      this.element.style.position = '';\n      this.unbindHandles();\n      if (this.$element) {\n        this.$element.removeData('draggabilly');\n      }\n    };\n    proto._init = noop;\n    if (jQuery && jQuery.bridget) {\n      jQuery.bridget('draggabilly', Draggabilly);\n    }\n    return Draggabilly;\n  }));\n  return module.exports;\n});\n\n$__System.register('1', ['c', '10'], function (_export, _context) {\n  \"use strict\";\n\n  var Packery, Draggabilly, pckry;\n  return {\n    setters: [function (_c) {\n      Packery = _c.default;\n    }, function (_) {\n      Draggabilly = _.default;\n    }],\n    execute: function () {\n      pckry = new Packery('.packery-container', {\n        draggable: true,\n        isInitLayout: false\n      });\n\n\n      document.querySelectorAll('.draggable').forEach(function (i) {\n        var draggie = new Draggabilly(i);\n        pckry.bindDraggabillyEvents(draggie);\n      });\n\n      pckry.on('layoutComplete', function () {\n        pckry.element.parentElement.classList.add(\"packed\");\n      });\n      pckry.layout();\n    }\n  };\n});\n})\n(function(factory) {\n  if (typeof define == 'function' && define.amd)\n    define([], factory);\n  else if (typeof module == 'object' && module.exports && typeof require == 'function')\n    module.exports = factory();\n  else\n    factory();\n});"]}